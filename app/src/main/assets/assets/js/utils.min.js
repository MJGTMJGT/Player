(function () {
    function h(a, b) {
        return "classList" in a ? a.classList.contains(b) : (new RegExp("(?:\\s|^)" + b + "(?:\\s|$)")).test(a.className)
    }

    function k(a, b) {
        if ("classList" in a)return a.classList.add(b);
        h(a, b) || (a.className += (a.className ? " " : "") + b)
    }

    function l(a, b) {
        if ("classList" in a)return a.classList.remove(b);
        h(a, b) && (a.className = a.className.replace(new RegExp("(?:\\s|^)" + b + "(?:\\s|$)"), " ").replace(/^\s+|\s+$/g, ""))
    }

    function p(a, b) {
        var c = document.createEvent("Events");
        c.initEvent(a, !0, !0);
        c.data = b;
        return c
    }

    function m(a) {
        var b = arguments, c, d, g, f;
        d = 1;
        for (f = b.length; d < f; d += 2)for (c = b[d].split(/\s/), g = c.length; g--;)b[0].addEventListener(c[g], b[d + 1])
    }

    function n(a, b, c) {
        b = b.split(/\s/);
        for (var d = b.length; d--;)a.removeEventListener(b[d], c, !1)
    }

    function q(a) {
        var b, c = [];
        for (b in a)c[c.length] = encodeURIComponent(b) + "=" + encodeURIComponent(a[b]);
        return c.join("&").replace("%20", "+")
    }

    window.utils = {
        gid: function (a) {
            return document.getElementById(a)
        }, hasClass: h, addClass: k, removeClass: l, addRemoveClass: function (a, b, c) {
            c ?
                k(a, b) : l(a, b)
        }, toggleClass: function (a, b) {
            if ("classList" in a)return a.classList.toggle(b);
            if (h(a, b))return l(a, b), !1;
            k(a, b);
            return !0
        }, getDataAttribute: function (a, b) {
            var c;
            a && a.correspondingUseElement && (a = a.correspondingUseElement);
            for (; a && a.getAttribute;) {
                if (c = a.getAttribute(b))return c;
                a = a.parentNode
            }
            return null
        }, getElementWithAttribute: function (a, b) {
            for (var c; a && a.getAttribute;) {
                if (c = a.getAttribute(b))return a;
                a = a.parentNode
            }
            return null
        }, elOffset: function (a) {
            a = a.getBoundingClientRect();
            return {
                left: Math.round(a.left) +
                window.pageXOffset, top: Math.round(a.top) + window.pageYOffset, width: a.width, height: a.height
            }
        }, makeSafe: function (a) {
            return a.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace('"', "&quot;").replace("'", "&#x27;").replace("/", "&#x2F;")
        }, assign: m, unassign: n, dispatch: function (a, b) {
            window.dispatchEvent(p(a, b))
        }, onready: function (a) {
            "complete" === document.readyState || "loading" !== document.readyState && !document.documentElement.doScroll ? a() : m(document, "DOMContentLoaded", a)
        }, ajax: function (a, b,
                           c, d, g, f) {
            var e;
            if (/^(http|\/\/)/.test(b) && window.XDomainRequest) e = new window.XDomainRequest, /^https?:\//.test(b) && (c = b.split("/")[0], f = window.location.protocol, c !== f && (b = f + b.substring(c.length))), e.open(a, b), e.onload = function () {
                var a = JSON.parse(e.responseText);
                d(a)
            }, e.onerror = function () {
                g(e.responseText)
            }, e.send(); else {
                e = new XMLHttpRequest;
                e.open(a, b, !0);
                e.onreadystatechange = function () {
                    if (4 == e.readyState)if (200 <= e.status && 300 > e.status) {
                        var a = JSON.parse(e.responseText);
                        d(a)
                    } else g(e.responseText)
                };
                c && (c = q(c), e.setRequestHeader("Content-type", "application/x-www-form-urlencoded"));
                if (f && f.headers)for (a = 0, b = f.headers.length; a < b; a++)e.setRequestHeader(f.headers[a][0], f.headers[a][1]);
                e.send(c)
            }
        }, prettyTime: function (a, b) {
            if (0 >= a)return "0:00";
            var c = Math.floor(a % 60) + "", c = Math.floor(a / 60) + ":" + (1 === c.length ? "0" + c : c);
            if (b) {
                var d;
                d = (a % 1 + "").substring(2, 4);
                c += "." + (0 === d.length ? "00" : 1 === d.length ? "0" + d : d.substring(0, 2))
            }
            return c
        }, makeMenu: function (a, b, c, d, g, f) {
            var e = function (d) {
                if (d)for (d = d.target; d;) {
                    if (d ==
                        b || d == a)return;
                    d = d.parentNode
                }
                l(b, c);
                n(window, "mousedown", e);
                g && g()
            };
            m(a, f ? "mousedown" : "click", function (a) {
                a.preventDefault();
                h(b, c) ? e(null) : (k(b, c), d && d(), m(window, "mousedown", e))
            })
        }, isIOS: function () {
            var a = navigator.platform;
            return "iPad" === a || "iPhone" === a || "iPod" === a
        }
    }
})();
