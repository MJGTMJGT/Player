(function (a, d, m, n, p, g, q, r, h) {
    function e(a) {
        for (var c = document.getElementsByClassName("modal"),
                 b = c.length; b--;)a && n(c[b], "jsnoescape") || g(c[b], "active");
        m("BLUR_ALL")
    }

    function t(a) {
        a.preventDefault();
        e(!1)
    }

    function l(a) {
        a = a.getElementsByClassName("jsclosemodal");
        for (var c = a.length; c--;)d(a[c], "click", t)
    }

    window.soundslice.activateModalClosers = l;
    window.soundslice.closeActiveModal = e;
    r(function () {
        var k = a("searchwrap"), c = a("searchlink"), b, f;
        b = document.getElementsByClassName("showloginmodal");
        for (f = b.length; f--;)d(b[f],
            "click", function (b) {
                b.preventDefault();
                p(a("loginmodal"), "active");
                setTimeout(function () {
                    a("loginmodal_email").focus()
                }, 100)
            });
        (b = a("menulink")) && h(b, a("more-links"), "active");
        c && k && d(c, "mousedown touchstart", function (b) {
            b.preventDefault();
            q(k, "active");
            a("searchbar").focus()
        });
        (b = a("settings-link")) && h(b, a("user-settings"), "active");
        (b = a("closesuccessmsg")) && d(b, "mousedown touchstart", function (b) {
            g(a("unverified-stripe"), "active")
        });
        l(document);
        d(window, "keydown", function (a) {
            27 === a.which && e(!0)
        });
    })
})(utils.gid, utils.assign, utils.dispatch, utils.hasClass, utils.addClass, utils.removeClass, utils.toggleClass, utils.onready, utils.makeMenu);
