var ia = 1 / 3,
    xa = 16 / 9;

function ya() {};
var Fa = 16 / 9,
    Ga = utils.isIOS,
    u = utils.assign,
    Ta = 1,
    Ya = 1,
    $a = 1,
    lb = document.createElement("audio"),
    mb = 0,
    sb, wb = null,
    xb, Ob;
try {
    xb = "undefined" !== typeof window.AudioContext || "undefined" !== typeof window.webkitAudioContext
} catch (a) {
    xb = !1
}
if (xb) {
    Ob = window.AudioContext || window.webkitAudioContext;
    try {
        wb = new Ob
    } catch (a) {
        wb = null
    }
}
sb = wb;
var ic, jc;
try {
    ic = lb.canPlayType("audio/mpeg"), jc = lb.canPlayType('audio/ogg; codecs="vorbis"')
} catch (a) {
    jc = ic = !1
}
if (Ga() || /(android)/i.test(navigator.userAgent)) {
    var sc = function() {
        var a = sb.createOscillator(),
            b = sb.createGain();
        b.gain.value = 0;
        a.connect(b);
        b.connect(sb.destination);
        b = sb.currentTime;
        a.start(b);
        a.stop(b + .5);
        sb.resume && sb.resume();
        rc(window, "IOS_INIT_AUDIO", sc)
    };
    u(window, "IOS_INIT_AUDIO", sc)
}

function Bc(a, b) {
    this.Oa = a;
    this.o = a.o;
    this.W = this.N = null;
    this.m = 0;
    this.Ia = this.aa = 1;
    this.J = 0;
    this.ia = !1;
    this.Y = 0;
    this.Cc = [];
    this.oa = this.da = this.I = !1;
    this.L = {};
    this.ea = {};
    this.Wa = this.na = "";
    this.R = [];
    this.g = [];
    this.T = [];
    this.pa = {};
    this.la = [];
    this.Ua = [];
    var c = this;
    this.eb = function() {
        Cc(c)
    };
    Tc("GET", b, null, function(a) {
        for (var b = {}, f = a.inst, g = f.length; g--;) b[f[g][0]] = [f[g][3], f[g][4]];
        c.pa = b;
        c.la = a.metronome;
        c.Ua = a.percussion;
        c.o.dispatch(56, f);
        a.metronome && c.o.dispatch(1);
        c.o.dispatch(3);
        a = Uc();
        a.gain.value =
            c.Ia;
        a.connect(sb.destination);
        c.N = a;
        a = Uc();
        a.gain.value = c.J;
        a.connect(sb.destination);
        c.W = a;
        Vc(c, -4)
    }, ya)
}
Bc.prototype = {
    sa: function() {
        for (var a = this.o, b = a.K.O, c = this, d = b.length; d--;) Vc(this, b[d].qb);
        a.assign([5, 13], function(b) {
            b = b.data;
            c.Oa.ia = c.ia;
            Vc(c, b.qb);
            a.dispatch(44, b)
        }, [60], function(a) {
            c.g.length && (a = a.data, c.g[a.index].gain.value = Wc(a))
        }, [59], function() {
            for (var a = c.g, b = c.o.K.O, d = b.length; d--;) a[d] && (a[d].gain.value = Wc(b[d]))
        })
    },
    ed: function(a, b, c) {
        var d = soundslice.media_url;
        a = b ? this.la : c ? this.Ua : this.pa[a] || this.pa["0"];
        jc ? a = a[0] : ic ? (mb = .045, a = a[1]) : a = "";
        return d + a
    },
    ya: function(a) {
        return !!this.L[a]
    },
    Rb: function(a, b, c, d, e, f, g) {
        0 > c || 0 > d || this.Cc.push([a, b, c, d, e, f, g, !1])
    },
    pause: function() {
        for (var a = this.T.length; a--;) window.clearTimeout(this.T[a]);
        this.T.length = 0;
        for (a = this.R.length; a--;) this.R[a].disconnect();
        this.R.length = 0;
        for (a = this.g.length; a--;) this.g[a].disconnect();
        this.g.length = 0;
        this.Cc.length = 0;
        this.m += (sb.currentTime - this.Y) * this.aa;
        this.ia = !1
    },
    setVolume: function(a) {
        null !== this.N && (this.N.gain.value = this.Ia = a)
    },
    Aa: function(a) {
        this.J = a;
        null !== this.W && (this.W.gain.value = a)
    }
};

function Xc(a) {
    Cc(a);
    a.ia = !0
}

function $c(a) {
    for (var b = a.g, c = a.o.K.O, d = 0,
             e = c.length; d !== e; d++) b[d] = Uc(), b[d].gain.value = Wc(c[d]), b[d].connect(a.N);
    a.Y = sb.currentTime;
    a.Cc.length = 0
}

function Cc(a) {
    var b = sb.currentTime - a.Y + .5,
        c = a.Cc,
        d, e;
    for (d = c.length; d--;)
        if (e = c[d], e[2] < b) {
            var f = a,
                g = e[0],
                h = e[1],
                k = e[2],
                l = e[3],
                m = e[4],
                n = e[5],
                p = e[6],
                q = e[7];
            if (f.L[h] && !(21 > g && -4 !== h)) {
                e = sb.createBufferSource();
                var r = Uc(),
                    t = r.gain,
                    p = p ? .3 : .001;
                f.na || (f.na = "function" === typeof e.start ? "start" : "noteGrainOn", f.Wa = "function" === typeof e.stop ? "stop" : "noteOff");
                q ? (g = mb, n = f.N) : -4 === h ? (g = mb, n = f.W) : (g = m + mb + 3.36 * (g - 21), n = f.g[n]);
                r.connect(n);
                l = Math.min(l, 3.36 - p - m);
                e.buffer = f.L[h];
                e.connect(r);
                h = f.Y + k;
                e[f.na](h,
                    g, l + p);
                t.value = 0;
                t.linearRampToValueAtTime(0, h);
                t.linearRampToValueAtTime(1, h + .001);
                t.linearRampToValueAtTime(1, h + l);
                t.linearRampToValueAtTime(0, h + l + p);
                e[f.Wa](h + l + p);
                f.R.push(r)
            }
            c.splice(d, 1)
        }
    c.length && a.T.push(window.setTimeout(a.eb, 350))
}

function Uc() {
    return "function" === typeof sb.createGain ? sb.createGain() : sb.createGainNode()
}

function Vc(a, b) {
    var c = 1E3 <= b,
        d = -4 === b;
    c && (b = 1E3);
    if (!(a.L[b] || a.ea[b] || d && null === a.la)) {
        a.ea[b] = !0;
        d || (a.I = !0, a.o.dispatch(8));
        var e = new XMLHttpRequest;
        e.open("GET", a.ed(b, d, c), !0);
        e.responseType = "arraybuffer";
        e.onload = function() {
            if (400 <= e.status) e.onerror();
            else sb.decodeAudioData(e.response, function(c) {
                a.L[b] = c;
                c = 0;
                var d = a.ea;
                d[b] = !1;
                for (var e in d) d.hasOwnProperty(e) && d[e] && c++;
                a.I && 0 === c && (a.I = !1, a.da = !0, a.o.dispatch(7, a.Oa.I))
            })
        };
        e.onerror = function() {
            a.o.dispatch(24, ["Couldn't load the synth player.", !0]);
            a.I = !1;
            a.o.dispatch(6)
        };
        e.send()
    }
}

function nd(a) {
    this.g = a;
    this.m = 0;
    this.aa = 1;
    this.J = 0;
    this.I = !1;
    this.oa = this.da = !0
}
nd.prototype = {
    sa: function() {
        var a = this.g.o;
        a.dispatch(8);
        a.dispatch(7, this.g.I)
    },
    ya: function() {
        return !0
    },
    ed: function() {
        return ""
    },
    pause: function() {},
    setVolume: function() {},
    Aa: function() {}
};

function od(a, b) {
    var c = this;
    this.o = a;
    this.I = null;
    this.W = 1;
    this.J = !1;
    this.N = !0;
    this.R = !1;
    this.Ia = !0;
    this.sa = 0;
    this.Wa = this.Ua = this.ia = !1;
    this.g = sb ? new Bc(this, b) : new nd(this);
    this.oa = {};
    this.m = 0;
    this.ea = function() {
        c.pause();
        c.o.dispatch(41)
    }
}
od.prototype = {
    Y: function() {
        this.g.sa()
    },
    la: function(a) {
        null !== a && a(this)
    },
    Aa: ya,
    L: function() {
        return this.g.I
    },
    T: function() {
        return this.g.da
    },
    aa: function() {
        return this.J
    },
    play: function() {
        this.g.oa ? this.o.dispatch(24, ["Your browser doesn't support playback.", !1]) : (pd(this), this.J = !0, this.o.dispatch(43))
    },
    pause: function() {
        this.g.pause();
        this.J = !1;
        this.o.dispatch(40);
        Cd(this)
    },
    da: function(a) {
        this.J ? (this.g.pause(), this.g.m = a, pd(this)) : this.g.m = a;
        return !0
    },
    Fa: function() {
        return this.g.m
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return .1
    },
    na: function() {
        return 3
    },
    sb: function(a) {
        var b = this.aa();
        b && this.pause();
        this.W = a;
        this.g.aa = a;
        this.o.dispatch(57, a);
        b && this.play()
    },
    setVolume: function(a) {
        this.g.setVolume(a)
    },
    ya: function() {
        return 1
    }
};

function Jd(a, b) {
    0 > b ? b = 0 : 1 < b && (b = 1);
    b !== a.g.J && (a.g.Aa(b), a.o.dispatch(62, b))
}

function Cd(a) {
    a.m && (window.clearTimeout(a.m), a.m = 0)
}

function pd(a) {
    var b = a.o,
        c = b.K,
        d = c.Qa.length - 1,
        e = 0,
        f = c.O.length,
        g = a.oa,
        h, k, l, m, n;
    Kd(Ld(b), a.g.m, g);
    b = g.Ha;
    $c(a.g);
    for (h = b; h <= d; h++) {
        l = c.U[c.Qa[h]];
        n = (m = h === b) ? g.Va * l.Ga.Ea : 0;
        for (k = 0; k < f; k++) Od(l.O[k], a.g, a.W, e, m, n);
        a: {
            k = l;
            var p = a.g,
                q = a.W,
                r = e,
                t = k.Gb;
            if (m && 0 < n) {
                m = Math.ceil(n * t) / t;
                if (m === k.N) break a;
                m = Math.ceil(m * t);
                r -= Zd(k, 0, n / k.N)
            } else m = 0;
            for (n = m; n !== k.Fb; n++) p.Cc.push([null, -4, (r + Zd(k, 0, n / t / k.N)) / q, .2, 0, null, !1, !1])
        }
        e += Zd(l, h === b ? g.Va : 0, 1)
    }
    Cd(a);
    a.m = window.setTimeout(a.ea, 1E3 * e / a.W);
    Xc(a.g)
}
var ae = null;

function be(a, b, c) {
    Tc("GET", b, null, function(a) {
        c(a.url)
    }, function() {
        a.dispatch(24, ["Apologies...We couldn't play the audio.", !1])
    })
}

function ce(a, b, c) {
    this.o = a;
    this.I = null;
    c = c || {};
    this.Qb = c.url;
    this.duration = c.duration || 0;
    this.xc = c.mediaURL;
    this.yc = c.extra;
    this.Dc = c.indirect;
    this.R = this.N = !1;
    this.Ia = !0;
    this.sa = 0;
    this.Wa = this.Ua = this.ia = !1;
    this.m = sb;
    this.Ab = this.Zb = this.ea = this.W = this.oa = this.J = null;
    this.Oa = this.Ob = !1;
    this.nb = this.Pb = 1;
    this.ic = this.jc = this.ec = this.zb = 0;
    var d = this;
    this.mb = this.gc = this.hc = this.Ub = null;
    this.wc = function() {
        d.pause();
        d.o.dispatch(41)
    };
    this.Vb = new Float32Array(4096);
    c.init && this.Y()
}
ce.prototype = {
    Y: function() {
        this.Ob = !0;
        this.o.dispatch(33, 0);
        if (null === ae) {
            var a = document.createElement("script"),
                b = this;
            a.type = "text/javascript";
            a.onload = function() {
                ae = window.soundtouch;
                de(b)
            };
            a.src = this.xc + "assets/js/soundtouch.min.js";
            document.getElementsByTagName("head")[0].appendChild(a)
        } else de(this)
    },
    la: function(a) {
        null !== a && a(this)
    },
    Aa: ya,
    L: function() {
        return this.Ob
    },
    T: function() {
        return null !== this.oa
    },
    aa: function() {
        return this.Oa
    },
    play: function() {
        this.oa && !this.Oa &&
        ee(this) && (this.Oa = !0, this.o.dispatch(43))
    },
    pause: function() {
        this.J && (re(this), this.Oa = !1, this.o.dispatch(40))
    },
    da: function(a) {
        if (!this.oa) return !1;
        this.Oa ? (re(this), this.zb = a, ee(this)) : this.zb = a;
        return !0
    },
    Fa: function() {
        return this.zb + this.nb * (this.m.currentTime - this.ec)
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return .25
    },
    na: function() {
        return 1.25
    },
    sb: function(a) {
        if (this.oa) {
            var b = this.Oa;
            b && re(this);
            this.nb = a;
            this.Zb.tempo = a;
            b && ee(this);
            this.o.dispatch(57, a)
        }
    },
    setVolume: function(a) {
        this.W && (this.Pb =
            this.W.gain.value = a)
    },
    ya: function() {
        return 1
    }
};

function se(a) {
    null !== a.mb && (window.clearTimeout(a.mb), a.mb = null)
}

function re(a) {
    a.W.gain.linearRampToValueAtTime(a.Pb, a.m.currentTime);
    a.W.gain.linearRampToValueAtTime(0, a.m.currentTime + .05);
    a.J[a.hc](a.m.currentTime + .05);
    null !== a.ea && (a.J.disconnect(a.ea), a.ea.disconnect(), a.ea = null);
    a.J = null;
    se(a);
    a.zb = a.Fa()
}

function ee(a) {
    a.J = a.m.createBufferSource();
    a.J.buffer = a.oa;
    null === a.Ub && (a.Ub = "function" === typeof a.J.start ? "start" : "noteGrainOn", a.hc = "function" === typeof a.J.stop ? "stop" : "noteOff", a.gc = "function" === typeof a.m.createScriptProcessor ? "createScriptProcessor" : "createJavascriptNode");
    a.W = te(a);
    a.W.gain.value = a.Pb;
    a.W.connect(a.m.destination);
    1 !== a.nb ? (a.ea = a.m[a.gc](2048, 2, 2), a.ea.onaudioprocess = function(b) {
        var d = b.outputBuffer.getChannelData(0);
        b = b.outputBuffer.getChannelData(1);
        var e = a.Ab.extract(a.Vb,
            2048),
            f;
        for (f = 0; f < e; f++) d[f] = a.Vb[2 * f], b[f] = a.Vb[2 * f + 1]
    }, a.ea.connect(a.W), a.J.connect(a.ea)) : a.J.connect(a.W);
    a.ec = a.m.currentTime;
    var b = a.Fa();
    a.Ab.sourcePosition = Math.round(b * a.oa.sampleRate);
    return 0 < a.duration - b ? (a.J[a.Ub](0, b, a.duration - b), se(a), a.mb = window.setTimeout(a.wc, 1 / a.nb * (a.duration - b) * 1E3), !0) : !1
}

function te(a) {
    return "function" === typeof a.m.createGain ? a.m.createGain() : a.m.createGainNode()
}

function ue(a, b) {
    a.m.decodeAudioData(b, function(b) {
        b.duration !== a.duration && (a.duration = b.duration, a.o.dispatch(52));
        a.Ob = !1;
        a.oa = b;
        a.Ab = new ae.SimpleFilter(b, b.numberOfChannels, a.Zb);
        a.o.dispatch(7, a.I)
    }, function() {
        if (10 > a.jc) {
            var c;
            c = new Uint8Array(b);
            var d = a.ic;
            for (c.indexOf = Array.prototype.indexOf;;) {
                d = c.indexOf(255, d);
                if (-1 === d || c[d + 1] & 1) break;
                d++
            }
            a.ic = d;
            a.jc++;
            (c = -1 !== d ? b.slice(d) : null) && ue(a, c)
        } else a.o.dispatch(24, ["Apologies...We couldn't play the audio.", !1])
    })
}

function ze(a) {
    a.o.dispatch(8);
    a.Zb = new ae.SoundTouch(a.yc);
    a.Ab = null;
    var b = new XMLHttpRequest;
    b.open("GET", a.Qb, !0);
    b.responseType = "arraybuffer";
    b.onload = function() {
        ue(a, b.response)
    };
    b.onprogress = function(b) {
        a.o.dispatch(33, "undefined" !== typeof b.loaded && "undefined" !== typeof b.total ? b.loaded / b.total : b.position / b.totalSize)
    };
    b.send()
}

function de(a) {
    a.Dc ? be(a.o, a.Qb, function(b) {
        a.Qb = b;
        ze(a)
    }) : ze(a)
}

function Ae(a, b, c) {
    this.o = a;
    this.I = null;
    c = c || {};
    this.ea = c.url;
    this.duration = c.duration || 0;
    this.Oa = c.indirect;
    this.R = this.N = !1;
    this.Ia = !0;
    this.sa = 1;
    this.Wa = this.Ua = this.ia = !1;
    this.m = null;
    this.oa = this.J = this.W = !1;
    c.init && this.Y()
}
Ae.prototype = {
    Y: function() {
        this.W = !0;
        this.o.dispatch(8);
        if (this.Oa) {
            var a = this;
            be(this.o, this.ea, function(b) {
                a.ea = b;
                Be(a)
            })
        } else Be(this)
    },
    la: function(a) {
        null !== a && a(this)
    },
    Aa: ya,
    L: function() {
        return this.W
    },
    T: function() {
        return null !== this.m
    },
    aa: function() {
        return this.J
    },
    play: function() {
        this.m && (this.m.play(), this.J = !0, this.o.dispatch(43))
    },
    pause: function() {
        this.m && (this.m.pause(), this.J = !1, this.o.dispatch(40))
    },
    da: function(a) {
        if (!this.m) return !1;
        var b = this.J;
        b && this.pause();
        this.oa = b;
        this.m.currentTime =
            a;
        De(this.o.m);
        return !0
    },
    Fa: function() {
        return this.m.currentTime
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return .5
    },
    na: function() {
        return 1.5
    },
    sb: function(a) {
        this.m && (this.m.playbackRate = a, this.o.dispatch(57, a))
    },
    setVolume: function(a) {
        this.m && (this.m.volume = a)
    },
    ya: function() {
        return 1
    }
};

function Be(a) {
    var b = document.createElement("audio"),
        c = a.o;
    u(b, "loadedmetadata", function() {
        a.W = !1;
        a.m = this;
        Infinity !== this.duration && (a.duration = this.duration);
        a.duration && a.o.dispatch(52);
        a.o.dispatch(7, a.I)
    }, "waiting", function() {
        a.J = !1;
        c.dispatch(11)
    }, "playing", function() {
        a.J || (a.J = !0, c.dispatch(43));
        De(c.m)
    }, "seeked", function() {
        a.oa && (a.oa = !1, a.play())
    }, "ended", function() {
        a.pause();
        c.dispatch(41)
    }, "error", function() {
        a.pause()
    });
    b.src = a.ea;
    document.body.appendChild(b)
}

function Ee(a, b, c) {
    this.o = a;
    this.I = null;
    c = c || {};
    this.ea = c.url;
    this.duration = c.duration || 0;
    this.oa = c.mediaURL + "scripts/soundmanager2-2.97a.20150601/";
    this.Oa = c.indirect;
    this.Ia = this.R = this.N = !1;
    this.sa = 1;
    this.J = this.Wa = this.Ua = this.ia = !1;
    this.m = null;
    this.W = !1;
    this.o.dispatch(63, "Unfortunately, your browser doesn\u2019t support speed manipulation. Try Google Chrome to use this feature.");
    c.init && this.Y()
}
Ee.prototype = {
    Y: function() {
        this.J = !0;
        this.o.dispatch(8);
        var a = document.createElement("script"),
            b = this;
        a.type = "text/javascript";
        a.onload = function() {
            Oe(b)
        };
        a.src = this.oa + "soundmanager2.min.js";
        document.getElementsByTagName("head")[0].appendChild(a)
    },
    la: function(a) {
        null !== a && a(this)
    },
    Aa: ya,
    L: function() {
        return this.J
    },
    T: function() {
        return null !== this.m
    },
    aa: function() {
        return this.W
    },
    play: function() {
        if (this.m) {
            var a = this;
            this.m.play({
                g: function() {
                    a.pause();
                    a.o.dispatch(41)
                }
            });
            this.W = !0;
            this.o.dispatch(43)
        }
    },
    pause: function() {
        this.m && (this.m.pause(), this.W = !1, this.o.dispatch(40))
    },
    da: function(a) {
        if (!this.m) return !1;
        this.m.setPosition(1E3 * a);
        return !0
    },
    Fa: function() {
        return this.m.position / 1E3
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return 1
    },
    na: function() {
        return 1
    },
    sb: function() {},
    setVolume: function(a) {
        this.m && this.m.setVolume(100 * a)
    },
    ya: function() {
        return 1
    }
};

function Pe(a) {
    var b = a.o,
        c = window.soundManager;
    c.setup({
        debugMode: !1,
        useHighPerformance: !0,
        url: a.oa,
        onready: function() {
            a.m = c.createSound({
                id: "ss",
                url: a.ea,
                flashVersion: 9,
                autoLoad: !0,
                onload: function() {
                    a.duration = a.m.duration / 1E3;
                    a.J = !1;
                    b.dispatch(52);
                    b.dispatch(7, a.I)
                }
            });
            a.m.load()
        },
        ontimeout: function() {
            b.dispatch(24, ["Apologies...We couldn't play the audio.", !1])
        }
    });
    c.beginDelayedInit()
}

function Oe(a) {
    a.Oa ? be(a.o, a.ea, function(b) {
        a.ea = b;
        Pe(a)
    }) : Pe(a)
}

function Qe(a) {
    Ta = 2;
    a.dispatch(8);
    window.onYouTubeIframeAPIReady = function() {
        Ta = 3;
        Re("YTLOADED")
    };
    var b = document.createElement("script");
    b.src = "https://www.youtube.com/iframe_api";
    var c = document.getElementsByTagName("script")[0];
    c.parentNode.insertBefore(b, c);
    var d = setInterval(function() {
        var b = B(Se(a.Lc));
        b.src && (clearInterval(d), b.src = b.src.replace(/^http:/, "https:"))
    }, 100)
}

function Te(a) {
    var b = B(a),
        c;
    u(b, "mouseover", function() {
        c = setInterval(function() {
            document.activeElement == b && window.focus()
        }, 250)
    }, "mouseout", function() {
        clearInterval(c)
    })
}

function af(a) {
    this.o = a;
    this.m = null;
    this.T = "";
    this.I = this.g = !1;
    this.R = -1;
    this.L = 1;
    this.N = 0;
    this.J = -1;
    1 === Ta && Qe(a);
    var b = document.createElement("div");
    a = bf(a, "video-container");
    b.id = Se(this);
    a.appendChild(b)
}
af.prototype = {
    play: function() {
        this.g && (this.I = !0, this.m.playVideo())
    },
    pause: function() {
        this.I = !1;
        this.g && this.m.pauseVideo()
    },
    Fa: function() {
        if (!this.g) return 0;
        var a = Date.now(),
            b = this.m.getCurrentTime();
        if ("undefined" === typeof b) return null;
        if (this.I) {
            var c = this.R;
            if (-1 !== c) {
                if (1 < Math.abs(b - c)) return c;
                this.N = a;
                this.J = b;
                this.R = -1
            }
            if (b === this.J && 0 !== this.N) return b + (a - this.N) / 1E3 * this.L;
            this.N = a;
            this.J = b
        }
        return b
    },
    sb: function(a) {
        this.g && (this.m.setPlaybackRate(a), this.L = a, this.o.dispatch(57, a))
    },
    setVolume: function(a) {
        this.g &&
        this.m.setVolume(Math.round(100 * a))
    }
};

function cf(a, b) {
    a.T !== b && (a.T = b, a.g && (a.m.cueVideoById(b), a.J = -1))
}

function df(a, b) {
    if (!a.m) {
        var c = a.o;
        a.m = new YT.Player(Se(a), {
            height: "100%",
            width: "100%",
            videoId: b,
            playerVars: {
                controls: 0,
                disablekb: 1,
                html5: 1,
                iv_load_policy: 3,
                modestbranding: 1,
                playsinline: 1,
                rel: 0,
                showinfo: 0
            },
            events: {
                onError: function(a) {
                    switch (a.data) {
                        case 100:
                            c.dispatch(24, ["This video has been removed from YouTube.", !0]);
                            c.dispatch(40);
                            break;
                        case 101:
                        case 150:
                            c.dispatch(24, ["This particular video cannot be displayed on sites outside of YouTube.", !0]), c.dispatch(40)
                    }
                },
                onPlaybackRateChange: function(b) {
                    b =
                        b.data;
                    c.dispatch(57, b);
                    a.L = b
                },
                onReady: function() {
                    a.g = !0;
                    Te(Se(a));
                    c.dispatch(80);
                    c.dispatch(7, null)
                },
                onStateChange: function(b) {
                    switch (b.data) {
                        case YT.PlayerState.PLAYING:
                            a.I = !0;
                            c.dispatch(43);
                            De(c.m);
                            break;
                        case YT.PlayerState.PAUSED:
                            a.I = !1;
                            c.dispatch(40);
                            break;
                        case YT.PlayerState.BUFFERING:
                            a.I = !1;
                            c.dispatch(11);
                            break;
                        case YT.PlayerState.ENDED:
                            a.I = !1, c.dispatch(40), c.dispatch(41)
                    }
                }
            }
        })
    }
}

function Se(a) {
    return "ytvid" + a.o.K.vc
}
var ef = {
    D: 86400,
    H: 3600,
    M: 60,
    S: 1
};

function ff(a, b, c) {
    this.o = a;
    this.I = null;
    this.W = b;
    this.duration = c || 0;
    this.N = this.J = !1;
    this.Ia = this.R = !0;
    this.sa = 1;
    this.ia = !1;
    this.Wa = this.Ua = !0;
    gf(this);
    a.Lc || (a.Lc = new af(a));
    this.m = a.Lc;
    if (3 === Ta) df(this.m, b);
    else {
        var d = this;
        u(window, "YTLOADED", function() {
            df(d.m, b)
        })
    }
}
ff.prototype = {
    la: function(a) {
        var b = this.m;
        B(Se(b)).style.display = "block";
        if (b.g) cf(b, this.W), a && a(this);
        else {
            var c = this;
            this.o.assign([80], function() {
                cf(b, c.W);
                a && a(c)
            })
        }
    },
    Aa: function() {
        B(Se(this.m)).style.display = "none"
    },
    L: function() {
        return !this.m.g
    },
    T: function() {
        return this.m.g
    },
    aa: function() {
        return this.m.I
    },
    play: function() {
        this.m.play();
        hf(this)
    },
    pause: function() {
        this.m.pause()
    },
    da: function(a) {
        var b = this.m;
        b.g ? (b.m.seekTo(a, !0), b.R = a, b.J = a, b.I || (b.pause(), De(b.o.m)), a = !0) : a = !1;
        return a
    },
    Fa: function() {
        this.J ||
        hf(this);
        return this.m.Fa()
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return .5
    },
    na: function() {
        return 2
    },
    sb: function(a) {
        this.m.sb(a)
    },
    setVolume: function(a) {
        this.m.setVolume(a)
    },
    ya: function() {
        return Fa
    }
};

function hf(a) {
    if (!a.J) {
        var b;
        b = a.m;
        b = b.g ? b.m.getDuration() : 0;
        0 !== b && b !== a.duration && (a.duration = b, a.o.dispatch(52), 0 !== b % 1 && (a.J = !0))
    }
}

function gf(a) {
    Tc("GET", "https://www.googleapis.com/youtube/v3/videos/?id=" + a.W + "&part=contentDetails,snippet&fields=items/contentDetails/duration,items/snippet/title&key=AIzaSyA5Z1s9QU_C8xx2kXR9jWjkIY6ugjg5Y2c", null, function(b) {
        b = b.items[0].contentDetails.duration.substring(2).split(/(\d+[DHMS])/);
        for (var c = b.length, d = 0,
                 e; c--;)(e = b[c]) && (e = ef[e[e.length - 1]] * e.substring(0, e.length - 1)) && (d += e);
        a.J || (a.duration = d, a.o.dispatch(52))
    }, function() {})
}
var jf = document.createElement("video"),
    kf = !0,
    tf;
try {
    tf = jf.canPlayType && jf.canPlayType("video/mp4")
} catch (a) {
    tf = !1
}

function uf(a) {
    this.o = a;
    this.g = this.ma = null;
    this.ia = this.R = "";
    this.da = -1;
    this.L = this.m = this.J = !1;
    this.I = 1;
    this.N = !1;
    this.la = (new Date).getTime();
    this.sa = .5;
    this.oa = 1.5
}
uf.prototype = {
    T: function(a, b) {
        if (!this.ma) {
            var c = this.o,
                d = document.createElement("video"),
                e = bf(c, "video-container"),
                f = this;
            this.ma = d;
            d.style.width = "100%";
            d.style.height = "100%";
            wf(d, "block");
            d.setAttribute("webkit-playsinline", "");
            d.setAttribute("playsinline", "");
            d.preload = "metadata";
            e.appendChild(d);
            u(d, "contextmenu", function(a) {
                a.preventDefault();
                return !1
            }, "loadedmetadata", function() {
                f.I = 3;
                c.dispatch(78, f.da)
            }, "pause", function() {
                f.m = !1;
                f.L ? c.dispatch(11) : c.dispatch(40)
            }, "waiting", function() {
                f.m = !1;
                c.dispatch(11)
            }, "playing", function() {
                f.N = !0
            }, "seeked", function() {
                f.L && (f.L = !1, f.play())
            }, "ended", function() {
                f.pause();
                c.dispatch(41)
            }, "error", function(a) {
                a.target.error.code === a.target.error.MEDIA_ERR_NETWORK && f.R ? c.dispatch(79) : a.target.networkState === HTMLMediaElement.NETWORK_NO_SOURCE && (c.dispatch(24, ["We couldn't load the video. Check its URL...", !0]), f.I = 1, c.dispatch(6));
                f.pause()
            }, "timeupdate", function() {
                if (f.N) f.N = !1, f.m = !0, c.dispatch(43), De(c.m);
                else {
                    var a = (new Date).getTime();
                    1E3 < a - f.la &&
                    (De(c.m), f.la = a)
                }
            }, "mousedown touchstart", xf(function() {
                f.N || f.m ? f.pause() : f.play()
            }))
        }
        b && 1 === $a && !this.ma.canPlayType("application/vnd.apple.mpegURL") && yf()
    },
    na: function(a, b, c, d) {
        zf(this, a, b, c, d, !1)
    },
    pa: function() {
        wf(this.ma, "block")
    },
    ea: function() {
        wf(this.ma, "none")
    },
    play: function() {
        this.ma && this.ma.play()
    },
    pause: function() {
        this.ma && (this.ma.pause(), this.m = !1)
    },
    aa: function(a) {
        if (this.ma) {
            var b = this.m;
            (this.L = b) && this.pause();
            this.ma.currentTime = a;
            De(this.o.m);
            return !0
        }
        return !1
    },
    Fa: function() {
        return this.ma ?
            this.ma.currentTime : null
    },
    sb: function(a) {
        this.ma && (this.ma.playbackRate = a, this.o.dispatch(57, a))
    },
    setVolume: function(a) {
        this.ma && (this.ma.volume = a)
    },
    Y: function() {
        return this.ma && this.ma.videoWidth && this.ma.videoHeight ? this.ma.videoWidth / this.ma.videoHeight : xa
    },
    W: function() {
        return this.ma ? this.ma.duration : 0
    }
};

function zf(a, b, c, d, e, f) {
    if (f || a.R !== b || a.ia !== c) {
        a.I = 2;
        a.R = b;
        a.ia = c;
        a.da = d;
        f = a.ma;
        var g = a.o;
        if (c && kf)
            if (1 === $a) f.src = c, e(), a.J = !0;
            else if (2 === $a) u(window, "HLSJS_LOAD", function() {
                zf(a, b, c, d, e, !0)
            });
            else if (window.Hls.isSupported()) {
                a.g && a.g.destroy();
                var h = new window.Hls({
                    maxBufferSize: 6E6,
                    maxBufferLength: 60
                });
                h.attachMedia(f);
                h.on(window.Hls.Events.MEDIA_ATTACHED, function() {
                    h.loadSource(c);
                    e()
                });
                a.g = h;
                a.J = !0
            } else kf = !1, b ? (f.src = b, e()) : (g.dispatch(24, ["Your browser doesn't support our video playback.", !0]), g.dispatch(6)), a.J = !1;
        else a.J && a.g && a.g.destroy(), f.src = b, e(), a.J = !1
    }
}

function yf() {
    if (1 === $a) {
        $a = 2;
        var a = document.createElement("script");
        a.type = "text/javascript";
        a.onload = function() {
            $a = 3;
            Re("HLSJS_LOAD")
        };
        a.src = "https://cdn.jsdelivr.net/hls.js/latest/hls.min.js";
        document.getElementsByTagName("head")[0].appendChild(a)
    }
}

function Af(a) {
    this.o = a;
    this.L = "";
    this.N = -1;
    this.g = null;
    this.R = this.m = !1;
    this.I = 1;
    this.J = !1;
    Bf(this)
}
Af.prototype = {
    T: function(a, b) {
        if (!this.g)
            if (3 !== Ya) {
                var c = this;
                u(window, "VIDJS_LOAD", function() {
                    c.T(a, b)
                })
            } else {
                var d = this.o,
                    e = window.videojs,
                    f = document.createElement("video"),
                    g = document.createElement("source"),
                    h = bf(d, "video-container"),
                    c = this;
                e && (this.I = 2, g.setAttribute("type", "video/mp4"), g.setAttribute("src", a), f.appendChild(g), f.style.width = "100%", h.appendChild(f), e(f, {
                    controls: !1,
                    autoplay: !1,
                    preload: "metadata",
                    children: {
                        controlBar: !1
                    }
                }, function() {
                    var b = this;
                    b.width("100%");
                    b.height("100%");
                    b.on("durationchange",
                        function() {
                            c.I = 3;
                            d.dispatch(78, c.N)
                        });
                    b.on("waiting", function() {
                        c.m = !1;
                        d.dispatch(40)
                    });
                    b.on("playing", function() {
                        c.m = !0;
                        d.dispatch(43);
                        De(d.m)
                    });
                    b.on("seeked", function() {
                        c.R && (c.R = !1, c.play());
                        De(d.m)
                    });
                    b.on("timeupdate", function() {
                        c.m || b.paused() || (c.m = !0, d.dispatch(43));
                        De(d.m)
                    });
                    b.on("ended", function() {
                        c.pause();
                        d.dispatch(41)
                    });
                    b.on("error", function() {
                        d.dispatch(24, ["The video couldn't be loaded. Try reloading the page.", !1])
                    });
                    c.g = b;
                    c.I = 3;
                    d.dispatch(78, c.N);
                    c.L !== a && b.src(c.L);
                    !1 === c.J && b.hide()
                }))
            }
    },
    na: function(a, b, c, d) {
        this.L !== a && (this.L = a, this.N = c, this.g && (this.g.src(a), d && d()))
    },
    pa: function() {
        this.J || (this.J = !0, this.g && this.g.show())
    },
    ea: function() {
        this.J && (this.J = !1, this.g && this.g.hide())
    },
    play: function() {
        this.g && this.g.play()
    },
    pause: function() {
        this.g && (this.g.pause(), this.m = !1)
    },
    aa: function(a) {
        if (this.g) {
            var b = this.m;
            (this.R = b) && this.pause();
            this.g.currentTime(a);
            De(this.o.m);
            return !0
        }
        return !1
    },
    Fa: function() {
        return this.g ? this.g.currentTime() : null
    },
    sb: function() {},
    setVolume: function(a) {
        this.g &&
        this.g.volume(a)
    },
    Y: function() {
        return xa
    },
    W: function() {
        return this.g ? this.g.duration() : 0
    }
};

function Bf(a) {
    if (1 === Ya) {
        Ya = 2;
        var b = document.createElement("script");
        b.type = "text/javascript";
        b.onload = function() {
            Ya = 3;
            Re("VIDJS_LOAD")
        };
        b.src = "//vjs.zencdn.net/4.11.1/video.js";
        document.getElementsByTagName("head")[0].appendChild(b);
        a.o.dispatch(74);
        a.o.dispatch(63, "Your web browser doesn\u2019t support changing video speed. Try a more modern browser to use this feature.")
    }
}

function Cf(a, b, c, d, e, f) {
    this.o = a;
    this.I = null;
    this.J = b;
    this.W = c;
    this.ea = d;
    this.oa = e;
    this.duration = f || 0;
    this.N = !1;
    this.Ia = this.R = !0;
    this.sa = 1;
    this.Wa = this.Ua = this.ia = !1;
    var g = this;
    a.assign([78], function(b) {
        b.data === g.J && (g.duration = g.m.W(), a.dispatch(52), a.dispatch(7, g.I))
    }, [79], function() {
        Hf(g)
    });
    a.ad || (a.ad = tf ? new uf(a) : new Af(a));
    this.m = a.ad;
    this.m.T(c, e)
}
Cf.prototype = {
    la: function(a) {
        var b = this;
        this.m.pa();
        this.m.na(this.W, this.oa, this.J, function() {
            a(b)
        })
    },
    Aa: function() {
        this.m.ea()
    },
    L: function() {
        return 2 === this.m.I
    },
    T: function() {
        return 3 === this.m.I
    },
    aa: function() {
        return this.m.m
    },
    play: function() {
        this.m.play()
    },
    pause: function() {
        this.m.pause()
    },
    da: function(a) {
        return this.m.aa(a)
    },
    Fa: function() {
        return this.m.Fa()
    },
    eb: function() {
        return 0
    },
    pa: function() {
        return this.m.sa
    },
    na: function() {
        return this.m.oa
    },
    sb: function(a) {
        return this.m.sb(a)
    },
    setVolume: function(a) {
        this.m.setVolume(a)
    },
    ya: function() {
        return this.m.Y()
    }
};

function Hf(a) {
    if (a.ea) {
        var b = a.Fa();
        a.pause();
        Tc("GET", a.ea, null, function(c) {
            a.W = c.url;
            a.la(function(a) {
                a.da(b);
                a.play()
            })
        }, function() {
            a.o.dispatch(24, ["The video expired. Try reloading the page.", !0])
        })
    }
};

function If(a, b, c, d, e, f, g, h) {
    this.Ta = a;
    this.za = b;
    this.m = c || 1;
    this.g = d;
    this.Bb = 0;
    this.Bb = this.g / 480;
    this.J = e;
    this.kc = f;
    this.qc = g;
    this.I = h
}
If.prototype = {};

function Jf(a, b) {
    this.J = a;
    if ("T" === a) this.m = null, this.L = this.N = 0, this.g = 57453, this.I = null;
    else {
        var c = a.split("");
        this.m = c[0];
        this.qa = parseInt(c[1], 10);
        this.L = this.N = 0;
        "F" === this.m || "H4" === a ? (c = 4, this.g = 57442, this.I = 10, 5 === this.qa && (this.N = 1)) : "C" === this.m ? (c = 3, this.g = 57436, this.I = 4, 3 < this.qa ? this.N = this.qa - 3 : 3 > this.qa && (this.L = 3 - this.qa)) : "P" === this.m ? (c = this.qa = .5 * (b + 1), this.g = 57449, this.I = 1 === b ? 2 : -2) : "H" === this.m ? (c = 2, this.g = 57426, this.I = 5, this.L = 3) : (c = 2, this.g = 57424, this.I = -2, 1 === this.qa ? this.L =
            3 : (this.N = 1, this.L = 2));
        this.qa !== c && (this.I -= 2 * (c - this.qa))
    }
}
Jf.prototype = {};
var Kf = {};

function Lf(a, b) {
    var c = a + "-" + b;
    Kf[c] || (Kf[c] = new Jf(a, b));
    return Kf[c]
}

function Mf(a, b, c) {
    this.g = Nf(a, b);
    this.m = Lf(c, 5)
}

function Of(a, b) {
    this.g = a;
    this.bd = b;
    this.ka = []
}
Of.prototype = {
    Ib: function(a) {
        this.ka.push(a);
        null === a.m && (a.m = []);
        a.m.push(this);
        this.ka.sort(Pf)
    }
};

function Qf(a, b) {
    for (var c = a.ka, d = b.P.Sa, e = b, f = c.indexOf(b); f--;)
        if (c[f].P.Sa === d) e = c[f];
        else break;
    return new Rf(e, a)
}

function Tf(a) {
    if (a.ka[0].ga) return 1 < a.ka[0].ja.V.length ? 0 === a.ka[0].Hb ? 1 : -1 : -1;
    var b = 0,
        c = 0;
    a = a.ka;
    for (var d = a.length, e; d--;) {
        e = a[d];
        if (1 < e.ja.V.length) return 0 === e.Hb ? 1 : -1;
        e.wa ? b++ : c++
    }
    return 0 === b ? 1 : 0 === c ? -1 : 1
}

function Uf(a, b) {
    return Zf(b) || a.ka[0] === b ? $f(b) + ag(b) : a.ka[a.ka.length - 1] === b ? $f(b) : bg(b)
}

function Rf(a, b) {
    var c = a.P,
        d = c.o,
        e = d.g,
        f = e / 2,
        g = 1.17 * e,
        h = 2.34 * e,
        k = c.Sa,
        c = b.ka,
        l = c.length,
        m = bg(a),
        n = Tf(b),
        p = !1,
        q = a != b.ka[0],
        r = null,
        t, w = b.ka;
    t = w.length;
    var v = !1;
    if (w[0].ga && !w[t - 1].ga && (v = !0, 2 < t))
        for (var x = 1; x < t - 1; x++)
            if (!w[x].ga) {
                v = !1;
                break
            }
    t = v;
    for (var v = !1, A, z, w = l; w--;)
        if (c[w].P.Sa === k) {
            A = c[w];
            z = w;
            break
        } else p = !0;
    q && (m = $f(a) - 2.6 * e);
    l = p ? A.P.x + A.P.width : t ? $f(c[l - 1]) - f / 2 : bg(A);
    w = (l - m) / e;
    k = 1 === n ? cg(a, !0, !0, !0) - f : dg(a, !0, !0, !0) + f;
    t ? A = k : (A = 1 === n ? cg(A, !0, !0, !0) - f : dg(A, !0, !0, !0) + f, p && (A += e * -n));
    k = eg(d, k, 0,
        1 === n, !0);
    A = eg(d, A, 0, 1 === n, !0);
    d = 5 >= w ? g : 10 <= w ? h : g + (h - g) * (w - 5) / 5;
    for (w = z + 1; w--;) {
        g = c[w];
        if (hg(g)) {
            v = !0;
            break
        }
        if (g === a) break
    }
    if (!t && !v)
        for (h = (A - k) / (l - m), p = k - h * m, w = z + 1; w--;) {
            g = c[w];
            z = h * $f(g) + p;
            if (1 === n) {
                if (t = cg(g, !0, !1, !0) - f, z -= d / 2, t < z && (k -= z - t, A -= z - t, p = k - h * m), null === r || z < r) r = z
            } else if (t = dg(g, !0, !1, !0) + f, z += d / 2, t > z && (k += t - z, A += t - z, p = k - h * m), null === r || z > r) r = z;
            if (g === a) break
        }
    this.Sc = m;
    this.cd = l;
    this.hd = k;
    this.dd = A;
    this.yb = n;
    this.height = d;
    this.g = .28 * e;
    this.qd = r - n * this.g
}
Rf.prototype = {};

function lg(a, b) {
    for (var c = mg(a.Sc, a.hd, a.cd, a.dd, .1, a.yb, a.height, a.height, a.height + a.g), d = 0, e = 1, f, g = 0,
             h; 1E3 > g;) {
        h = (d + e) / 2;
        f = 1 - h;
        f = f * f * f * a.Sc + 3 * f * f * h * c[8] + 3 * f * h * h * c[10] + h * h * h * a.cd;
        if (1 >= Math.abs(f - b)) break;
        b > f ? d = h : e = h;
        g++
    }
    d = 1 - h;
    return d * d * d * a.hd + 3 * d * d * h * c[9] + 3 * d * h * h * c[11] + h * h * h * a.dd
}
var ng = [null, null, null, null, null, null, null, null, null, null, null, null];

function mg(a, b, c, d, e, f, g, h, k) {
    var l, m, n, p, q;
    if (b === d) {
        var r = c - a;
        c = a + r * e;
        d = b - f * g;
        l = c;
        m = b - f * h;
        n = c;
        p = b - f * k;
        h = a + r * (1 - e);
        g = d;
        a = h;
        b = m;
        q = h;
        f = p
    } else {
        var r = og(90),
            t, w, v, x, A;
        t = (d - b) / (c - a);
        0 > t && (f *= -1);
        v = Math.sqrt(Math.pow(a - c, 2) + Math.pow(b - d, 2));
        w = 180 * Math.atan(t) / pg;
        x = v * e;
        q = a + x / r * og(90 - w);
        x = b + x / r * og(w);
        A = 180 - 180 * Math.atan(-1 / t) / pg;
        l = q + -f * h / r * og(90 - A);
        m = x + f * h / r * og(A);
        c = q + -f * g / r * og(90 - A);
        d = x + f * g / r * og(A);
        n = q + -f * k / r * og(90 - A);
        p = x + f * k / r * og(A);
        x = v * (1 - e);
        q = a + x / r * og(90 - w);
        x = b + x / r * og(w);
        A = 180 - 180 * Math.atan(-1 / t) / pg;
        a = q + -f * h / r * og(90 - A);
        b = x + f * h / r * og(A);
        h = q + -f * g / r * og(90 - A);
        g = x + f * g / r * og(A);
        q += -f * k / r * og(90 - A);
        f = x + f * k / r * og(A)
    }
    ng[0] = l;
    ng[1] = m;
    ng[2] = a;
    ng[3] = b;
    ng[4] = c;
    ng[5] = d;
    ng[6] = h;
    ng[7] = g;
    ng[8] = n;
    ng[9] = p;
    ng[10] = q;
    ng[11] = f;
    return ng
}

function qg(a, b, c, d, e, f, g) {
    this.g = a;
    this.value = b;
    this.ab = c;
    this.Kb = d;
    this.Yb = e;
    this.Lb = f;
    this.Oc = g;
    a = 2 === b ? 2 : 1;
    (f = rg[b]) ? (this.J = 0 < c, this.I = 1 < f, this.Ec = 8 <= f, this.T = sg[b], this.R = tg[b], this.Rc = vg[b], this.Qc = xg[b], this.m = 1 === f ? 2 === a ? 18 : 1 : 2 === f ? 2 : 3, c && (a *= yg[c][0], f *= yg[c][1]), this.L = Nf(a, f), d && (a *= e, f *= d), this.N = Nf(a, f), this.duration = a / f) : (this.Ec = this.I = this.J = !1, this.T = 58595, this.R = 0, this.Rc = vg["1"], this.Qc = xg["1"], this.m = 1, c = String(b), d = c.indexOf("."), -1 === d ? b = Nf(b, 1) : (b = c.substring(d + 1), e = Math.pow(10,
        b.length), b = Nf(parseInt(b, 10) + parseInt(c.substring(0, d), 10) * e, e), b = zg(b, Nf(1, 256)) ? b : Ag), this.N = this.L = b, this.duration = this.N.Ea)
}

function Bg(a, b) {
    this.ka = a;
    this.I = a[0].ba.Kb;
    this.J = a[0].ba.Yb;
    for (var c = a.length; c--;) a[c].kb = b;
    this.g = this.m = null
}
Bg.prototype = {};

function Cg(a, b) {
    var c = b.g,
        d = Dg(a),
        e = null,
        f = Eg(a),
        g = 1.5 * c,
        h = .75 * c,
        k, l, m, n;
    if (f)
        for (n = .75 * c, k = a.ka.length; k--;) {
            if (m = a.ka[k], !m.ta && (d ? (l = cg(m, !1, !0, !0), m.pause && (l -= 2.5 * c)) : l = dg(m, !1, !0, !0), null === e || d && l < e || !d && l > e)) e = l
        } else n = g, e = (Fg(Gg(a.ka[0], d, !0, null), !0, null) + Fg(Gg(a.ka[a.ka.length - 1], d, !0, null), !0, null)) / 2;
    d && (e -= n);
    e += h * (d ? -1 : 1);
    e = d ? Math.min(-h - n, e) : Math.max(b.Y + h, e);
    f ? (c = e, c = d ? c - g / 2 : c + (n + g / 2)) : (c = e += n, d && (c -= g));
    a.m = e;
    a.g = c
}

function Hg(a, b) {
    null === a.g && Cg(a, b);
    return a.g
}

function Dg(a) {
    if (!Eg(a)) return Ig(a.ka[0]).I;
    for (var b = 0, c = a.ka.length; b < c; b++)
        if (!a.ka[b].ta) return a.ka[b].wa;
    return !1
}

function Eg(a) {
    var b = a.ka[0];
    a = a.ka[a.ka.length - 1];
    var c;
    return null !== b.J && b.J === a.J && (c = Ig(b), c.ka[0] === b && Jg(c) === a) ? !1 : !0
}

function Kg(a) {
    var b = a.I;
    a = a.J;
    if (3 === b && 2 === a) return "3";
    if (2 === b && 3 === a) return "2";
    switch (b) {
        case 5:
        case 6:
        case 7:
            if (4 === a) return b.toString();
            break;
        case 9:
        case 10:
        case 11:
        case 12:
        case 13:
            if (8 === a) return b.toString()
    }
    return b + ":" + a
}

function Mg(a, b) {
    this.ka = a;
    for (var c = this.g = a.length, d = 0 !== a[0].track.Xa && Ng(a[0].ja).track.va, e = !1, f, g,
             h; c--;)
        if (f = a[c], f.na = 0, f.J = b, !f.ta && d && !e)
            for (g = f.X.length; g--;)
                if (Og(f.X[g])) {
                    e = !0;
                    h = 0 !== (f.g & 4096);
                    break
                }
    this.J = e;
    a: {
        c = this.ka;
        d = this.g;
        for (g = c[0].K.o; d--;)
            if (f = c[d], null !== f.W && !g.ea && !hg(f)) {
                c = 1 === f.W;
                break a
            }
        if (1 < c[0].ja.V.length) c = 0 === c[0].Hb;
        else {
            for (var k = g = 0, l = 0, m = 0, n,
                     d = this.g; d--;) f = c[d], n = Math.abs(f.sa), 0 !== (f.g & 4096) ? (g++, n > l && (l = n)) : (k++, n > m && (m = n));
            c = g === k ? l > m : g > k
        }
    }
    this.I = c;
    if (e) {
        e =
            a[0].track;
        if (h && this.I && 2 === e.Xa || !h && !this.I && 1 === e.Xa) e = Pg(e);
        this.m = e
    } else this.m = null
}
Mg.prototype = {
    width: function() {
        return Qg(Jg(this)) - Qg(this.ka[0])
    }
};

function Vg(a) {
    if (!a.J) return a.ka[a.g - 1];
    var b = a.ka,
        c = a.g;
    a = a.m;
    for (var d; c--;)
        if (d = b[c], Wg(d, a)) return d
}

function Xg(a) {
    if (!a.J) return a.ka[0];
    var b = a.ka,
        c = a.g;
    a = a.m;
    var d, e;
    for (d = 0; d !== c; d++)
        if (e = b[d], Wg(e, a)) return e
}

function Jg(a) {
    return a.ka[a.g - 1]
}

function Yg(a, b, c, d, e, f, g) {
    this.m = a;
    this.J = Nf(b, c);
    this.g = d;
    this.I = Nf(e, f);
    this.L = g
}
Yg.prototype = {};

function Zg(a, b, c, d) {
    this.Ba = a;
    this.Ya = Nf(b, c);
    this.g = d
}

function $g(a, b, c) {
    this.I = a.substring(0, 1).toUpperCase() + a.substring(1);
    this.m = b;
    this.g = c ? c.substring(0, 1).toUpperCase() + c.substring(1) : null
}
$g.prototype = {};

function ah(a, b, c, d, e) {
    this.$a = a;
    this.Ac = b;
    this.g = "undefined" !== typeof c ? c : null;
    this.name = b;
    this.ob = this.g;
    this.track = e;
    a = b.split(/((?:^\s*[ABCDEFGabcdefg][b#]?)|(?:\/[ABCDEFGabcdefg][b#]?$))/g);
    this.L = 1 === a.length ? null : new $g(a[1], a[2], 3 === a.length ? null : a[3].substring(1));
    this.J = this.I = this.m = 0;
    bh(this)
}
ah.prototype = {
    xb: function(a) {
        if (0 === a) this.name = this.Ac, this.ob = this.g, bh(this);
        else {
            var b = this.L;
            null !== b && (b = new $g(ch[0][(dh[b.I.toUpperCase()] + a + 60) % 12], b.m, b.g ? ch[0][(dh[b.g.toUpperCase()] + a + 60) % 12] : null), this.name = b.I + b.m + (b.g ? "/" + b.g : ""));
            this.g && this.track.m ? (this.ob = eh(this.g, a, this.track.m), bh(this)) : this.ob = null
        }
    }
};

function bh(a) {
    a.m = 0;
    a.I = 0;
    a.J = 0;
    if (null != a.ob) {
        var b = null,
            c = null,
            d = null,
            e = a.ob.length,
            f, g;
        for (f = 0; f !== e; f++)
            if (g = a.ob[f]) {
                if (null === b || g < b) b = g;
                if (null === c || g > c) c = g;
                null === d && (d = g)
            }
        1 < b && 3 < c && (a.I = b);
        a.m = d;
        a.J = Math.max(4, c - b + 1)
    }
}

function fh(a, b, c, d, e, f, g, h, k, l, m, n, p, q, r, t, w, v, x, A, z, y, I) {
    this.o = a;
    this.K = b;
    this.index = c;
    (a = d) && "untitled" !== a.toLowerCase() || (a = 6 === h || 7 === h ? "Guitar" : "Track " + (this.index + 1));
    this.name = a;
    this.qb = e;
    this.volume = f;
    this.g = g;
    this.gb = h;
    this.Da = 0 !== h;
    this.m = k;
    this.T = null === k ? "" : k.join(" ");
    this.Jb = l;
    this.R = this.xb = m;
    this.L = {};
    if (n)
        for (e = 0, f = n.length; e < f; e++) this.L[n[e][0]] = new ah(n[e][0], n[e][1].name, n[e][1].frets, 0, this);
    this.Xa = p;
    this.N = null;
    if (q) {
        n = [];
        for (e = q.length; e--;) p = q[e], n.push(new Yg(p[0], p[1],
            p[2], p[3], p[4], p[5], p[6]));
        this.N = n
    }
    this.I = null;
    if (r) {
        q = [];
        e = 0;
        for (f = r.length; e !== f; e++) n = r[e], q.push(new Zg(n[0], n[1], n[2], n[3]));
        this.I = q
    }
    this.va = t;
    this.Cb = (this.Ja = w && gh(this)) && v;
    this.hb = (this.pb = x) && A;
    this.Pa = z;
    this.zc = y;
    this.oc = I;
    this.J = !1;
    hh(this, !0);
    this.Gc = this.Pc = !1
}
fh.prototype = {
    setVolume: function(a) {
        this.volume = a;
        this.o.dispatch(60, this)
    }
};

function Wc(a) {
    var b = a.volume;
    if (a.Pc) b = 0;
    else if (!a.Gc) {
        a = a.K.O;
        for (var c = a.length; c--;)
            if (a[c].Gc) {
                b = 0;
                break
            }
    }
    return b
}

function ih(a) {
    var b = a.T,
        c = a.m,
        d = "";
    if ("64 59 55 50 45 40" === b) d = "Standard tuning";
    else if ("64 59 55 50 45 38" === b) d = "Drop D tuning";
    else if ("62 59 55 50 43 38" === b) d = "Open G tuning";
    else if ("63 58 54 49 44 39" === b) d = "Tune down 1/2 step";
    else if ("62 57 53 48 43 38" === b) d = "Tune down 1 step";
    else if ("60 55 51 46 41 36" === b) d = "Tune down 2 steps";
    else {
        b = c.length;
        for (a = a.K.U.length ? -1 === a.K.U[0].O[a.index].W ? 0 : 1 : 0; b--;) d += ch[a][c[b] % 12];
        d += " tuning"
    }
    return d
}

function jh(a) {
    return 6 === a.m.length && "64 59 55 50 45 40" !== a.T
}

function kh(a) {
    a.pb ? a.hb ? a.hb = !1 : lh(a.K) ? (a.hb = !1, a.pb = !1) : a.hb = !0 : (a.pb = !0, hh(a, !1), a.hb = !0, hh(a, !1));
    hh(a, !1)
}

function mh(a) {
    var b = !a.va;
    if (b || lh(a.K)) a.va = b, hh(a, !1)
}

function nh(a) {
    if (gh(a)) {
        if (a.Cb) {
            if (lh(a.K)) {
                a.Cb = !1;
                lh(a.K) && (a.Ja = !1, hh(a, !1));
                return
            }
            a.Cb = !1
        } else a.Ja ? a.Cb = !0 : (a.Cb = !1, a.Ja = !0);
        hh(a, !1)
    }
}

function rh(a) {
    var b = a.K.O[a.index + 1],
        c = a.o.g;
    return a.va && 1 === a.Xa && b && b.va ? 1.5 * c : 2 * c
}

function sh(a) {
    return 1.3 * (a.gb - 1) * a.o.g + .13 * a.o.g
}

function th(a) {
    var b = a.o.g;
    return 5 === a.g ? -1.5 * b : (4.13 * b - (a.g - 1 + .13) * a.o.g) / 2 - 2 * b
}

function uh(a, b, c) {
    var d = a.K.U,
        e = d.length;
    a = a.index;
    for (var f, g, h,
             k; e--;)
        if (f = d[e].O[a])
            for (f = f.V, g = f.length; g--;)
                for (h = f[g], k = h.length; k--;)
                    if (b && h[k].$a || c && h[k].L) return !0;
    return !1
}

function gh(a) {
    return null !== a.m && 0 !== a.m.length
}

function hh(a, b) {
    var c = a.o,
        d = a.K;
    a.J = a.va || a.Ja || a.pb || a.hb || a.Pa;
    for (var e = 0, f = c.K.O, g = f.length, h; g--;) {
        h = f[g];
        if (h.va || h.Ja || h.Pa || e && h.J) {
            e = 0;
            break
        }
        h.hb ? e = 2 : h.pb && (e = 1)
    }
    c.sa = e;
    if (2 === c.sa)
        for (e = d.O, f = e.length; f--;)
            if (e[f].hb) {
                e[f].hb = !1;
                hh(e[f], !1);
                return
            }
    b || (a.Xa && Ah(d), Bh(c, !0), c.dispatch(72, a))
}

function Pg(a) {
    return a.K.O[a.index + (1 === a.Xa ? 1 : -1)]
}

function Ch(a) {
    var b = a.K.U;
    return b.length && "P" === b[0].O[a.index].J.m
}

function Dh(a) {
    return 0 < a && 1 > a ? 1 : a | 0
}

function Eh(a, b, c, d) {
    this.J = a;
    this.m = b;
    this.I = c;
    this.g = d;
    this.L = !Fh(this.J) && 0 < this.m ? this.m === this.g ? 5 : this.g > this.m ? 6 : 7 : Fh(this.J) && (null === this.m && null === this.g || this.m == this.I && this.m == this.g) ? 4 : null !== this.I && this.m < this.I && this.I > this.g ? 3 : Fh(this.J) && this.m > this.g ? 2 : 1
}
Eh.prototype = {};

function Gh(a) {
    if (!Fh(a.J)) return !1;
    a = Hh(a.J);
    if (a.m) return !0;
    if (Fh(a))
        for (;;) {
            a = Hh(a);
            if (a.m) return !0;
            if (!Fh(a)) return !1
        } else return !1
}

function Ih(a, b) {
    var c = a.J.Z.K.o.g,
        d = Jh(a, !0, !0, !0),
        e = Jh(a, !1, !0, !0),
        f = 2 * c;
    d !== e && (b = 1 === b ? Kh(a) : 2 === b ? a.I : a.g, f += 1 * c * (b - d) / 25);
    return f
}

function Kh(a) {
    return null === a.m ? (a = Hh(a.J)) && a.m ? null !== a.m.g ? a.m.g : Kh(a.m) : 0 : a.m
}

function Jh(a, b, c, d) {
    var e = b ? Math.min : Math.max,
        f = a.L,
        g;
    1 !== f && 2 !== f && null !== a.I && 0 !== a.I ? g = a.I : 0 !== a.m ? g = a.m : null !== a.g && 0 !== a.g ? g = a.g : g = null;
    null !== g && (0 !== a.m && (g = e(a.m, g)), 0 !== a.g && (g = e(a.g, g)));
    d && Lh(a.J) && (d = Mh(a.J, 1, !1, !1, !1, !1, !1)) && d.m && (d = Jh(d.m, b, !1, !0), null !== d && (g = null === g ? d : e(d, g)));
    c && Fh(a.J) && (d = Hh(a.J)) && d.m && (d = Jh(d.m, b, !0, !1), null !== d && (g = null === g ? d : e(d, g)));
    return g
}

function Nh(a, b) {
    this.Z = a;
    this.I = b[0] ? b[0] / 50 : b[0];
    this.m = b[1] ? b[1] / 50 : b[1];
    this.g = b[2] ? b[2] / 50 : b[2];
    null === this.I && null === this.g && (this.I = this.g = Oh(this));
    var c = this.I,
        d = this.m,
        e = Oh(this);
    this.J = c === this.g ? null === d || d === c ? null === e || e !== c ? 10 : 4 : 9 : null === e ? 0 === c ? 8 : 11 : 8
}
Nh.prototype = {};

function Ph(a) {
    var b = a.Z.K.o.g;
    return a.I > a.g ? 1.5 * (a.I - a.g) * b / -6 : 1.5 * b / -2
}

function Oh(a) {
    return (a = Qh(a.Z, !0)) && a.ea ? a.ea.g : null
}

function Th(a, b) {
    this.Z = a;
    this.ra = "undefined" === typeof b.string ? null : b.string;
    this.Na = "undefined" === typeof b.fret ? null : b.fret;
    this.oa = this.ra;
    this.pa = this.Na;
    this.sa = b.sp || null;
    this.J = b.slideL || null;
    this.I = b.slideR || null;
    this.g = 0;
    1 === b.tiestart && (this.g |= 1);
    1 === b.tieend && (this.g |= 2);
    1 === b.hpstart && (this.g |= 4);
    1 === b.hpend && (this.g |= 8);
    1 === b.lefttap && (this.g |= 16);
    1 === b.leftpull && (this.g |= 32);
    1 === b.dead && (this.g |= 64);
    1 === b.ghost && (this.g |= 128);
    1 === b.tap && (this.g |= 256);
    1 === b.sm && (this.g |= 512);
    1 === b.os &&
    (this.g |= 1024);
    this.L = null;
    b.harm && (this.L = [b.harm[0], b.harm[1]]);
    this.aa = b.vibrato || 0;
    this.ia = b.pitch || null;
    this.m = b.bend ? new Eh(this, b.bend[0], b.bend[1], b.bend[2]) : null;
    this.Y = "undefined" === typeof b.lfinger ? null : b.lfinger;
    this.R = b.rfinger || null;
    this.W = b.head || null;
    this.Xb = this.vb = 0;
    b.tro ? (this.vb = 1, this.Xb = b.tro) : b.tr && (this.vb = b.tr);
    this.value = null;
    Uh(this);
    this.na = this.yb = null;
    Vh(this) || "undefined" === typeof b.a ? this.N = Wh(this) : this.na = this.N = b.a;
    this.da = this.N;
    this.T = this.la = null;
    this.qa = 0;
    this.ya =
        null;
    this.ea = 0
}
Th.prototype = {
    y: function(a) {
        var b = this.Z.K.o.g / 2 * (this.qa + 1);
        Og(this) && a && (a = Ng(this.Z.ja), a.track.va && (b += ci(a) - ci(this.Z.ja)));
        return b
    }
};

function di(a, b) {
    var c = a.Z,
        d = c.P,
        e = d.Ga.Ea,
        f = c.Ra / e;
    return Lh(a) || Fh(a) ? (c = ei(a), (c + Zd(d, f, b)) / (c + fi(a, !1))) : (b - f) / ((c.Ra + c.Mb) / e - f)
}

function ei(a) {
    var b = 0,
        c;
    if (Fh(a)) {
        c = a;
        for (var d; Fh(c);)
            if (d = Hh(c)) c = d;
            else break;
        (a = Hh(a)) && (b += gi(a.Z) + ei(a));
        c && hi(c.Z) && (b /= .25)
    }
    return b
}

function fi(a, b) {
    var c = gi(a.Z);
    if (Lh(a)) {
        var d = Mh(a, 1, !1, !1, !1, !1, b);
        d && (c += fi(d, b))
    }
    hi(a.Z) && (c *= .25);
    return c
}

function ii(a) {
    return 10 <= a.I ? ji(a, a.I / 10, !0) : ki(a, !0)
}

function ji(a, b, c) {
    if (a = c ? li(a.Z, !0) : Qh(a.Z, !0))
        for (a = a.X, c = a.length; c--;)
            if (a[c].ia === b) return a[c];
    return null
}

function ki(a, b) {
    var c = b ? li(a.Z, !0) : Qh(a.Z, !0),
        d = a.ra,
        e;
    if (c)
        for (e = c.X, c = e.length; c--;)
            if (e[c].ra === d) return e[c];
    return null
}

function mi(a) {
    for (; a;)
        if (Fh(a)) {
            if ((a = Hh(a)) && a.m) return a
        } else break;
    return null
}

function Hh(a) {
    var b = Qh(a.Z, !0);
    if (!b || !Fh(a)) return null;
    var b = b.X,
        c = a.ra,
        d, e;
    for (d = b.length; d--;)
        if (e = b[d], Lh(e) && (null === c && e.value === a.value || null !== e.ra && e.ra === c && e.Na === a.Na)) return e;
    return null
}

function Mh(a, b, c, d, e, f, g) {
    if (2 === b && !ni(a) || 1 === b && !Lh(a)) return null;
    for (var h = 2 === b, k = 1 === b, l = a.Z, m = l.K.U, n = l.track.index, p = l.P.$, q = c ? m[p].Sa : null,
             r = l.rc, t = !0, w = !1, v, x, A, z, y, I, R, V;
         (v = m[p]) && (!c || v.Sa === q);) {
        v = v.O[n].V;
        for (x = v.length; x--;)
            for (A = v[x], z = 0, y = A.length; z !== y; z++)
                if (I = A[z], !t || !zg(r, I.Ca))
                    if (!t || I.Ca === r && (x !== l.ha || z > l.fa))
                        for (w = !0, R = I.X.length; R--;) {
                            if (V = I.X[R], h && 0 !== (V.g & 8) && V.ra === a.ra || k && Fh(V) && V.value === a.value) return e && (V.m || ni(V) || V.I) || f && !V.aa || g && V.m && 4 !== V.m.L ? null : d &&
                            (h && ni(V) || k && Lh(V)) ? Mh(V, b, c, d, e, f, g) || V : V
                        } else if (zg(I.Ca, r)) break;
        if (!w && t) p++, t = !1, r = Ag;
        else break
    }
    return null
}

function oi(a) {
    a = a.qa;
    return -3 >= a ? !0 : 9 <= a ? !1 : null
}

function pi(a, b, c, d, e) {
    var f = a.Z,
        g = f.K.o.g,
        h = g / 2,
        k = a.ea,
        l = f.ga,
        m = l ? .9 : 1,
        n = 1.6 * g,
        p = n * m * .85,
        q = null !== a.R && qi(a),
        r = 0,
        t = 0;
    if (10 <= k) {
        !f.wa || ri(f) && (l || null === f.J || f !== Ig(f).ka[0]) ? (r = (si(f) - d) / 2, t = cg(f, !0, b, c) - h) : t = ti(ui(f, !0)) - 1.5 * g * m;
        q && e && (r += 1.1 * g);
        t > -h && (t = -h);
        if (f.m)
            for (b = f.m, c = b.length; c--;)
                if (a = b[c], 1 === Tf(a)) {
                    b = Qf(a, f);
                    t = Math.min(t, lg(b, Uf(a, f)) - h);
                    break
                }
        t -= p * (k / 10 - 1)
    } else if (-10 >= k) {
        f.wa || ri(f) ? (r = (si(f) - d) / 2, t = dg(f, !0, b, c) + h) : (r = h, t = ti(ui(f, !1)) + 1.5 * g * m);
        q && e && (r += 1.1 * g);
        t += .68 * n;
        t < 4.63 * g + .68 *
        n && (t = 4.63 * g + .68 * n);
        if (f.m)
            for (b = f.m, c = b.length; c--;)
                if (a = b[c], -1 === Tf(a)) {
                    b = Qf(a, f);
                    t = Math.max(t, lg(b, Uf(a, f)) + h + .68 * n);
                    break
                }
        t += p * (k / -10 - 1)
    } else if (1 === k || 2 === k || 4 === k || 3 === k) r -= d + h, q && !e && (r -= 1.3 * g), t = a.y(c) + n * (1 - .68), 2 === k ? t -= .4 * g : 4 === k ? t += .4 * g : 3 === k && (t -= .2 * g);
    else if (-1 === k || -2 === k || -4 === k || -3 === k) r += ag(a.Z) + h, q && e && (r += 1.1 * g), t = a.y(c) + n * (1 - .68), -2 === k ? t -= .4 * g : -4 === k ? t += .4 * g : -3 === k && (t -= .2 * g);
    return new vi(r, t)
}

function Fg(a, b, c) {
    var d = a.Z.wa;
    return a.y(b) + (d ? -1 : 1) * wi(a.Z, d, !1, c)
}

function xi(a) {
    var b = a.Z.K.o.I.width(yi[zi(a)]);
    a.Z.ga ? b *= .65 : Ai(a) && (b *= .8);
    return b
}

function zi(a) {
    var b = a.Z.ba;
    if (a.W) return a.W;
    if (Vh(a)) return b && !b.I ? 17 : b && 2 === b.N.g ? 16 : 4;
    if (a.Z.ga) return 3;
    b = b.m;
    a.L && (b = 1 === b ? 7 : 2 === b ? 6 : 5);
    return b
}

function Di(a, b) {
    var c = a.Z,
        d;
    if (1 < c.ja.V.length) d = 0 === c.Hb;
    else if (d = c.wa, 1 === c.X.length) c = null !== b && d !== b.Z.wa, d = !(c || d && !c);
    else {
        for (var c = c.X, e = c.length, f = 1, g = !0, h = e,
                 k = a.qa; h--;) c[h].qa < k ? (f++, g = !1) : c[h].qa > k && (g = !1);
        d = g ? 0 === Ei(a) : 1 === (e & 1) ? f === (e + 1) / 2 ? !d : f <= e / 2 : f <= e / 2
    }
    return d
}

function Fi(a, b) {
    return Gi[zi(a)][b ? 1 : 3] * a.Z.K.o.g * (a.Z.ga ? .65 : 1)
}

function ti(a) {
    return a.y(!0) + a.Z.K.o.g / 2 * (a.Z.wa ? -1 : 1)
}

function Hi(a) {
    return a.y(!0) + a.Z.K.o.g / 2 * (a.Z.wa ? 1 : -1)
}

function Ii(a) {
    return 1 === a.yb ? -xi(a) : 2 === a.yb ? xi(a) : 0
}

function Ji(a, b) {
    if (Og(a) === Og(b)) return a.qa < b.qa;
    var c = a.Z.track.Xa;
    return 0 !== (a.g & 1024) && 2 === c || 0 !== (b.g & 1024) && 1 === c
}

function qi(a) {
    return null !== a.Y && !a.Z.K.o.ea
}

function Og(a) {
    return 0 !== (a.g & 1024) && Ng(a.Z.ja).Ka
}

function Ei(a) {
    return Qi(a.Z.X, a)
}

function Ri(a) {
    a = a.value + a.Z.K.o.ea;
    return 7 * ((a / 12 | 0) - 2) + Si[(a + 60) % 12] + 2
}

function Ti(a) {
    return a.sa ? a.sa : 13 === a.W || 12 === a.W || 15 === a.W ? null : 1E3 <= a.Z.track.qb ? a.Z.track.qb - 1E3 : Vh(a) ? 109 : a.value + a.Z.track.Jb + a.Z.K.o.ea
}

function Ui(a) {
    var b = a.Z;
    if (Fh(a) && !a.m) {
        var c = Hh(a);
        if (c) return Ui(c)
    }
    c = a.value;
    b.I && (c += Vi[a.Z.I]);
    return c - b.track.R - Wi[a.N]
}

function Xi(a, b, c) {
    var d = String(a.Na),
        e = a.L;
    !c && e && (1 === e[0] ? d = "<" + d + ">" : (2 === e[0] && 12 != e[1] || 4 === e[0]) && null !== e[1] && (d += " (" + (a.Na + parseInt(e[1], 10)) + ")"));
    Vh(a) && (d = "X");
    if (b || Yi(a)) d = "(" + d + ")";
    return d
}

function Zi(a, b, c) {
    var d = a.Z,
        e = d.P.O[$i(a).index],
        f = e.m ? aj(e, d.Ca) : e.J,
        g = a.N,
        h = 1 === e.W ? 2 : 3,
        k = Ui(a),
        l = d.K.o.ea - d.track.xb,
        m = -d.track.R,
        n = l - m,
        p = null,
        q = bj[(k + 60) % 12],
        r,
        k = k + 12 * ((l - m) / 12 | 0);
    if (-1 === Qi(cj, k)) return a.N = Wh(a), Zi(a, b, c);
    if (!Vh(a) && "P" !== f.m && 13 !== a.W && 12 !== a.W && 15 !== a.W) {
        if (0 != n % 12) {
            for (var m = e.N, q = k, k = e.T, l = dj[m][1],
                     l = -1 !== Qi(dj[m][0], (q + 60) % 12) ? Wi[g] - Wi[l] : Wi[g],
                     m = (dj[k][3] + (7 + bj[(q + 60) % 12] - dj[m][3]) % 7) % 7, t = q,
                     w = 0 < n; bj[(q + 60) % 12] !== m;) w ? q++ : q--;
            q === t && 6 < Math.abs(n) && (q += 12 * (w ? 1 : -1)); -
                1 !==
            Qi(dj[k][0], (q + 60) % 12) ? g = Wi[dj[k][1]] + l : g = l;
            g = ej[g];
            n = [q, g, m];
            k = n[0];
            g = n[1];
            q = n[2]
        }
        if (!Fh(a) || c && 0 === d.fa) b[k] ? r = b[k] : r = fj(e.da, (k + 60) % 12) ? h : 1, r !== g && (p = g, b[k] = p)
    }
    a.qa = Qi(cj, k) - 25 - f.I;
    a.la = p;
    a.da = g;
    a.ya = q
}

function $i(a) {
    return Og(a) ? Pg(a.Z.track) : a.Z.track
}

function Wh(a) {
    return gj((a.value - a.Z.track.R + 60) % 12) ? 1 === a.Z.ja.W ? 2 : 3 : 1
}

function Uh(a) {
    if (null !== a.ia) a.value = a.ia;
    else if (a.value = a.Z.track.m[a.ra] + a.Na, a.L)
        if (1 === a.L[0]) {
            var b = hj[a.L[1]];
            b && (a.value += b)
        } else a.L[1] && (a.value += parseInt(a.L[1], 10))
}

function Ai(a) {
    return 0 !== (a.g & 512)
}

function Yi(a) {
    return 0 !== (a.g & 128)
}

function Vh(a) {
    return 0 !== (a.g & 64)
}

function ij(a) {
    return 0 !== (a.g & 32)
}

function jj(a) {
    return 0 !== (a.g & 16)
}

function ni(a) {
    return 0 !== (a.g & 4)
}

function Fh(a) {
    return 0 !== (a.g & 2)
}

function Lh(a) {
    return 0 !== (a.g & 1)
}

function kj(a, b, c, d, e, f) {
    var g = [];
    this.K = a;
    this.ja = b;
    this.ha = c;
    this.fa = d;
    this.P = b.P;
    this.track = b.track;
    this.m = this.bb = null;
    if (f.slur)
        if (d = f.slur, "object" == typeof d)
            for (b = 0, c = d.length; b !== c; b++) lj(a, d[b], this, !1);
        else lj(a, d, this, !1);
    this.T = f.pick || null;
    this.Ca = Ag;
    this.rb = 0;
    this.Ra = null;
    this.R = 0;
    this.ga = f.grace || null;
    this.Eb = f.text || null;
    this.Db = f.text2 || null;
    this.Mb = this.Ya = this.Bb = this.ba = null;
    mj(this, e);
    this.rc = this.Ca.add(this.Ya);
    this.pause = f.pause || null;
    this.$a = f.chord || null;
    nj(this) || (this.$a =
        null);
    this.N = f.arpeggio || null;
    this.oa = f.brush || null;
    this.ia = f.tremolo || 0;
    this.Tc = f.trembar || null;
    this.I = f.oct || 0;
    this.da = f.dyn || null;
    this.ub = f.barre || null;
    this.pa = f.fading || null;
    this.Y = f.pop ? 2 : f.slap ? 3 : null;
    this.ea = f.wb ? new Nh(this, f.wb) : null;
    this.L = f.ly || null;
    this.g = 0;
    1 === f.ca && (this.g |= 1);
    1 === f.pl && (this.g |= 2);
    1 === f.ci && (this.g |= 4);
    1 === f.lr && (this.g |= 8);
    1 === f.pm && (this.g |= 16);
    1 === f.acc && (this.g |= 64);
    1 === f.hacc && (this.g |= 128);
    1 === f.hide && (this.g |= 256);
    1 === f.stac && (this.g |= 512);
    1 === f.sc && (this.g |=
        1024);
    1 === f.ten && (this.g |= 2048);
    this.la = this.width = this.x = 0;
    if (f.notes)
        for (b = 0, c = f.notes.length; b < c; b++) g.push(new Th(this, f.notes[b]));
    this.X = g;
    this.ta = !1;
    oj(this);
    1 !== f.b || this.ba && !this.ta && !this.ba.Ec || (this.g |= 32);
    this.aa = this.sa = 0;
    this.W = "undefined" === typeof f.s ? null : f.s;
    this.wa = !1;
    this.na = this.Hb = this.gd = this.fd = 0;
    this.kb = this.J = null
}
kj.prototype = {};

function pj(a, b, c, d) {
    if (3 === b && !a.I || 4 === b && !qj(a) || 5 === b && !rj(a)) return a;
    for (var e = a.K.U, f = a.track.index, g = a.P.$, h = e[g].Sa, k = a, l = !1, m, n, p,
             q;
         (m = e[g]) && (!c || m.Sa === h);) {
        m = m.O[f];
        if (m = m.V[a.ha])
            for (p = 0, q = m.length; p < q && (n = m[p], g === a.P.$ && n.fa <= a.fa || (3 === b ? n.I === a.I ? k = n : l = !0 : 4 === b ? qj(n) ? k = n : l = !0 : 5 === b ? rj(n) ? k = n : l = !0 : 7 === b && (n.L && n.L[d] || n.ta || g !== a.P.$ ? l = !0 : k = n), !l)); p++);
        if (l) break;
        g++
    }
    return k
}

function sj(a) {
    for (var b = 0, c = a.X.length, d, e; c--;) {
        d = a.X[c];
        e = null;
        if (d.m) e = d.m;
        else
            for (; d && Fh(d);)
                if ((d = Hh(d)) && d.m) {
                    e = d.m;
                    break
                }
        e && (d = e, d = null === d.m && null === d.g || d.m >= d.I && d.m >= d.g ? Ih(d, 1) : d.I >= d.m && d.I >= d.g ? Ih(d, 2) : Ih(d, 3), d > b && (b = d))
    }
    return b ? b + 2 * a.K.o.g : b
}

function tj(a, b) {
    var c = a.K.o.I.width(uj(a, b));
    a.ga && (c *= .65);
    return c
}

function uj(a, b) {
    var c = ri(a);
    if (!c) return null;
    --c;
    b || (c += 6);
    return vj[c]
}

function ri(a) {
    return a.ga ? Math.min(2, wj(a)) : a.ba.R
}

function xj(a) {
    if (!a.L) return 0;
    for (var b = 0, c = a.L, d = c.length,
             e; d--;)
        if (e = yj(c[d])) e = zj.width(1.7 * a.K.o.g, 3, e), e > b && (b = e);
    return b
}

function Aj(a) {
    var b = 0,
        c = a.ba ? a.ba.ab : 0;
    if (c) var d = a.K.o,
        e = .45 * d.g,
        b = b + (e + c * d.I.width(57831) + 2 * (c - 1) * e);
    return b + si(a)
}

function si(a) {
    if (a.ga && a.ta) return 0;
    var b = a.K.o.I.width(a.ta ? Bj(a) : yi[a.ga ? 3 : a.ba.m]);
    a.ga && (b *= .65);
    return b
}

function Bj(a) {
    var b;
    b = a.ja;
    var c = b.K.o,
        d = c.selection;
    c.N && d && d.N(b) ? b = !1 : (c = b.P, d = 0 === b.V.length, b = c.R && d && Cj[Dj(c.Ga)] ? !1 : d || 1 === b.V.length && 1 === b.V[0].length && b.V[0][0].ta && Ej(b.V[0][0].Ya, Fj));
    return b ? 58595 : a.ba.T
}

function Gj(a, b) {
    var c = .3;
    1 === (b.qa & 1) && (b.Z.wa && 7 > b.qa || !b.Z.wa && -1 < b.qa) && (c += .5);
    return c * a.K.o.g
}

function Hj(a, b, c, d) {
    var e = a.K.o.g,
        f = 0;
    if (hi(a) || Ij(a)) f += Gj(a, b) + .5 * e, d && c + f < 4.13 * e ? f = 4.13 * e - c : !d && 0 < c - f && (f = c);
    if (Jj(a) || Kj(a) || Lj(a)) f += 1.3 * e;
    Mj(a) && (f += 1.5 * e);
    Nj(a) && (f += 1.5 * e);
    return f
}

function dg(a, b, c, d) {
    var e = (4.13 - .065) * a.K.o.g,
        f = c ? null : a.track;
    if (a.ta) 23 !== a.bb && (e = a.K.o.g * (a.bb + a.ba.Qc));
    else {
        var g = null;
        a.ba && !a.ba.I ? (g = Gg(a, !0, c, f)) && (e = g.y(d) + a.K.o.g / 2) : a.wa ? (g = Gg(a, !0, c, f)) && (e = g.y(d) + a.K.o.g / 2) : e = b && null !== a.kb ? Hg(Oj(a), a.K.o) : Pj(a, d, c, f);
        b && Qj(a) && (g || (g = Gg(a, !0, c, f)), g && (e += Hj(a, g, e, !0)))
    }
    return e
}

function cg(a, b, c, d) {
    var e = 0,
        f = c ? null : a.track;
    if (a.ta) 23 !== a.bb && (e = a.K.o.g * (a.bb - a.ba.Rc));
    else {
        var g = null;
        a.ba && !a.ba.I ? (g = Gg(a, !1, c, f)) && (e = g.y(d) - a.K.o.g / 2) : a.wa ? e = b && null !== a.kb ? Hg(Oj(a), a.K.o) : Pj(a, d, c, f) : (g = Gg(a, !1, c, f)) && (e = g.y(d) - a.K.o.g / 2);
        b && !Qj(a) && (g || (g = Gg(a, !1, c, f)), g && (e -= Hj(a, g, e, !1)))
    }
    return e
}

function Pj(a, b, c, d) {
    return (a = Gg(a, a.wa, c, d)) ? Fg(a, b, d) : 0
}

function wi(a, b, c, d) {
    if (1 === a.Bb) return 0;
    var e = a.K.o.g,
        f = a.X.length,
        g = a.na,
        h = 0;
    if (1 < f) {
        for (var h = f, k = null, l = null; h--;)
            if (f = a.X[h], !d || $i(f) === d) {
                if (null === k || Ji(f, k)) k = f;
                if (null === l || Ji(l, f)) l = f
            }
        if (!k) return 0;
        h = k.y(!0);
        h = l.y(!0) - h;
        g += h;
        c && (g = b ? g - Fi(l, !0) : g + Fi(k, !1));
        f = b ? k : l
    } else {
        f = a.X[0];
        if (d && $i(f) !== d) return 0;
        c && (g -= Fi(f, b) * (b ? 1 : -1))
    }
    c = f.qa;
    !b && -5 >= c ? g += 2 * e - f.y(!0) : b && 11 <= c ? g += f.y(!0) - 2 * e : (b = a.ga ? 2.275 : a.ba.R && null === a.J ? 3.5 : b ? .25 * c + 2.5 : -.25 * c + 4, 3.5 < b ? b = 3.5 : 2.5 > b && (b = 2.5), g += b * e);
    if (2 === a.ia ||
        3 === a.ia) a = 2 === a.ia ? 3 * e : 3.5 * e, g - h < a && (g = h + a);
    return g
}

function Rj(a, b) {
    for (var c = null, d = a.X.length, e = b ? -1 : 1; d--;)
        if (null === c || a.X[d].ra * e > c * e) c = a.X[d].ra;
    return c
}

function ui(a, b) {
    if (a.ta) return null;
    for (var c = a.X.length, d = a.X[c - 1], e = d.qa, c = c - 1,
             f; c--;)
        if (f = a.X[c], !b && f.qa > e || b && f.qa < e) d = f, e = f.qa;
    return d
}

function Gg(a, b, c, d) {
    if (a.ta) return null;
    var e = null;
    a = a.X;
    for (var f = a.length,
             g; f--;) g = a[f], !c && Og(g) || null !== d && $i(g) !== d || !(null === e || b && Ji(e, g) || !b && Ji(g, e)) || (e = g);
    return e
}

function Qj(a) {
    return 1 === a.ja.V.length ? a.wa && "P" !== a.ja.J.m : 0 !== a.Hb
}

function Sj(a, b) {
    for (var c = a.X.length, d = a.K.o.g, e = d / 2, f = .3 * d, g = a.wa, h = b.wa, k = g != h,
             l = zg(a.Ya, b.Ya) ? b : a, m = l === a ? b : a, n, p, q, r,
             t; c--;)
        for (p = a.X[c], t = Og(p), n = b.X.length; n--;)
            if (q = b.X[n], t === Og(q))
                if (r = Math.abs(p.qa - q.qa), 1 < r)
                    if (p.qa < q.qa && (!k || !g)) {
                        if (!g && !h && Fg(p, !0, null) + e > Hi(q) || !g && h && Fg(p, !0, null) + d > ti(q) || g && h && Hi(p) + e > Fg(q, !0, null) || 1 === a.ba.m && h && p.y(!0) + d > Fg(q, !0, null)) {
                            b.R = .75 * si(a);
                            return
                        }
                    } else {
                        if (p.qa > q.qa && (!k || g) && (g && h && Fg(p, !0, null) - e < Hi(q) || !g && !h && Hi(p) - e < Fg(q, !0, null) || g && !h && ti(p) - d <
                            Fg(q, !0, null))) {
                            a.R = .75 * si(b);
                            return
                        }
                    }
                else {
                    if (a.ba.ab !== b.ba.ab) {
                        a.ba.ab ? a.R = si(b) + f : b.R = si(a) + f;
                        return
                    }
                    if (0 === r) {
                        if (a.ba.m !== b.ba.m) {
                            l.R = si(m) + f;
                            return
                        }
                    } else {
                        a.Ya === b.Ya ? p.qa < q.qa ? b.R = si(a) + f : a.R = si(b) + f : l.R = si(m) + f;
                        return
                    }
                }
}

function wj(a) {
    for (var b = 0, c = a.fa; c-- && a.ja.V[a.ha][c].ga;) b++;
    if (a.ga)
        for (c = a.fa; a.ja.V[a.ha][c] && a.ja.V[a.ha][c].ga; c++) b++;
    return b
}

function Tj(a, b) {
    for (var c = a.X.length, d; c--;)
        if (d = a.X[c], d.L && 1 !== d.L[0] && (!b || !Fh(d))) return d.L;
    return null
}

function Uj(a) {
    for (var b = a.X.length, c; b--;)
        if (c = a.X[b], 1 === c.J || 2 === c.J) return !0;
    return !1
}

function Vj(a) {
    return $f(a) + Wj(a) - 1.2 * a.aa * a.K.o.g * (a.ga ? .65 : 1)
}

function ag(a) {
    var b = si(a),
        c = b;
    0 !== (a.g & 8192) && a.wa && (c += b);
    return c
}

function Wj(a) {
    return 0 === (a.g & 8192) || a.wa ? 0 : -si(a)
}

function dk(a) {
    return ek(a.K.o) + a.P.x + a.x + si(a) / 2
}

function bg(a) {
    return ek(a.K.o) + a.P.x + a.x + (Wj(a) + ag(a)) / 2
}

function $f(a) {
    return ek(a.K.o) + a.P.x + a.x
}

function Qg(a) {
    return a.x + fk(a) + a.R
}

function fk(a) {
    var b = a.wa ? (Gi[a.ga ? 3 : a.ba.m][0] - .16) * a.K.o.g : 0;
    a.ga && (b *= .65);
    return b
}

function gk(a) {
    return null !== a.kb
}

function Oj(a) {
    return a.ja.Y[a.kb]
}

function Ig(a) {
    return a.ja.R[a.J]
}

function hk(a) {
    var b;
    if (a.ga) b = !0;
    else {
        if (-1 === a.W) return !1;
        if (a.ba.I) {
            b = !0;
            for (var c = a.X.length; c--;)
                if (12 === a.X[c].W) {
                    b = !1;
                    break
                }
        } else b = !1
    }
    return b
}

function ik(a) {
    a = a.X;
    for (var b = a.length; b--;)
        if (Lh(a[b])) return a[b];
    return null
}

function Wg(a, b) {
    for (var c = a.X, d = c.length; d--;)
        if ($i(c[d]) === b) return !0;
    return !1
}

function hg(a) {
    for (var b = a.X.length; b--;)
        if (Og(a.X[b])) return !0;
    return !1
}

function jk(a) {
    return 0 === a.fa && 1 === a.ja.V[a.ha].length
}

function Zf(a) {
    return 0 === a.fa && kk(a.P)
}

function lk(a) {
    if (null !== a.track.I)
        for (var b = a.track.I, c = b.length,
                 d; c--;)
            if (d = b[c], d.Ba === a.P.$ && d.Ya === a.Ca) return d.g;
    return null
}

function mk(a) {
    var b = a.track.N,
        c = a.P.$,
        d = a.Ca;
    a = a.rc;
    var e, f;
    if (b)
        for (e = b.length; e--;)
            if (f = b[e], !(f.m > c || c > f.g || f.m === c && Ej(f.J, a) || f.g === c && Ej(d, f.I))) return f;
    return null
}

function nk(a) {
    var b = Qh(a, !0);
    return null === b || b.I !== a.I || Zf(a)
}

function li(a, b) {
    var c = a.ja.V[a.ha];
    return a.fa === c.length - 1 ? b && (c = a.K.U[a.P.$ + 1]) && (c = c.O[a.track.index]) && a.ha < c.V.length && c.V[a.ha].length ? c.V[a.ha][0] : null : c[a.fa + 1]
}

function Qh(a, b) {
    if (0 === a.fa) {
        if (0 === a.P.$ || !b) return null;
        var c = a.K.U[a.P.$ - 1].O[a.track.index];
        if (a.ha >= c.V.length) return null;
        c = c.V[a.ha];
        return c[c.length - 1]
    }
    return a.ja.V[a.ha][a.fa - 1]
}

function ok(a) {
    return a.track.pb && (a.$a || 1 === a.K.o.sa && !a.$a && 0 === a.fa && null !== pk(a))
}

function pk(a) {
    for (; a && !a.$a;) a = Qh(a, !0);
    return a ? nj(a) : null
}

function nj(a) {
    return a.track.L[a.$a]
}

function qk(a) {
    var b = a.K.o,
        c = b.selection;
    return b.N && null !== c && !c.J() && !rk(b.m) && c.R(a.ja, a.ha)
}

function gi(a) {
    var b = a.P;
    return Zd(b, a.Ra / b.N, (a.Ra + a.Mb) / b.N)
}

function mj(a, b) {
    a.ga ? (a.ba = null, a.Bb = 0, a.Ya = Ag) : (a.ba = a.K.g[b], a.Bb = a.ba.duration, a.Ya = a.ba.N);
    a.Mb = a.Bb
}

function oj(a) {
    a.X.sort(sk);
    a.ta = 0 === a.X.length
}

function tk(a) {
    return 0 !== (a.g & 16384)
}

function Ij(a) {
    return 0 !== (a.g & 2048)
}

function Lj(a) {
    return 0 !== (a.g & 1024)
}

function hi(a) {
    return 0 !== (a.g & 512)
}

function Kj(a) {
    return 0 !== (a.g & 128)
}

function Jj(a) {
    return 0 !== (a.g & 64)
}

function uk(a) {
    return 0 !== (a.g & 32)
}

function rj(a) {
    return 0 !== (a.g & 16)
}

function qj(a) {
    return 0 !== (a.g & 8)
}

function Mj(a) {
    return 0 !== (a.g & 4)
}

function Nj(a) {
    return 0 !== (a.g & 2)
}

function vk(a) {
    return 0 !== (a.g & 1)
}

function wk(a, b, c, d, e, f, g, h, k, l, m) {
    this.K = a;
    this.P = b;
    this.track = c;
    this.N = null !== d ? d : e;
    this.aa = null !== d ? xk[(dj[d][2] + (c.xb + 60) % 12 + 60) % 12][0 < d ? 0 : 1] : e;
    this.W = this.da = this.T = null;
    yk(this);
    this.J = Lf(f, c.g);
    this.ia = c.Da ? Lf("T", c.gb) : null;
    this.m = null;
    if (g)
        for (b = g.length; b--;) zk(this, g[b][0], g[b][1], g[b][2]);
    this.g = m;
    this.L = h;
    this.V = [];
    g = 0;
    for (m = k.length; g < m; g++)
        for (c = [], this.V.push(c), b = k[g].length, h = 0; h !== b; h++) c.push(new kj(a, this, g, h, k[g][h].rhythm, k[g][h]));
    this.R = [];
    this.I = null;
    "undefined" !== typeof l &&
    null !== l && (this.I = l);
    this.Y = [];
    this.Ka = !0
}
wk.prototype = {};

function Ak(a, b, c, d, e, f, g, h, k) {
    f = Math.abs(f - e) + 1;
    d /= f;
    var l;
    for (l = 0; l !== f; l++) a.Rb(e + l * g, b.qb, c + l * d, d + (l === f - 1 ? h : 0), k, b.index, !1)
}

function Bk(a, b, c, d, e, f, g, h, k) {
    var l = g > f ? 1 : -1,
        m = d ? 0 : h / 2;
    k -= m;
    h = Math.min(.15, h / 3);
    1 < Math.abs(g - f) ? (m -= d ? 0 : h / 2, Ak(a, b, (e + m) / c, h / c, f + l, g, l, k - (d ? h : h / 2), .3)) : a.Rb(g, b.qb, (e + m) / c, k / c, .3, b.index, !0);
    return m
}

function Od(a, b, c, d, e, f) {
    if (a.L) return Od(Ck(a), b, c, d, e, f);
    for (var g = a.V.length, h = a.track, k = 1E3 <= h.qb ? 1E3 : h.qb, l, m, n, p, q, r, t, w, v, x, A, z, y, I, R, V,
             ba; g--;)
        for (l = a.V[g], m = d, n = 0, p = l.length; n < p; n++) {
            q = l[n];
            r = gi(q);
            t = !1;
            w = 0;
            if (e) {
                if (q.Ra + q.Mb <= f) continue;
                q.Ra <= f && (w = r * (f - q.Ra) / q.Mb, r -= w, t = !0)
            }
            x = 0;
            for (A = q.X.length; x < A; x++)
                if (z = q.X[x], y = Ti(z), null !== y) {
                    R = fi(z, !0) - w;
                    v = 0;
                    if (Fh(z))
                        if (t) v = ei(z);
                        else if (!z.m) continue;
                    if (0 !== (z.g & 8) || z.J) v += .2;
                    V = !ni(z);
                    z.I && (V = !1, 3 === z.I || 4 === z.I || 10 <= z.I ? (ba = ii(z), null !== ba && (I =
                        Ti(ba), ba = I > y ? 1 : -1, 1 < Math.abs(I - y) && (Ak(b, h, (m + .85 * R) / c, R * (1 - .85) / c, y + ba, I - ba, ba, 0, .2), R *= .85))) : (ba = 1 === z.I ? 1 : -1, Ak(b, h, (m + .85 * R) / c, R * (1 - .85) / c, y + 2 * ba, y + ba, ba, 0, .2), R *= .85));
                    rj(q) && (R *= .125, v += .4);
                    if (!(3.36 <= w + v)) {
                        if (z.m) {
                            if (4 === z.m.L) continue;
                            V = Gh(z.m);
                            y = z.m;
                            ba = 3 === y.L ? Ti(y.J) + Dh(y.I / 50) : null;
                            y = z.m;
                            I = Kh(y);
                            y = Dh(null !== I ? I / 50 : 0) + Ti(y.J);
                            I = z.m;
                            var ea = null === I.g ? Kh(I) : I.g;
                            I = Ti(I.J) + Dh(null !== ea ? ea / 50 : 0);
                            null !== ba ? (Bk(b, h, c, !0, m + R / 2, ba, I, R / 2, R / 2), R = Bk(b, h, c, V, m, y, ba, R / 2, R / 2)) : y !== I && (R = Bk(b, h, c, V, m,
                                    y, I, r, R));
                            if (V) continue;
                            V = !1
                        }
                        b.Rb(y, k, m / c, R / c, w + v, h.index, V);
                        if (1 === z.J || 2 === z.J) ba = 1 === z.J ? 1 : -1, Ak(b, h, (m - .1) / c, .1 / c, y - 2 * ba, y - ba, ba, 0, .2)
                    }
                }
            m += r
        }
}

function Dk(a) {
    var b = Ek(a.P),
        c = a.track.index;
    return b ? Fk(a) + b.la[c] + b.pa[c] + b.na[c] + b.aa[c] + b.L[c] : 0
}

function Fk(a) {
    var b = a.K.o.g,
        c = Ek(a.P),
        d = a.track,
        e = d.index;
    if (!c) return 0;
    a = ci(a);
    d.va && (a += 4.13 * b + c.J[e] + c.ia[e] + c.Y[e] + c.da[e] + c.ea[e]);
    d.Pa && (a += c.T[e]);
    d.Ja && (d.va || d.Pa) && (a += 1.2 * b);
    return a
}

function ci(a) {
    var b = Ek(a.P),
        c = a.track.index,
        d = 0;
    b && (d = b.y + b.Aa + b.ya + b.sa + b.oa + Gk(b, c) + b.W[c] + b.m[c], a.track.va && (d += b.N[c] + b.I[c] + b.R[c] + b.g[c]));
    return d
}

function Hk(a, b, c) {
    for (var d = a.V.length, e = c ? 0 : 4.13 * a.K.o.g, f, g,
             h; d--;)
        for (f = a.V[d], g = f.length; g--;)
            if (h = f[g], h.Ca === b) c ? (h = cg(h, !0, !0, !0), h < e && (e = h)) : (h = dg(h, !0, !0, !0), h > e && (e = h));
            else if (h.Ca < b) break;
    return e
}

function Ik(a) {
    var b = a.g;
    return 0 === b ? -1 : a.P.$ + (0 > b ? b : 0)
}

function Jk(a) {
    var b = a.g;
    return 0 <= b ? b : a.K.U[a.P.$ + b].O[a.track.index].g
}

function Kk(a) {
    return 0 === a.P.$ && (!!a.track.Jb || jh(a.track))
}

function Lk(a) {
    if (0 === a.T) return 0;
    var b = dj[a.T];
    return a.K.o.I.width(2 === b[1] ? 57954 : 57952) * b[0].length
}

function Mk(a) {
    if (Nk(a.P)) return !1;
    var b = Ok(a).J;
    return a.m ? aj(a, a.P.Ga) !== b : a.J !== b
}

function aj(a, b) {
    if (!a.m) return a.J;
    for (var c = a.m, d = c.length; d--;)
        if (Ej(b, c[d].g)) return c[d].m;
    return a.J
}

function zk(a, b, c, d) {
    null === a.m && (a.m = []);
    a = a.m;
    a.push(new Mf(b, c, d));
    a.sort(Pk)
}

function Qk(a, b, c, d) {
    var e = null;
    b = a.V[b];
    for (var f = b.length, g; f--;)
        if (g = b[f], !g.ga && g.Ca === c && !g.ta) {
            d ? g.wa ? (e = cg(g, !1, !1, !0), e = Math.round(2 * e / a.K.o.g) - 1) : (a = Gg(g, g.wa, !1, null)) && (e = a.qa + 1) : g.wa ? (a = Gg(g, g.wa, !1, null)) && (e = a.qa + 1) : (e = dg(g, !1, !1, !0), e = Math.round(2 * e / a.K.o.g) - 1);
            break
        }
    return e
}

function Rk(a) {
    a.R.length = 0;
    var b = a.R;
    a = a.V;
    var c, d, e, f = 0,
        g = 0,
        h, k, l;
    for (h = a.length; h--;)
        for (c = a[h], d = null, k = 0, l = c.length; k !== l; k++)
            if (e = c[k], e.J = null, e.na = 0, e.ga) g++;
            else if (uk(e)) null === d ? e.ta || (d = [e]) : d.push(e);
            else if (null !== d && d.length) {
                for (d.push(e); d[d.length - 1].ta;) d.splice(d.length - 1, 1);
                d.length && (b.push(new Mg(d, f)), f++);
                d = null
            }
    if (1 < g)
        for (h = a.length; h--;)
            for (c = a[h], d = null, k = 0, l = c.length; k !== l; k++) e = c[k], e.ga ? null === e.J && (null === d ? d = [e] : d.push(e)) : (null !== d && 1 !== d.length && (b.push(new Mg(d,
                f)), f++), d = null)
}

function Sk(a, b) {
    if (a.L) return Sk(Ck(a), b);
    for (var c = a.V, d = c.length, e, f,
             g; d--;)
        for (e = c[d], g = e.length; g--;)
            if (f = e[g], !f.ta || f.$a || b && (f.Eb || f.Db)) return !0;
    return !1
}

function Tk(a) {
    if (a.L) return Tk(Ck(a));
    a = a.V;
    for (var b = a.length, c = 0, d, e, f, g, h; b--;) {
        d = a[b];
        f = h = 0;
        for (g = d.length; f !== g; f++) {
            e = d[f];
            e.Ra = parseFloat(h.toPrecision(12));
            var k = e,
                l = wj(k),
                m = k.Bb;
            if (k.ga) m = .02 / l;
            else if (jk(k)) m = k.P.Ga.Ea;
            else if (k.P.tb) {
                var n = k.P.tb,
                    p = Uk[n],
                    q = li(k, !0),
                    r = k.P.Ga,
                    t = k.P.R,
                    w = t ? Vk(r, k.Ca) : k.Ca,
                    r = t ? Vk(r, k.rc) : k.rc,
                    v;
                "t8" === n || "d8" === n || "s8" === n ? (n = Wk, v = Xk, t = Yk) : (n = Xk, v = Zk, t = Wk);
                zg(k.Ya, v) && $k(w.add(n), t) && (m -= p);
                q && zg(q.Ya, v) && $k(r.add(n), t) && (m += p)
            }!k.ga && l && (m -= .02);
            k.Mb = m;
            h +=
                e.Mb
        }
        h > c && (c = h)
    }
    return c
}

function al(a) {
    if (a.L) return al(Ck(a));
    if (!a.V.length || 1 === a.V.length && 1 === a.V[0].length && a.V[0][0].ta && 1 === a.V[0][0].Bb) return a.P.R ? Ag : bl(a.P);
    for (var b = Ag, c = a.V.length, d, e, f, g, h; c--;) {
        d = a.V[c];
        e = Ag;
        f = 0;
        for (g = d.length; f !== g; f++) h = d[f], h.fa = f, h.Ca = e, h.rb = parseFloat(e.Ea.toPrecision(12)), e = e.add(h.Ya), h.rc = e;
        zg(e, b) && (b = e)
    }
    return b
}

function cl(a, b) {
    for (var c = a.V, d = c.length; d--;)
        if (c[d].length && c[d][0].Hb === b) return d;
    return 0
}

function dl(a, b) {
    for (var c = a.V[b], d = c.length, e = Ag; d--;) e = e.add(c[d].Ya);
    return e
}

function Ng(a) {
    return a.P.O[a.track.index + (1 === a.track.Xa ? 1 : -1)]
}

function Ck(a) {
    var b = a.L;
    return 1 === b ? el(a) : 2 === b || 3 === b ? el(el(a)) : el(el(el(el(a))))
}

function Ok(a) {
    return a.P.$ === a.K.U.length - 1 ? null : fl(a.P).O[a.track.index]
}

function el(a) {
    return 0 === a.P.$ ? null : gl(a.P).O[a.track.index]
}

function yk(a) {
    var b;
    b = a.K.o.ea;
    var c = a.aa,
        d = xk[(dj[c][2] + (b - (a.track.xb + 60) % 12) + 60) % 12];
    b = b ? Math.abs(d[0]) < Math.abs(d[1]) ? d[0] : d[1] : 0 <= c ? d[0] : d[1];
    a.T = b;
    a.da = dj[b][0];
    a.W = 0 > b ? -1 : 1
}

function hl(a, b, c, d, e, f, g, h, k, l, m, n, p, q, r, t, w) {
    this.o = a;
    this.K = b;
    this.$ = c;
    this.Fb = d;
    this.Gb = e;
    this.I = g;
    this.lb = h;
    this.g = k;
    this.T = l;
    this.cb = m;
    this.tb = p;
    this.m = r;
    this.J = t;
    this.L = w;
    this.R = q;
    a = [];
    c = 0;
    for (d = n.length; c < d; c++) a.push(new wk(b, this, b.O[c], "undefined" === typeof n[c].key ? null : n[c].key, f, n[c].clef, n[c].cc || null, n[c].simile || 0, n[c].voices, n[c].t, n[c].mr || 0));
    this.O = a;
    this.Ga = Ag;
    this.Y = this.width = this.naturalWidth = this.N = 0;
    this.La = [];
    this.Sa = this.height = this.y = this.x = this.fb = 0;
    this.Mc = !1
}
hl.prototype = {};

function il(a, b, c) {
    var d = a.o,
        e = a.K,
        f = d.L,
        g = a.O.length,
        h = [],
        k = a.Mc,
        l = 1.8,
        m, n, p, q, r, t, w, v;
    for (m = g; m--;) a.O[m].Ka = e.O[m].J;
    a.Mc = b;
    var x;
    if (x = b || k) a: {
        for (var A = a.O.length, z, y, I,
                 R; A--;)
            for (z = a.O[A].V, y = z.length; y--;)
                if (z[y].length)
                    for (I = z[y][0].X, R = I.length; R--;)
                        if (Fh(I[R])) {
                            x = !0;
                            break a
                        }
        x = !1
    }
    x && jl(a, h, b);
    h.length = 0;
    if (kl(a)) a.fb = 0;
    else {
        for (var V = a.o, ba = a.K, ea = V.I, ca = V.g, na = a.La, ta = a.O, W = 0, ha = 0, ka = ta.length, ab = !1,
                 bb = !1, pa = kk(a), La = fl(a), Z, cb = Wk, tb = a.O.length, ra, Yc, Ha, Pb,
                 sa; tb--;)
            if (Ha = a.O[tb], Ha.Ka)
                for (ra =
                         Ha.V.length; ra--;)
                    for (Pb = Ha.V[ra], Yc = Pb.length; Yc--;) sa = Pb[Yc], !sa.ga && zg(cb, sa.Ya) && (cb = sa.Ya);
        Z = cb == Ag ? Zk.Ea : cb.Ea;
        var za = ll(a),
            qd = ml(a),
            yb = !1,
            db = a.Ga,
            rd = V.sa,
            Zc = nl(a),
            kc = Zc ? ba.U[a.$ + Zc - 1] : a,
            Dc, D,
            zb, aa, Ua, ua, U, C, N;
        for (Dc = ka; Dc--;)
            if (ua = ta[Dc], ua.Ka) {
                for (D = ua.V.length; D--;) ha++;
                !ab && ba.O[Dc].va && (ab = !0);
                !bb && ba.O[Dc].Cb && (bb = !0);
                yb || !ua.m && !Mk(ua) || (yb = !0)
            }
        if (ab) {
            if (pa) {
                ol(ba) && pl(ql(a, W++), 17, Ag, Z, 1.25 * ca, 0, !1, !1, null);
                pl(ql(a, W++), 2, Ag, Z, .16 * ca, 0, !1, !1, null);
                for (var Ab = ql(a, W++), tc = Ag, T = Z, uc = 0,
                         sd = a.o.I, Kb = a.O.length, $b,
                         Aa; Kb--;) $b = a.O[Kb], $b.Ka && $b.track.va && (Aa = sd.width($b.J.g), Aa > uc && (uc = Aa));
                pl(Ab, 3, tc, T, .5 * ca + uc + .5 * ca, 0, !1, !1, null)
            }
            if (pa || qd)(N = rl(a)) ? pl(ql(a, W++), 4, Ag, Z, (qd && !pa ? 1 * ca : 0) + N + 1 * ca, 0, !1, !1, null) : qd && !pa && (N = rl(gl(a)), pl(ql(a, W++), 4, Ag, Z, 1 * ca + N + 1 * ca, 0, !1, !1, null))
        }
        if ((ab || bb) && (0 === a.$ || za)) {
            var eb = ql(a, W++),
                Vb = Ag,
                va = Z,
                Lc = za || bb ? .5 * ca : 0,
                lc = a.o.I,
                X = sl(lc, a.Fb),
                Ba = sl(lc, a.Gb);
            pl(eb, 5, Vb, va, Lc + (X > Ba ? X : Ba) + 1 * ca, 0, !1, !1, null)
        }
        a.I ? pl(ql(a, W++), 6, Ag, Z, ea.width(57412) + 1.26 * ca, 0, !1, !1, null) : rd && pa && pl(ql(a, W++), 8, db, Z, .16 * ca, 0, !0, !1, null);
        a.m || pl(ql(a, W++), 7, Ag, Z, 1 * ca, 1 * ca, !pa, !1, null);
        var Dd;
        if (rd) {
            var Ec = W,
                fa = a.O,
                ga = !1,
                ma, wa = a.o,
                gd = wa.L;
            ma = gd / Math.pow(2, Math.floor(Math.log(gd / (20 * wa.g)) / tl)) | 0;
            var E = 0,
                ad = a.Ga.Ea,
                S, Ma, Lb, da, Va, fb, Fc, Wa, la, Ca;
            for (S = Ec; S--;) E += a.La[S].jb;
            for (S = fa.length; S--;)
                if (Lb = fa[S], Lb.Ka)
                    for (da = Lb.V, Ma = da.length; Ma--;)
                        for (Va = da[Ma], fb = 0, Fc = Va.length; fb !== Fc; fb++)
                            if (Wa = Va[fb], ok(Wa)) {
                                la = ga ? 0 : -E;
                                if (!ga && zg(Wa.Ca, Ag)) {
                                    var Da = la + ma * Wa.Ca.Ea / ad;
                                    pl(ql(a, Ec++),
                                        14, Ag, 0, Da, Da, !0, !1, 0);
                                    la = 0
                                }
                                for (var Pa = la, vc = ma, mc, nc = Wa, Qa = li(nc, !1), Mb = null; Qa;) {
                                    if (Qa.$a) {
                                        Mb = Qa.Ca;
                                        break
                                    }
                                    Qa = li(Qa, !1)
                                }
                                mc = Mb ? Vk(Mb, nc.Ca) : Vk(nc.P.Ga, nc.Ca);
                                la = Pa + vc * mc.Ea / ad;
                                Ca = ql(a, Ec++);
                                pl(Ca, 16, Wa.Ca, 0, la, 0, !0, !1, 0);
                                Ca.Ma.push(Wa);
                                ga = !0
                            }
            ga || (ma -= E, pl(ql(a, Ec++), 14, Ag, 0, ma, ma, !0, !1, 0));
            Dd = Ec
        } else {
            for (var gb = W, qa = yb, Qb = Z, hb = ha, ub = a.o.I, Ea = a.o.g, Ra = a.O, td = .5 * Ea, Bb, Cb, wc, Ia,
                     Na, ac, ib, bd, Y, oa; hb--;) h[hb] = 0;
            for (;;) {
                Bb = null;
                Cb = 0;
                wc = !1;
                for (Ia = 0; Ia !== ka; Ia++)
                    if (Na = Ra[Ia], Na.Ka)
                        for (ac = Na.V, ib = 0, bd = ac.length; ib !==
                        bd; ib++)(Y = ac[ib][h[Cb]]) && (null === Bb || Ej(Bb, Y.Ca)) && (wc = Bb === Y.Ca ? wc || Y.ga ? !0 : !1 : Y.ga ? !0 : !1, Bb = Y.Ca), Cb++;
                if (qa) {
                    var bc;
                    for (Ia = ka; Ia--;)
                        if (Na = Ra[Ia], Na.m)
                            for (hb = Na.m.length; hb--;) bc = Na.m[hb].g, (bc === Bb || null === Bb && bc === db) && pl(ql(a, gb++), 15, bc, Qb, .66 * ub.width(Na.m[hb].m.g) + td, td, !1, !0, Na.track.index)
                }
                if (null === Bb) break;
                oa = ql(a, gb++);
                pl(oa, 1, Bb, Qb, 0, 0, !0, !1, null);
                a.m && (oa.jb = 20 * Ea);
                for (Ia = Cb = 0; Ia !== ka; Ia++)
                    if (Na = Ra[Ia], Na.Ka)
                        for (ac = Na.V, ib = 0, bd = ac.length; ib !== bd; ib++)(Y = ac[ib][h[Cb]]) && Y.Ca === Bb &&
                        (wc && Y.ga || !wc && !Y.ga) ? (oa.Ma.push(Y), 0 === oa.I && ik(Y) && (oa.I = 3.5 * Ea), wc && (oa.jb = Math.max(oa.jb, 1.8 * Ea)), h[Cb]++, Y.la = gb - 1) : oa.Ma.push(null), Cb++
            }
            if (qa)
                for (Ia = 0; Ia !== ka; Ia++) Na = Ra[Ia], Na.Ka && Mk(Na) && pl(ql(a, gb++), 15, db, Qb, .66 * ub.width(Ok(Na).J.g) + td, td, !1, !0, Na.track.index);
            Dd = gb
        }
        W = Dd;
        U = ql(a, W++);
        if (!c && La && La.I) kc.lb ? ml(La) || ll(La) ? pl(U, 10, db, Z, ea.width(57412) + 1.26 * ca, 0, !1, !1, null) : pl(U, 12, db, Z, ea.width(57412) + .76 * ca, 0, !1, !1, null) : W--;
        else if (kc.lb) pl(U, 10, db, Z, ea.width(57412) + 1.26 * ca, 0, !1, !1, null);
        else if (Nk(kc)) pl(U, 9, db, Z, (.8 + .16) * ca, 0, !1, !1, null);
        else {
            var Wb;
            if (kc.T) Wb = !0;
            else {
                var Rb = fl(kc);
                Wb = !(!Rb || !Rb.J && !Rb.L)
            }
            Wb ? pl(U, 11, db, Z, .62 * ca, 0, !0, !1, null) : pl(U, 8, db, Z, .16 * ca, 0, !0, !1, null)
        }
        c && La && ml(La) && (N = rl(La) || rl(a), pl(ql(a, W++), 13, db, Z, N + 2 * ca, 0, !1, !1, null));
        for (aa = W - 1; aa--;) na[aa].duration = Vk(na[aa + 1].offset, na[aa].offset);
        na[W - 1].duration = Vk(db, na[W - 1].offset);
        if (rd) {
            N = 0;
            for (aa = W - 1; aa && na[aa].m;) N += na[aa].jb, aa--;
            0 === aa && na[aa].m || (na[aa].jb -= N)
        } else
            for (aa = W; aa--;)
                if (U = na[aa], !U.jb) {
                    C =
                        null;
                    for (zb = ha; zb--;)
                        for (Ua = aa; 0 <= Ua; Ua--)
                            if (!na[Ua].jb && null !== na[Ua].Ma[zb]) {
                                Z = na[Ua].Ma[zb].Bb;
                                if (null === C || Z < C) C = Z;
                                break
                            }
                    var dc = U,
                        jb = C;
                    dc.T = dc.duration.Ea / jb;
                    var Db = jb / dc.W;
                    dc.Y = Math.log2 ? Math.log2(Db) : Math.log(Db) / tl
                }
        a.fb = W;
        na.length > W + 5 && (na.length = W + 5)
    }
    for (m = 0; m !== g; m++)
        if (w = a.O[m], w.Ka) {
            p = w.V;
            n = p.length;
            if (1 < n) {
                for (var ja = w.V, hd = ja.length, oc = [], pb = void 0, Xb = void 0, Mc = void 0, Sb = void 0, Eb = void 0,
                         nb = void 0, Tb = void 0, id = void 0, Gc = void 0, ec = void 0,
                         pb = 0; pb !== hd; pb++) oc.push([pb, 0]);
                for (pb = hd; pb-- &&
                0 !== pb;)
                    for (Mc = ja[pb], Xb = pb; Xb--;) {
                        Sb = ja[Xb];
                        Eb = Mc.length - 1;
                        nb = Sb.length - 1;
                        Gc = 0;
                        for (ec = !1; 0 <= Eb && 0 <= nb;) Tb = Mc[Eb], id = Sb[nb], Tb.ta || Tb.ga || zg(Tb.Ca, id.Ca) ? Eb-- : (id.ta || id.ga || zg(id.Ca, Tb.Ca) || (ec = !0, Gc += Ji(Gg(Tb, !0, !0, null), Gg(id, !1, !0, null)) ? 1 : -1, Eb--), nb--);
                        if (!ec) {
                            var fc = ul(Mc),
                                ud = ul(Sb);
                            fc > ud ? Gc = -1 : fc < ud && (Gc = 1)
                        }
                        0 < Gc ? oc[pb][1]++ : 0 > Gc && oc[Xb][1]++
                    }
                oc.sort(vl);
                for (pb = hd; pb--;)
                    for (Mc = ja[oc[pb][0]], Xb = Mc.length; Xb--;) Mc[Xb].Hb = pb
            }
            for (q = n; q--;)
                for (r = 0, t = p[q].length; r !== t; r++) {
                    var Fb = p[q][r],
                        vd = void 0;
                    if (Fb.ta) vd = !1;
                    else if (Fb.K.o.ea || null === Fb.W) var Za = Fb.ja.V.length,
                        vd = Fb.ga ? 1 === Za ? !0 : 0 === Fb.Hb : 1 === Za ? 0 < Fb.sa : 0 === Fb.Hb ? !0 : Fb.Hb === Za - 1 ? !1 : 0 < Fb.sa;
                    else vd = 1 === Fb.W;
                    Fb.g = vd ? Fb.g | 4096 : Fb.g & -4097
                }
            Rk(w);
            for (q = n; q--;)
                for (r = 0, t = p[q].length; r !== t; r++) {
                    v = p[q][r];
                    h.length = 0;
                    v.wa = null === v.J || hg(v) ? 0 !== (v.g & 4096) : Ig(v).I;
                    var Oa = v,
                        Ed = h,
                        Fe = null,
                        xc = Oa.X,
                        Gb = xc.length,
                        Nb = void 0,
                        Ub = void 0,
                        ob = void 0,
                        Hb = void 0,
                        gc = void 0;
                    Oa.g &= -8193;
                    for (Nb = Gb; Nb--;) xc[Nb].yb = null;
                    if (!(2 > Gb)) {
                        for (Nb = 0; Nb !== Gb; Nb++) Ub = xc[Nb], Ub.yb = null,
                        0 !== Nb && (ob = xc[Nb - 1], Og(ob) === Og(Ub) && 2 > ob.qa - Ub.qa && (ob === Fe ? Ed[Ed.length - 1].push(Ub) : Ed.push([ob, Ub]), Fe = Ub));
                        if (Hb = Ed.length)
                            if (Oa.g |= 8192, Oa.wa)
                                for (; Hb--;)
                                    for (gc = Ed[Hb], Nb = 1, Gb = gc.length; Nb < Gb; Nb += 2) gc[Nb].yb = 2;
                            else
                                for (; Hb--;)
                                    for (gc = Ed[Hb], Nb = gc.length - 2; 0 <= Nb; Nb -= 2) gc[Nb].yb = 1
                    }
                    for (var qb = v, Ge = qb.Ca, fe = qb.ja.V.length, Pd = qb.X.length, jd = qb.track.Xa, Ib = qb.ha,
                             cd = qb.fa, dd = qb.ga, Ue = void 0, wd = void 0, Qd = void 0, He = void 0, ge = void 0,
                             Rd = void 0, Yb = void 0, Hc = void 0, Sd = void 0, Ve = void 0, lf = void 0, ed = void 0,
                             Fd = void 0, Ie = void 0; Pd--;)
                        if (Yb = qb.X[Pd], null !== Yb.R || qi(Yb)) {
                            Sd = Yb.qa;
                            lf = Ve = 0;
                            Ie = !1;
                            Fd = ed = 1;
                            for (wd = fe; wd--;)
                                for (ge = qb.ja.V[wd], Qd = ge.length; Qd--;)
                                    if (Rd = ge[Qd], Rd.Ca === Ge) {
                                        if (!dd && !Rd.ga || Rd.fa === cd)
                                            for (He = Rd.X.length; He--;) Hc = Rd.X[He], Yb !== Hc && wd === Ib && (Sd < Hc.qa ? Fd++ : ed++), wd === Ib && (lf++, (null !== Hc.R || qi(Hc)) && Ve++), Hc.la && (Ie = !0)
                                    } else if (zg(Ge, Rd.Ca)) break;
                            Ue = 1 === fe ? Ve === lf && (jd || 2 >= lf) ? jd ? Og(Yb) ? 1 === jd ? -10 * ed : 10 * Fd : 1 === jd ? 10 * Fd : -10 * ed : qb.wa ? -10 * ed : 10 * Fd : -1 <= Yb.qa && 7 >= Yb.qa ? 1 === Fd && 1 < ed ? Ie ? -4 : 4 :
                                1 === ed && 1 < Fd ? Ie ? -2 : 2 : Ie ? -3 : 3 : Ie ? -1 : 1 : jd && Og(Yb) ? 1 === jd ? -10 * ed : 10 * Fd : qb.wa ? 10 * Fd : -10 * ed;
                            Yb.ea = Ue
                        }
                    v.R = 0;
                    v.bb = v.ta ? 58595 === Bj(v) ? 1 : 2 : null
                }
            if (1 < n) {
                h.length = 0;
                for (var Td = w, Ud = h, Df = Td.P, fg = Td.track.index, Je = void 0, mf = void 0, Nc = void 0, Gd = void 0,
                         Zb = void 0, vb = void 0, mf = 0, Gd = Df.fb; mf !== Gd; mf++)
                    if (Zb = Df.La[mf], !Zb.m) {
                        Ud.length = 0;
                        Je = !1;
                        for (Nc = Zb.Ma.length; Nc--;) vb = Zb.Ma[Nc], null !== vb && vb.track.index === fg && vb.ta && (Ud.length && Ud[0].Bb !== vb.Bb && (Je = !0), Ud.push(vb));
                        if (Ud.length)
                            if (Nc = Ud.length, 1 < Nc && !Je)
                                for (; 1 <
                                       Nc--;) Ud[Nc].bb = 23;
                            else
                                for (var pc; Nc--;) vb = Ud[Nc], 0 === vb.Hb ? (pc = Qk(Td, cl(Td, 1), vb.Ca, !0), null === pc ? vb.bb-- : (pc -= 3 + 2 * vb.ba.Qc, vb.bb = Math.min(vb.bb - 1, Math.floor(pc / 2)))) : (pc = Qk(Td, cl(Td, vb.Hb - 1), vb.Ca, !1), null === pc ? vb.bb++ : (pc += 3 + 2 * vb.ba.Rc, vb.bb = Math.max(vb.bb + 1, Math.ceil(pc / 2))))
                    }
                var Vd = {},
                    Wd;
                for (q = n; q--;)
                    for (r = p[q].length; r--;) v = p[q][r], v.ta || v.ga || (Wd = Dj(v.Ca), Vd[Wd] ? Sj(v, Vd[Wd]) : Vd[Wd] = v)
            }
            for (q = n; q--;)
                for (r = 0, t = p[q].length; r !== t; r++) {
                    var Xa = v = p[q][r],
                        qc = Xa.track,
                        xd = Xa.K.o.I,
                        hc = Xa.K.o.g,
                        Oc = si(Xa),
                        he = 0,
                        Sf = !1,
                        yc = Xa.X,
                        kd = yc.length,
                        Xd = void 0;
                    if (qc.va) {
                        Oc += Xa.R;
                        Xa.wa && 0 !== (Xa.g & 8192) && (Oc += si(Xa));
                        !Xa.ga && Xa.ba.J && (he = Math.max(he, .45 * hc + xd.width(57831)));
                        for (ri(Xa) && null === Xa.J && (he = Math.max(he, tj(Xa, Xa.wa))); kd--;) {
                            var Xd = yc[kd],
                                nf;
                            if (nf = null !== Xd.R && qi(Xd)) {
                                var We = Xd.ea;
                                nf = -1 === We || -2 === We || -4 === We || -3 === We
                            }
                            nf && (he = Math.max(he, (1.1 + 1.3) * hc))
                        }
                        Oc += he;
                        Xa.I && nk(Xa) && (Oc = Math.max(Oc, xd.width(wl[Xa.I]) + .8 * hc))
                    }
                    qc.Pa && Xa.L && (Oc = Math.max(Oc, xj(Xa) / 2));
                    if (qc.Ja) {
                        for (kd = yc.length; kd--;) yc[kd].m && (Sf = !0);
                        Sf && (Oc = Math.max(Oc, 4 * hc))
                    }
                    Xa.gd = Oc;
                    var Sa = v,
                        ve = Sa.track,
                        kb = Sa.K.o.g,
                        Ja = 0,
                        zc = 0,
                        Xe = 0,
                        ie = Sa.X.length,
                        we = void 0;
                    if (ve.va) {
                        Sa.wa || 0 === (Sa.g & 8192) || Sa.R || (Ja += si(Sa));
                        Sa.aa && (Ja += 1.2 * Sa.aa * kb * (Sa.ga ? .65 : 1), 0 !== Sa.fa && (Ja += 1.2 * kb / 2));
                        for (; ie--;) {
                            var we = Sa.X[ie],
                                Ic;
                            if (Ic = qi(we)) {
                                var je = we.ea;
                                Ic = 1 === je || 2 === je || 4 === je || 3 === je
                            }
                            Ic && (Ja += null !== we.R && qi(we) ? kb : kb / 2)
                        }
                        var ld;
                        if (ld = Zf(Sa)) a: {
                            var ke = void 0;
                            if (Sa.m)
                                for (ke = Sa.m.length; ke--;)
                                    if (Sa !== Sa.m[ke].ka[0]) {
                                        ld = !0;
                                        break a
                                    }
                            for (ke = Sa.X.length; ke--;)
                                if (Fh(Sa.X[ke])) {
                                    ld = !0;
                                    break a
                                }
                            ld = !1
                        }
                        ld && (Ja += 2.6 * kb);
                        Sa.I && nk(Sa) && (Ja = Math.max(Ja, .5 * kb))
                    }
                    ve.Pa && Sa.L && (Xe = (xj(Sa) + kb) / 2);
                    Sa.N && (ve.va && (Ja += 1.5 * kb), ve.Ja && (zc += 1.5 * kb));
                    ve.Ja && (Uj(Sa) && (zc += 1.5 * kb), Sa.oa && (zc += 1.7 * kb));
                    Sa.fd = Math.max(Ja, Xe, zc)
                }
        }
    for (m = a.fb; m--;) {
        var xe = a.La[m],
            yd = 0,
            Ef = xe.Ma.length,
            Pc = void 0,
            rb = void 0;
        if (xe.m) yd = null;
        else
            for (; Ef--;) rb = xe.Ma[Ef], null !== rb && (Pc = rb.gd, Pc > yd && (yd = Pc));
        xe.N = yd
    }
    do xl(a, !0, l), l -= .1; while (a.naturalWidth >= f && .9 < l);
    if (0 !== f && a.naturalWidth > f && 11 < d.Y) return d.Ia || (d.Ia = d.Y),
        yl(d, d.Y - 1, !0), !1;
    for (m = 0; m !== g; m++)
        if (w = a.O[m], w.Ka) {
            for (q = w.R.length; q--;) {
                for (var zd = w.R[q], le = zd.g, Hd = le, md = zd.ka; Hd--;) md[Hd].na = 0;
                var Ad = md[0].K.o.g,
                    of = 1 * Ad,
                    Jb = zd.m,
                    Ke = Xg(zd),
                    me = Vg(zd),
                    Id = Ke.wa,
                    Qc = Gg(Ke, Id, !0, Jb),
                    pf = Gg(me, Id, !0, Jb),
                    qf = Qg(Ke),
                    ne = Fg(Qc, !0, Jb),
                    Le = Qg(me),
                    ye = Fg(pf, !0, Jb),
                    oe = void 0,
                    pe = void 0,
                    Ye = void 0,
                    rf = void 0,
                    Lg = void 0,
                    Rc = void 0,
                    Jc = void 0,
                    Ac = void 0,
                    Ze = void 0;
                if (ne === ye && Qc.qa !== pf.qa) {
                    var Rh = oi(Qc),
                        oh = oi(pf);
                    null !== Rh && Rh === oh && (Qc.value > pf.value ? Id ? ne -= .5 * Ad : ye += .5 * Ad : Id ? ye -= .5 *
                        Ad : ne += .5 * Ad)
                }
                pe = qf === Le ? 0 : (ye - ne) / (Le - qf);
                .15 < pe ? (pe = .15, Rc = Id ? ne - pe * qf : ye - pe * Le) : -.15 > pe ? (pe = -.15, Rc = Id ? ye - pe * Le : ne - pe * qf) : Rc = ne - pe * qf;
                oe = 0;
                for (Hd = le; Hd--;) Jc = md[Hd], Jc.ta || Jb && !Wg(Jc, Jb) || (Ze = Pj(Jc, !0, !0, Jb), Ye = pe * Qg(Jc) + Rc, Lg = Jc.ga ? 0 : .5 * Jc.K.o.g * (1.5 * Jc.ba.R - .5), Id ? (Ze < Ye && (oe = Math.max(oe, Ye - Ze)), Jc.ga || (Ac = ui(Jc, !0).y(!0) - Ad / 2 - Lg, Ac - Ze < of && (rf = Ac - of , rf < Ye && (oe = Math.max(oe, Ye - rf))))) : (Ze > Ye && (oe = Math.max(oe, Ze - Ye)), Jc.ga || (Ac = ui(Jc, !1).y(!0) + Ad / 2 + Lg, Ze - Ac < of && (rf = Ac + of , rf > Ye && (oe = Math.max(oe,
                    rf - Ye))))));
                Id && (oe *= -1);
                Rc += oe;
                for (Hd = le; Hd--;)
                    if (Jc = md[Hd], !Jc.ta && (Qc = Gg(Jc, Id, !0, Jb))) Jc.na = Math.abs(pe * Qg(Jc) + Rc - Fg(Qc, !0, Jb));
                var qe = w.R[q],
                    Sh = qe.ka,
                    ph = qe.m,
                    Me = Sh[0],
                    Ff = Me.K.o.g,
                    Bi = Vg(qe),
                    gg = Qg(Me),
                    Ci = Qg(Bi),
                    Gf = Pj(Me, !0, !0, ph),
                    Yd = (Pj(Bi, !0, !0, ph) - Gf) / (Ci - gg),
                    sf = Gf - Yd * gg,
                    Ka = void 0,
                    Sc = void 0,
                    ug = void 0,
                    Bd = void 0;
                if (0 !== Ci - gg)
                    for (Ka = qe.g; Ka--;) Sc = Sh[Ka], Sc.ta && (ug = Yd * Sc.x + sf + .5 * Ff * (qe.I ? 1 : -1), qe.I ? (Bd = Sc.K.o.g * (Sc.bb - Sc.ba.Rc) - Ff / 2, Bd <= ug && (Sc.bb += Math.ceil((ug - Bd) / Ff))) : (Bd = Sc.K.o.g * (Sc.bb + Sc.ba.Qc) +
                        Ff / 2, Bd >= ug && (Sc.bb -= Math.ceil((Bd - ug) / Ff))))
            }
            for (q = w.Y.length; q--;) {
                var qh = w.Y[q];
                qh.m = qh.g = null
            }
        }
    return !0
}

function jl(a, b, c) {
    var d = a.O.length,
        e, f, g, h, k, l, m, n, p, q;
    for (e = 0; e !== d; e++)
        if (f = a.O[e], f.Ka)
            for (g = f.V.length; g--;)
                for (h = {}, k = 0, l = f.V[g].length; k !== l; k++) {
                    m = f.V[g][k];
                    n = 0;
                    for (p = m.X.length; n !== p; n++) q = m.X[n], Zi(q, h, c);
                    b.length = 0;
                    n = b;
                    if (!m.ta) {
                        q = m.X.length;
                        var r = 0,
                            t = 0,
                            w, v;
                        for (p = m.aa = 0; p !== q; p++) v = m.X[p], v.T = null, v.la && n.push(v), v = v.qa - 3, 0 > v ? v < t && (t = v) : v > r && (r = v);
                        m.sa = r > -t ? r : t;
                        q = n.length;
                        switch (q) {
                            case 0:
                                break;
                            case 1:
                                n[0].T = 1;
                                m.aa = 1;
                                break;
                            case 2:
                                5 > n[0].qa - n[1].qa ? (n[0].T = 2, n[1].T = 1, m.aa = 2) : (n[0].T = n[1].T =
                                    1, m.aa = 1);
                                break;
                            case 3:
                                5 > n[0].qa - n[2].qa ? (n[0].T = 2, n[1].T = 3, n[2].T = 1, m.aa = 3) : (n[0].T = n[2].T = 1, n[1].T = 5 > n[0].qa - n[1].qa || 5 > n[1].qa - n[2].qa ? 2 : 1, m.aa = 2);
                                break;
                            default:
                                for (n[q - 1].T = 1, t = n[q - 1].qa, r = {
                                    1: t
                                }, p = 0, --q; p < q; p++)
                                    for (v = n[p], w = 1;; w++)
                                        if (("undefined" === typeof r[w] || 5 <= Math.abs(r[w] - v.qa)) && !(1 === w && 5 > v.qa - t)) {
                                            v.T = w;
                                            r[w] = v.qa;
                                            w > m.aa && (m.aa = w);
                                            break
                                        }
                        }
                    }
                }
}

function zl(a) {
    for (var b = a.O, c = b.length, d = c, e = Ag, f, g, h, k, l, m, n, p, q, r,
             t; d--;)
        for (g = b[d], f = g.track.Da, h = al(g), zg(h, e) && (e = h), k = g.V.length; k--;)
            for (l = g.V[k], h = l.length, m = 0; m !== h; m++)
                if (n = l[m], f) {
                    if (null === n.m || !n.m.length) {
                        q = n.K;
                        p = n;
                        r = !1;
                        do {
                            a: {
                                t = p.X;
                                for (var w = t.length, v; w--;)
                                    if (v = t[w], ni(v) || 4 === v.I) {
                                        t = !0;
                                        break a
                                    }
                                t = !1
                            }
                            if (t) r = !0;
                            else if (!ik(p)) break;
                            t = p.ga;
                            p = li(p, !0)
                        } while (p && !t);
                        if (r) {
                            r = p;
                            p = n;
                            q = lj(q, q.Y, p, !0);
                            do(p = li(p, !0)) && q.Ib(p); while (p && p !== r)
                        }
                    }
                    p = n.X;
                    for (q = p.length; q--;) r = p[q], 0 !== (r.g & 256) && (n.Y =
                        1), null === r.J && (t = ki(r, !1), null === t || 4 !== t.I && 3 !== t.I || (r.J = t.I))
                }
    e === Ag && (e = bl(a));
    a.Ga = e;
    a.N = 0;
    for (d = c; d--;) {
        g = b[d];
        if (!g.V.length || 1 === g.V.length && 0 === g.V[0].length) {
            if (c = g, e = c.P.Ga, 1 !== c.V.length || 1 !== c.V[0].length || c.V[0].Ya !== e) c.V.length = 0, e = Al(c.K, null, e.Ea, 0, 0, 0, !0, !0), c.V.push([new kj(c.K, c, 0, 0, e, {})])
        } else {
            h = Tk(g);
            h > a.N && (a.N = h);
            c = g.I;
            e = g.Y;
            f = g.V;
            h = 0;
            e.length = 0;
            for (m = f.length; m--;)
                for (q = f[m], l = q.length; l--;) q[l].kb = null;
            if (c)
                for (m = 0, k = c.length; m !== k; m++) {
                    p = c[m];
                    q = [];
                    l = 0;
                    for (n = p.i.length; l !==
                    n; l++) q.push(f[p.v][p.i[l]]);
                    e.push(new Bg(q, h));
                    h++
                }
        }
        if (0 < g.g)
            for (c = a.K.U, m = 1, h = Math.min(g.g, c.length - a.$); m < h; m++) c[a.$ + m].O[d].g = -m
    }
    jl(a, [], !1)
}

function bl(a) {
    return Nf(a.Fb, a.Gb)
}

function Bl(a, b, c) {
    var d, e, f;
    d = 0;
    for (e = a.fb; d !== e; d++)
        if (f = a.La[d], f.J && 6 >= Math.abs(f.x - b)) {
            c.Ya = f.offset;
            c.za = Cl(f.offset, a.Ga).Ea;
            c.Tb = !0;
            return
        }
    d = c.Ya = null;
    var g = a.fb,
        h;
    for (e = 1; e !== g; e++)
        if (f = a.La[e], f.x > b) {
            d = e - 1;
            break
        }
    null === d && (d = g - 1);
    h = g = a.La[d];
    for (e = d - 1; 0 <= e; e--) {
        f = a.La[e];
        if (f.offset !== g.offset) break;
        f.J && (h = f)
    }
    b = (b - h.x) / (g.width + g.x - h.x);
    b = Cl(h.offset, a.Ga).Ea + b * Cl(g.duration, a.Ga).Ea;
    c.za = Math.max(0, Math.min(1, b));
    c.Tb = !1;
    if (0 === c.za || 1 === c.za) a = a.Ga, a = Nf(a.m * c.za, a.g), c.Ya = a, c.Tb = !0
}

function Dl(a, b) {
    if (!a.tb || a.o.sa) return b;
    var c = a.Ga.Ea,
        d = b * c,
        e = 10,
        f = null,
        g, h, k, l, m, n, p;
    for (g = a.O.length; g--;)
        if (h = a.O[g], h.Ka)
            for (k = h.V.length; k--;)
                for (l = h.V[k], m = l.length; m--;) n = l[m], p = d - n.Ra, 0 <= p && (p < e || p === e && n.Mb < f.Mb) && (f = n, e = p);
    e = p = c;
    for (g = a.O.length; g--;)
        if (h = a.O[g], h.Ka)
            for (k = h.V.length; k--;)
                for (l = h.V[k], m = l.length; m--;) n = l[m], n.Ra > f.Ra && n.Ra < p && (p = n.Ra, e = n.rb);
    return f.rb / c + (d - f.Ra) / (p - f.Ra) * ((e - f.rb) / c)
}

function El(a, b) {
    return ek(a.o) + a.x + Fl(a, b)
}

function Fl(a, b) {
    if (1 === b) return a.width;
    if (0 === a.fb) return 0;
    var c = b * a.Ga.Ea,
        d = 0,
        e = a.fb,
        f, g;
    for (f = 1; f !== e; f++) {
        g = a.La[f];
        if (g.offset.Ea > c) break;
        g.m || (d = f)
    }
    c = e = a.La[d];
    for (f = d - 1; 0 <= f; f--) {
        g = a.La[f];
        if (g.offset !== e.offset) break;
        g.J && (c = g)
    }
    d = e.width + e.x - c.x;
    f = (b - Cl(c.offset, a.Ga).Ea) / Cl(e.duration, a.Ga).Ea;
    return Math.round(c.x + f * d)
}

function Zd(a, b, c) {
    var d = a.K.Za,
        e;
    if (1 === d.length) return e = d[0], 60 / e.m * 480 / e.g * a.N * (c - b);
    var f = a.$,
        g = 0,
        h, k, l, m;
    h = 0;
    for (k = d.length; h !== k; h++) {
        e = d[h];
        if (e.Ta > f || e.Ta === f && e.za >= c) break;
        if ((l = h + 1 === k) || !(d[h + 1].Ta < f || d[h + 1].Ta === f && d[h + 1].za <= b)) m = e.Ta < f ? b : Math.max(e.za, b), l = l || d[h + 1].Ta > f ? c : Math.min(d[h + 1].za, c), g += 60 / e.m * 480 / e.g * a.N * (l - m)
    }
    return g
}

function xl(a, b, c) {
    var d = a.La,
        e = a.fb,
        f = 0,
        g, h, k, l, m, n, p;
    for (g = 0; g !== e; g++) {
        h = d[g];
        var q = c;
        k = g;
        l = d;
        m = e;
        n = h.L;
        p = h.m;
        n ? h.width = 0 : h.jb ? h.width = h.jb : (q = h.T * (h.Y + q) * 1.4 * h.o.g, h.width = q >= h.N ? q : h.N, h.I && h.width < h.I && (h.width = h.I));
        p && !n && (h.R = h.width - h.jb);
        if (0 === k) h.x = 0;
        else {
            if (n || !p) {
                n = h;
                p = k;
                var q = l,
                    r, t = void 0;
                if (n.L) {
                    r = m;
                    for (var w = 0, v = -1, x; r--;)
                        if (x = q[r], !x.m) {
                            w = x.Ma.length;
                            break
                        }
                    for (r = w; r--;) {
                        a: {
                            for (w = m; w--;)
                                if (x = q[w], !x.m && null !== x.Ma[r]) {
                                    w = x.Ma[r].ja.track.index;
                                    break a
                                }
                            w = -1
                        }
                        w === n.g && (w = Gl(r, p, q), -1 ===
                        v || w < v) && (v = w)
                    }
                    r = v - n.o.g / 2;
                    if (r < n.jb) {
                        for (; p-- && (t = q[p], t.L););
                        t.width += n.jb - r
                    }
                } else
                    for (m = n.Ma.length; m--;)
                        if (t = n.Ma[m], null !== t && (v = t.fd)) r = Gl(m, p, q) - 2, r < v && (t = q[p - 1], t.width += v - r, t.m && (t.R = t.width - t.jb))
            }
            k = l[k - 1];
            h.x = k.x + k.width
        }
    }
    if (g = !a.o.sa) a: {
        g = a.K;
        for (h = g.O.length; h--;)
            if (k = g.O[h], k.pb || k.hb) {
                g = !0;
                break a
            }
        g = !1
    }
    if (g)
        for (g = 0; g !== e; g++) a: for (h = d[g], k = g, l = d, m = e, n = h.Ma.length, p = h.o.g; n--;)
            if (q = h.Ma[n], null !== q && q.$a && (v = q.track, v.pb || v.hb))
                for (t = h.x + 2 + (nj(q).ob && v.hb ? Math.ceil(1.1 * p) * (v.gb + 1.5) :
                        zj.width(1.8 * p, 2, nj(q).name) + p), r = k + 1; r !== m; r++) {
                    x = l[r];
                    if (x.x >= t) break a;
                    w = t - x.x;
                    b: {
                        for (var A = x.Ma.length, z; A--;)
                            if (z = x.Ma[A], null !== z && z.$a && z.track.index === v.index) {
                                x = !0;
                                break b
                            }
                        x = !1
                    }
                    if (x || r > Hl(q.P)) {
                        for (l[r - 1].width += w; r !== m;) l[r].x += w, r++;
                        break a
                    }
                }
    for (g = 0; g !== e; g++)
        for (m = d[g], f += m.width, h = 0, l = m.Ma.length; h < l; h++)
            if (n = m.Ma[h], null !== n) {
                p = m.width;
                for (k = g + 1; k < e && null === d[k].Ma[h]; k++) p += d[k].width;
                n.width = p;
                n.x = m.x
            }
    a.width = f;
    b && (a.naturalWidth = f);
    a.Y = c;
    return f
}

function Hl(a) {
    var b = a.La;
    a = a.fb;
    for (var c; a--;)
        if (c = b[a], !c.m) return a;
    return null
}

function Il(a) {
    var b, c, d;
    b = 0;
    for (c = a.fb; b !== c; b++)
        if (d = a.La[b], !d.m) return d;
    return null
}

function ql(a, b) {
    b >= a.La.length && a.La.push(new Jl(a.o));
    return a.La[b]
}

function fl(a) {
    return a.$ === a.K.U.length - 1 ? null : a.K.U[a.$ + 1]
}

function gl(a) {
    return 0 === a.$ ? null : a.K.U[a.$ - 1]
}

function ml(a) {
    if (0 === a.$) return !1;
    for (var b = a.O.length, c = gl(a); b--;)
        if (a.O[b].T !== c.O[b].T) return !0;
    return !1
}

function ll(a) {
    if (0 === a.$) return !1;
    var b = gl(a);
    return !(a.Fb === b.Fb && a.Gb === b.Gb)
}

function Kl(a) {
    return 0 === a.$ ? a.tb : gl(a).tb !== a.tb ? a.tb || "n" : null
}

function Ll(a) {
    var b = a.o,
        c = Il(a).x,
        d = 1 * b.g;
    return ek(a.o) + a.x + c - d + Math.round((a.width - c + d - b.I.width(58595)) / 2)
}

function rl(a) {
    for (var b = 0, c = a.O.length, d; c--;) d = a.O[c], d.Ka && (b = Math.max(b, Lk(d)));
    return b
}

function Ml(a) {
    if (a = a.g) {
        if (fj(a, 2) || fj(a, 6) || fj(a, 10)) return 13;
        if (fj(a, 3) || fj(a, 7) || fj(a, 11)) return 14;
        if (fj(a, 4) || fj(a, 8) || fj(a, 12)) return 19;
        if (fj(a, 1) || fj(a, 5) || fj(a, 9)) return 1
    }
    return -1
}

function Nl(a, b, c, d) {
    if (0 === a.g.length) return -1;
    var e = a.K,
        f = e.U,
        g = a.g;
    if (19 === b && fj(g, 19)) return f.length;
    if (fj(g, 1) || fj(g, 2) || fj(g, 3) || fj(g, 4)) {
        for (g = 0; f[g].m;) g++;
        return g
    }
    if (fj(g, 5) || fj(g, 6) || fj(g, 7) || fj(g, 8))
        if (f = Ol(e, a.$, 17), -1 !== f) return f;
    if (fj(g, 9) || fj(g, 10) || fj(g, 11) || fj(g, 12))
        if (f = Ol(e, a.$, 18), -1 !== f) return f;
    if (fj(g, 13) || fj(g, 14))
        if (g = fj(g, 13) ? 15 : 16, f = Pl(e, a.$, g), -1 !== f) {
            b = 15 === g ? [5, 9, 2, 6, 10] : [5, 9, 3, 7, 11];
            for (var h, k = 0, g = b.length; g--;)
                if (h = Pl(e, 0, b[g]), -1 !== h && (k++, fj(d, h))) return f;
            if (!(d =
                    k) && (d = Ql(a))) {
                a: {
                    d = a.K.U;
                    a = a.$;
                    for (e = d.length; a !== e; a++)
                        if (d[a].lb) {
                            a = d[a].lb;
                            break a
                        }
                    a = -1
                }
                d = c !== a
            }
            if (!d) return f
        }
    return -1
}

function Ql(a) {
    if (a.I) return !0;
    for (var b = a.K.U, c = a.$ - 1; 0 <= c; c--) {
        if (b[c].lb) return !1;
        if (b[c].I) return !0
    }
    for (var d = b.length, c = a.$; c < d && !b[c].I; c++)
        if (b[c].lb) return !0;
    return !1
}

function kl(a) {
    if (nl(a))
        for (var b = a.O, c = b.length; c--;)
            if (b[c].Ka) return Ik(b[c]) !== a.$;
    return !1
}

function Rl(a) {
    a = a.O;
    for (var b = a.length, c; b--;)
        if (c = a[b], c.Ka && 0 > c.g) return c.g;
    return -1
}

function nl(a) {
    a = a.O;
    for (var b = a.length, c = null, d = null, e, f; b--;)
        if (e = a[b], e.Ka) {
            if (!e.g) return 0;
            f = Jk(e);
            e = Ik(e);
            if (null === c) c = f;
            else if (c !== f) return 0;
            if (null === d) d = e;
            else if (d !== e) return 0
        }
    return c || 0
}

function Nk(a) {
    return a.$ === a.K.U.length - 1
}

function Sl(a) {
    var b = Ek(a);
    return a.$ === b.U[b.U.length - 1].$
}

function kk(a) {
    return 0 === a.$ || a.Mc
}

function Ek(a) {
    return a.o.Aa[a.Sa]
}

function Tl(a) {
    this.o = a;
    this.vc = 0;
    this.Sb = this.Wb = this.uc = this.aa = "";
    this.Bc = 0;
    this.N = !0;
    this.R = this.J = 1;
    this.fc = !1;
    this.tc = "";
    this.Nb = this.mc = this.lc = this.I = !1;
    this.Nc = "";
    this.Fc = null;
    this.g = {};
    this.U = [];
    this.Qa = [];
    this.O = [];
    this.Za = [];
    this.m = {};
    this.T = !1;
    this.L = 1;
    this.W = -1;
    this.Y = 1
}
Tl.prototype = {};

function Pl(a, b, c) {
    for (var d, e = a.U.length; b < e;) {
        d = a.U[b];
        if (d.g && fj(d.g, c)) return b;
        b++
    }
    return -1
}

function Ol(a, b, c) {
    for (var d; - 1 !== b;) {
        d = a.U[b];
        if (d.g && fj(d.g, c)) return b;
        b--
    }
    return -1
}

function Ul(a) {
    var b = a.Qa;
    b.length = 0;
    if (0 !== a.U.length) {
        a = a.U;
        for (var c = [], d = -1, e = 1, f = !1, g = !1, h = 0, k = a.length, l, m, n = null; h < k;) {
            l = a[h];
            m = l.cb;
            (null === m || null !== n && fj(m, n) || fj(m, e) || g) && b.push(h);
            null !== n && (l.I || null !== m && !fj(m, n)) && (n = null);
            g && (e = null !== m ? m[0] : 1);
            g = !1;
            m = -1;
            if (l.g) {
                if (!fj(c, h) && (m = Nl(l, d, e, c), m === k)) break; -
                    1 !== d && fj(l.g, d) && (d = -1)
            }
            if (l.lb && Ql(l))
                if (e < l.lb) {
                    for (; 0 < h && !a[h].I && !a[h].m; h--);
                    a[h].m && h++;
                    f = !0;
                    e++;
                    continue
                } else f = !1, e = 1, n = h + 1 < k && null !== a[h + 1].cb ? a[h + 1].cb[0] : null;
            l.I && !f &&
            (e = 1); -
                1 !== m ? (c.push(h), h = m, d = Ml(l), e = 1, g = !0) : h++
        }
    }
}

function Vl(a, b) {
    if (1 < a.U.length) {
        var c = a.U,
            d, e, f, g = !1,
            h, k;
        d = 1;
        for (e = c.length; d !== e; d++)
            if (h = c[d], k = c[d - 1], null === h.cb && null !== k.cb && !k.lb)
                for (f = d; f !== e && !c[f].I; f++)
                    if (c[f].lb) {
                        h.cb = [];
                        Wl(k.cb, h.cb);
                        g = !0;
                        break
                    }
        g && b && Ul(a)
    }
}

function Ah(a) {
    a = a.U;
    var b, c;
    b = 0;
    for (c = a.length; b !== c; b++) zl(a[b])
}

function ol(a) {
    a = a.O;
    for (var b = a.length; b--;)
        if (a[b].va && (a[b].Ja || 1 === a[b].Xa && b < a.length - 1 && a[b + 1].va)) return !0;
    return !1
}

function lh(a) {
    for (var b = a.O.length, c = 0,
             d; b--;)
        if (d = a.O[b], d.va && c++, d.Ja && c++, (d.pb || d.hb) && c++, d.Pa && c++, 1 < c) return !0;
    return !1
}

function Xl(a, b, c) {
    var d = a.o;
    Ah(a);
    Ul(a);
    Bh(d, !0);
    a: {
        a = a.O;
        for (var e = a.length; e--;)
            if (!Ch(a[e])) {
                a = !1;
                break a
            }
        a = !0
    }
    a || (d.dispatch(26), b && d.dispatch(27), c && d.dispatch(29))
}

function Al(a, b, c, d, e, f, g, h) {
    d = d || 0;
    if (null !== b) return a.g[b] || (a.g[b] = new qg(b, c, d, e, f, g, h)), !h && b >= a.L ? a.L = b + 1 : h && b <= a.W && (a.W = b - 1), b;
    for (var k in a.g)
        if (b = a.g[k], b.value === c && b.ab === d && b.Kb === e && b.Yb === f && b.Lb === g && b.Oc === h) return parseInt(k, 10);
    k = h ? a.W-- : a.L++;
    a.g[k] = new qg(k, c, d, e, f, g, h);
    return k
}

function lj(a, b, c, d) {
    b >= a.Y && (a.Y = b + 1);
    a.m[b] || (a.m[b] = new Of(b, d));
    a = a.m[b];
    a.Ib(c);
    return a
}

function Yl(a) {
    a = a.Za;
    a.length && 0 === a[0].Ta && 0 === a[0].za || a.splice(0, 0, new If(0, 0, 120, 120, 0, "", !1, !0))
}

function Zl(a, b) {
    var c = a.o,
        d = c.ic,
        e = 0,
        f = !1,
        g = !1,
        h = rk(c.m),
        k, l, m, n;
    h && c.m.pause();
    a.g = {};
    a.U.length = 0;
    a.Qa.length = 0;
    a.O.length = 0;
    a.Za.length = 0;
    a.m = {};
    a.T = !1;
    a.L = 1;
    a.W = -1;
    a.Y = 1;
    if (b) {
        if (b.tempos)
            for (l = 0, m = b.tempos.length; l !== m; l++) k = b.tempos[l], n = a, n.Za.push(new If(k[0], k[1], k[2], k[3], k[4], k[5] || "", 1 !== k[6], !1)), n.Za.sort($l);
        Yl(a);
        l = 0;
        for (m = b.rhythms.length; l < m; l++) k = b.rhythms[l], Al(a, k.id, k.val, k.dots, k.tuplet ? k.tuplet[0] : 0, k.tuplet ? k.tuplet[1] : 0, !1, !1);
        l = 0;
        for (m = b.tracks.length; l < m; l++) {
            k = b.tracks[l];
            e = 1 === k.gs ? 1 === e ? 2 : 1 : 0;
            n = a;
            var p = e,
                q = new fh(n.o, n, n.O.length, k.name || "", "undefined" !== typeof k.midi ? k.midi : "0", "undefined" !== typeof k.vol ? k.vol / 100 : 1, k.lines || 5, k.strings || 0, k.pitches || null, k.capo || 0, k.transpose || 0, k.chords, p, k.h || null, k.pd || null, "undefined" !== typeof d["show_staff_t" + l] ? "0" !== d["show_staff_t" + l] : "undefined" !== typeof d.show_staff ? "0" !== d.show_staff : 0 !== k.ds, "undefined" !== typeof d["show_tab_t" + l] ? "0" !== d["show_tab_t" + l] : "undefined" !== typeof d.show_tab ? "0" !== d.show_tab : 0 !== k.dt, "undefined" !==
                typeof d["show_tab_t" + l] ? "2" === d["show_tab_t" + l] : "undefined" !== typeof d.show_tab ? "2" === d.show_tab : 2 === k.dt, "undefined" !== typeof d["show_chords_t" + l] ? "0" !== d["show_chords_t" + l] : "undefined" !== typeof d.show_chords ? "0" !== d.show_chords : 0 !== k.dc, "undefined" !== typeof d["show_chords_t" + l] ? "1" !== d["show_chords_t" + l] : "undefined" !== typeof d.show_chords ? "1" !== d.show_chords : 1 !== k.dc, "undefined" !== typeof d["show_lyrics_t" + l] ? "0" !== d["show_lyrics_t" + l] : "undefined" !== typeof d.show_lyrics ? "0" !== d.show_lyrics : 0 !==
                    k.dl, 0 !== k.vk, 1 === k.vi);
            n.O.push(q);
            p && (n.T = !0);
            n.o.dispatch(5, q);
            n = q;
            k.strings && (f = !0);
            n.oc && (g = !0)
        }
        l = 0;
        for (m = b.bars.length; l < m; l++) k = b.bars[l], d = a, e = l, k = new hl(d.o, d, e, k.time[0], k.time[1], k.key, 1 === k.startrepeat, k.endrepeat || null, k.dirs || null, 1 === k.doublebar, k.altendings || null, k.tracks, k.tf || null, 1 === k.p, k.c || null, k.sectionltr || null, k.section || null), d.U[e] = k;
        for (l = a.O.length; l--;) m = a.O[l], uh(m, !0, !1) || (m.pb = m.hb = !1), uh(m, !1, !0) || (m.Pa = !1), hh(m, !0);
        Vl(a, !1)
    } else c.dispatch(24, ["We couldn't load the notation. Try reloading the page?", !0]);
    F(c.kd, "active");
    Xl(a, f, g);
    c.dispatch(32);
    h && c.m.play()
}

function am(a, b) {
    Tc("GET", b, null, function(b) {
        Zl(a, b)
    }, function() {
        Zl(a, null)
    })
};
var bm = utils.hasClass,
    cm = utils.toggleClass,
    dm = utils.makeMenu,
    em = utils.prettyTime,
    fm = utils.getElementWithAttribute,
    gm = utils.onready;

function hm(a, b) {
    for (; a;) {
        if (a === b) return !0;
        a = a.parentNode
    }
    return !1
}

function vm(a) {
    a = a.getElementsByClassName("active");
    for (var b = a.length; b--;) G(a[b], "active")
}

function wm(a) {
    a.parentNode.removeChild(a)
}

function xm() {
    ym() && document.activeElement.blur()
}

function zm(a) {
    cm(B(a.target.getAttribute("data-tooltip")), "active")
}

function Am(a) {
    a.target.blur()
}

function Bm(a) {
    var b = bf(a, "playbutton"),
        c = bf(a, "playcontainer"),
        d = utils.isIOS() || /(android)/i.test(navigator.userAgent),
        e = !1;
    u(b, "mousedown", xf(function() {
        d && !e && Re("IOS_INIT_AUDIO");
        e = !0;
        var b = a.m;
        rk(b) || b.J ? b.pause() : b.play()
    }));
    a.assign([43], function() {
        F(c, "playing")
    }, [40, 11], function() {
        G(c, "playing")
    }, [8], function() {
        -1 !== a.T && Ld(a).g.L() && F(c, "loading")
    }, [7], function() {
        -1 !== a.T && Ld(a).g.T() && G(c, "loading")
    }, [6], function() {
        G(c, "loading")
    }, [68], function() {
        H(c, "loading", Ld(a).g.L())
    })
}

function Cm(a) {
    var b = bf(a, "totaltime");
    a.assign([32, 68, 52, 4, 17, 12, 36], function() {
        b.innerHTML = em(a.duration(!0), !1)
    })
}

function Dm(a, b) {
    var c = soundslice.user_id;
    Tc("GET", "/api/v1/slices/" + a.K.uc + "/comments/", null, function(d) {
        for (var e = 0, f = d.length, g,
                 h; e !== f; e++) g = d[e], h = a.K.Nb || g.user_id === c && !g.deleted, Em(b, g.id, g.text, g.username, g.user_avatar, g.user_link, g.deleted, h)
    }, function() {})
}

function Fm(a, b, c) {
    Em(c, "", b, soundslice.username, soundslice.avatar, soundslice.profile, !1, !1);
    Tc("POST", "/api/v1/slices/" + a + "/comments/", {
        comment: b,
        parent_id: null
    }, function() {}, function() {})
}

function Gm(a, b) {
    wm(B("comment" + b));
    Tc("DELETE", "/api/v1/slices/" + a.K.uc + "/comments/" + b + "/", null, function() {}, function() {})
}

function Em(a, b, c, d, e, f, g, h) {
    c = '<div id="comment' + b + '" class="comment"><a href="' + f + '"><img class="comment-avatar" src="' + e + '"></a><div class="commenttext"><div class="commentauthor"><a href="' + f + '" class="subtle-link">' + Hm(d) + "</a></div> " + (g ? "<i>This comment was deleted by its author.</i>" : Hm(c).replace(/\n/g, "<br>")) + "</div>";
    h && (c += '<button class="commentdelete" data-delid="' + b + '"><svg class="svg-icon"><use xlink:href="#shape-delete-icon"></use></svg></button>');
    a.innerHTML += c + "</div>"
}

function Im(a, b) {
    Tc("GET", "/api/v1/slices/" + a + "/covers/", null, function(a) {
        for (var d = 0, e = a.length, f = "",
                 g; d !== e; d++) g = a[d], f += '<div class="cover' + (g.is_original ? " is-original" : "") + '"><a class="cover-link" href="' + g.url + '">' + (g.is_original ? ' <span class="badge">Original</span>' : "") + '<img class="cover-image" src="' + g.image_url + '" class="score-image"><div class="cover-authorname">' + Hm(g.username) + '</div><div class="cover-pubdate">' + g.pub_date + "</div></a></div>";
        b.innerHTML = f
    }, function() {})
}

function Jm(a, b) {
    var c = "covers" === b;
    H(bf(a, "postplayer"), "coverson", c);
    H(bf(a, "postplayer"), "commentson", !c);
    H(bf(a, "tabcovers"), "tab-active", c);
    H(bf(a, "tabcomments"), "tab-active", !c)
}

function Km(a, b) {
    this.o = a;
    this.aa = this.g = this.L = this.R = !1;
    this.J = 1;
    this.Y = 0;
    this.W = !1;
    this.T = 225;
    this.m = !1;
    this.I = 320;
    this.N = 0;
    if (a.oa) {
        Lm(this, b);
        var c = this;
        a.assign([37, 7, 43], function() {
            Mm(c)
        }, [2, 68, 81, 85], function() {
            var a = c.o,
                b = "",
                f = a.aa,
                g = f.length,
                h = 1 < g,
                k;
            H(B("settings-source-toggler"), "active", h);
            H(B("synth-toggle-tooltip"), "showaddrecording", a.Yc && !a.K.fc);
            for (h = 0; h !== g; h++) k = f[h], b += '<label class="audiotype-controller visible' + (k.index === a.T ? " active" : "") + '" data-backend="' + k.index + '"><div class="button-elements"><input type="radio" name="audiotype" class="invisible-radio"><div class="flag--img"><svg class="svg-icon svg-icon-small">' +
                Nm(k) + '</svg></div><div class="flag--text"><span>' + Hm(k.name) + "</span></div></div></label>";
            B("recordings-tooltip").innerHTML = b;
            B("recordings-list-mobile").innerHTML = b;
            a = c.o;
            b = 1 < a.aa.length;
            f = a.Yc;
            g = B("midi-toggle");
            h = B("toggle-container");
            b ? (k = Ld(a), g.innerHTML = '<svg class="svg-icon">' + Nm(k) + '</svg><span class="recording-name">' + Hm(k.name) + "</span>") : g.innerHTML = "";
            H(h, "disabled", !b && !f);
            H(h, "emptyedit", !b && f && !a.K.fc)
        });
        u(window, "resize", function() {
            Mm(c)
        })
    }
}
Km.prototype = {};

function Om(a, b) {
    b !== a.L && (a.L = b, H(B("bookmarker"), "bookmarked", b))
}

function Pm(a) {
    var b = a.o.K.uc;
    Tc("GET", "/api/v1/bookmarks/?ids=" + b, null, function(c) {
        Om(a, !!c[b])
    }, ya);
    u(B("bookmarker"), "click", function() {
        var b = !a.L;
        Om(a, b);
        Tc(b ? "POST" : "DELETE", "/api/v1/bookmarks/" + a.o.K.uc + "/", null, ya, ya)
    })
}

function Nm(a) {
    return '<use xlink:href="' + (a.T ? "#shape-digital-sound" : a.g.R ? "#shape-video-source-icon" : "#shape-recording-icon") + '"></use>'
}

function Qm(a) {
    function b(a) {
        a = Rm(a.target, "data-backend");
        null !== a && (Sm(c, parseInt(a, 10)), d && G(d, "active"))
    }

    var c = a.o,
        d = B("synth-toggle-tooltip");
    dm(B("midi-toggle"), d, "active", null, null, !0);
    u(d, "mousedown touchstart", b);
    u(B("recordings-list-mobile"), "mousedown touchstart", b)
}

function Mm(a) {
    var b = a.o,
        c = B("appwrapper"),
        d = B("musicwrapper"),
        e = B("settings"),
        f = B("video-wrapper"),
        g = bf(b, "video-container"),
        h = B("video-sidebar"),
        k = window.innerWidth,
        l = a.W ? a.T * window.innerHeight / 100 : a.T,
        m = !0,
        n = b.m.g ? b.m.g.ya() : xa;
    if (!b.da && (769 > k || 3 === a.J)) {
        var p = a.g ? Tm(B("controlbar")).height : null;
        (b.Vb = a.m) ? (F(c, "topvideo"), F(f, "narrow"), l > k / n && (l = k / n), Um(f, l), Vm(g, Math.floor(l * n)), a.g && (Wm(c, l), c.style.height = "calc(100% - " + l + "px)", Wm(e, l + p))) : (f.removeAttribute("style"), g.removeAttribute("style"),
        a.g && (c.removeAttribute("style"), e.removeAttribute("style")))
    } else f.removeAttribute("style"), g.removeAttribute("style"), a.g && (c.removeAttribute("style"), e.removeAttribute("style")), b.Vb = !1, a.m && (G(c, "topvideo"), G(f, "narrow"), h && !b.da && (e = a.I, 150 > e ? e = 150 : 200 > k - e && (e = k - 200), e / n > b.W - 40 && (e = (b.W - 40) * n), H(d, "smalllabels", 680 > k - e), H(d, "nolabels", 400 > k - e), m = !1, Vm(h, e), Um(f, e / n), a.N = e, a.I = e, Xm(b, !1)));
    m && (H(d, "smalllabels", 680 > k), H(d, "nolabels", 400 > k));
    !a.m && h && 0 !== a.N && (h.style.width = 0, a.N = 0);
    H(c, "video-active",
        a.m);
    d = a.g && (!a.m || !b.Vb || b.da);
    if (d !== a.aa) {
        c = c.getElementsByClassName("jsfliptip");
        for (f = c.length; f--;) H(c[f], "downward", d);
        a.aa = d
    }
    Xm(b, !1)
}

function Ym(a) {
    u(B("switchvideoside"), "mousedown touchstart", xf(function() {
        a.J = a.o.Vb ? 2 : 3;
        Mm(a)
    }))
}

function Zm(a, b, c) {
    if (c || b !== a.R) H(a.o.Jc, "hide-postplayer", !b), a.R = b, a.J = b ? 3 : 1, Mm(a)
}

function $m(a) {
    var b = a.o;
    F(b.Jc, "postpage");
    u(bf(b, "postplayer-toggle"), "mousedown touchstart", xf(function() {
        Zm(a, !a.R, !1)
    }));
    Zm(a, 896 <= window.innerWidth, !0);
    Pm(a)
}

function Lm(a, b) {
    "1" === b.top_controls && !0 !== a.g && (H(B("appwrapper"), "topcontrols", !0), a.g = !0);
    "1" === b.force_top_video ? a.J = 3 : "1" === b.force_side_video && (a.J = 2);
    var c = b.narrow_video_height;
    c && ("p" === c.charAt(c.length - 1) && (a.W = !0, c = c.substring(0, c.length - 1)), /^\d+$/.test(c) && (a.Y = parseInt(c, 10), a.T = a.Y));
    (c = b.side_video_width) && /^\d+$/.test(c) && (a.I = parseInt(c, 10))
}

function an(a, b) {
    var c = a.K,
        d = c.uc,
        e = bf(a, "post-commentlist"),
        f = bf(a, "postplayer"),
        g = B("post-tabs"),
        h = B("post-cover-info");
    $m(a.ld);
    a.ic.show_title = "0";
    bf(a, "postplayer-title-text").innerHTML = Hm(c.Wb) + (c.Sb ? " - " + Hm(c.Sb) : "");
    bf(a, "postplayer-ulink").href = b.uu;
    bf(a, "postplayer-avatar").src = b.ua;
    bf(a, "postplayer-uname").innerHTML = Hm(b.un);
    bf(a, "postplayer-date").innerHTML = b.w;
    bf(a, "post-description").innerHTML = Hm(c.tc).replace(/\n/g, "<br>");
    c.lc || F(f, "commentsdisabled");
    if (c.lc || b.nc) F(f, "hascomments"),
    b.nc && Dm(a, e);
    c.mc || F(f, "coversdisabled");
    (c.mc || b.nv) && b.nv && Im(d, bf(a, "post-coverlist"));
    Jm(a, "comments");
    c.fc && (F(f, "iscover"), bf(a, "coverbadge").href = b.pu, F(h, "active"), h.href = b.pu, bf(a, "cover-author-name").innerHTML = Hm(b.cu), bf(a, "cover-author-avatar").src = b.ca);
    u(bf(a, "post-comment-form"), "submit", function(a) {
        a.preventDefault();
        a = a.target.c;
        a.value && a.value.trim() && (Fm(d, a.value, e), a.value = "")
    });
    u(e, "click", function(b) {
        var c = fm(b.target, "data-delid");
        c && (b.preventDefault(), Gm(a, c.getAttribute("data-delid")))
    });
    u(g, "click", function(b) {
        b.preventDefault();
        b = fm(b.target, "data-tab");
        Jm(a, b.getAttribute("data-tab"))
    })
}

function bn(a) {
    u(window, "keydown", function(b) {
        if (!ym() && !cn()) switch (b.which) {
            case 32:
                b.preventDefault();
                var c = a.m;
                rk(c) || c.J ? c.pause() : c.play();
                break;
            case 61:
            case 187:
            case 107:
                if (107 === b.which || b.metaKey || b.ctrlKey) b.preventDefault(), yl(a, a.Y + 1, !0);
                break;
            case 109:
            case 173:
            case 189:
                if (109 === b.which || b.metaKey || b.ctrlKey) b.preventDefault(), yl(a, a.Y - 1, !0);
                break;
            case 37:
            case 39:
                if (b.preventDefault(), !a.N)
                    if (c = 39 === b.which, b.metaKey || b.ctrlKey) a: {
                        b = a.K;
                        b = b.U[b.Qa[a.Ha]];
                        if (c) {
                            if (Nk(b)) break a;
                            c = fl(b)
                        } else if (0 !==
                            a.Va) c = b;
                        else {
                            if (0 === b.$) break a;
                            c = gl(b)
                        }
                        dn(a.m, c, Ag)
                    }
                    else if (!b.shiftKey) {
                        b = [];
                        for (var d = 0, e = a.K.U[a.K.Qa[a.Ha]], f, g = e.fb, h = a.ec,
                                 k = null === h ? a.Va * e.Ga.Ea : null; g--;)
                            if (f = e.La[g], 1 === f.$b && (null === k && f.offset === h || null !== k && f.offset.Ea <= k)) {
                                d = g;
                                break
                            }
                        f = d;
                        for (d = null; e && !d;)
                            if (c) {
                                f++;
                                g = e.fb;
                                for (h = f; h < g; h++)
                                    if (k = e.La[h], 1 === k.$b && !k.jb) {
                                        d = k;
                                        break
                                    }
                                d || (e = fl(e), f = -1)
                            } else {
                                for (h = f; h--;)
                                    if (k = e.La[h], 1 === k.$b && !k.jb) {
                                        d = k;
                                        break
                                    }!d && (e = gl(e)) && (f = e.fb)
                            }
                        b[0] = e;
                        b[1] = d;
                        e = b[0];
                        if (f = b[1]) {
                            a: {
                                c = f.Ma;
                                for (b = c.length; b--;)
                                    if (d =
                                            c[b], null !== d) {
                                        c = d;
                                        break a
                                    }
                                c = null
                            }
                            c.rb === c.Ra ? dn(a.m, e, f.offset) : en(a.m, fn(a.aa[a.T], e, c.rb / e.Ga.Ea))
                        }
                    }
        }
    }, "fullscreenerror mozfullscreenerror MSFullscreenError webkitfullscreenerror", function() {
        a.dispatch(24, ["This site doesn't support full-screen mode.", !1])
    })
}

function gn(a, b) {
    function c(a) {
        !Lc || 13 !== a.which && 9 !== a.which || (a.preventDefault(), d())
    }

    function d() {
        if (Lc) {
            var b = Lc,
                c = B(b.getAttribute("data-v")),
                d = b.value,
                d = d.replace(/\s*%\s*$/g, "").trim(),
                d = parseInt(d, 10);
            isNaN(d) || a.m.sb(d / 100);
            G(b, "active");
            F(c, "active");
            Lc = null
        }
    }

    function e(a) {
        a = a.target;
        a.blur();
        a = Rm(a, "data-step");
        sa.value = parseInt(sa.value, 10) + parseInt(a, 10);
        f()
    }

    function f() {
        var b = parseInt(sa.value, 10);
        a.xb(b);
        za.innerHTML = (0 === b ? "" : 0 < b ? "+" + b : b) + " (" + ch[0][(dj[a.K.U.length ? a.K.U[0].O[0].aa :
                0][2] + a.ea + 60) % 12] + ")"
    }

    function g(b) {
        var c = b.target;
        b.preventDefault();
        c.blur();
        b = parseInt(Rm(c, "data-step"), 10) / 100;
        c = a.na;
        null !== c && Jd(c.g, c.g.g.J + b)
    }

    function h(b) {
        Tc("POST", "/manage/" + r.vc + "/jsonapi/", {
            data: JSON.stringify(b)
        }, function(b) {
            b.v ? r.Bc = b.v : a.dispatch(24, [b.e, !0])
        }, function() {
            a.dispatch(24, ["There was an error during saving.", !1])
        })
    }

    function k(b) {
        var c = b.target;
        b.preventDefault();
        c.blur();
        b = parseInt(Rm(c, "data-step"), 10) / 100;
        a.m.setVolume(a.m.volume + b)
    }

    function l() {
        yl(a, 36 + parseInt(ra.value,
                10), !0)
    }

    function m(a) {
        var b = a.target;
        a.preventDefault();
        b.blur();
        a = Rm(b, "data-step");
        ra.value = parseInt(ra.value, 10) + parseInt(a, 10);
        l()
    }

    function n() {
        var b;
        a: {
            b = 1E3 * a.m.Fa;
            for (var c = Vb.m, d = c.length, e; d--;) {
                e = c[d];
                if (e.g > b && e.m <= b) {
                    b = e.I;
                    break a
                }
                if (e.g < b) break
            }
            b = ""
        }
        b !== va && (va = eb.innerHTML = b)
    }

    function p(b) {
        H(w, "settingson", b);
        H(Dd, "active", b);
        H(Ec, "active", b);
        a.dispatch(69, b)
    }

    function q() {
        p(!bm(Dd, "active"))
    }

    var r = a.K,
        t = a.ld,
        w = B("appwrapper"),
        v = B("musicwrapper"),
        x = B("autoscrollon"),
        A = bf(a, "playcontainer"),
        z = B("nummeasures"),
        y = B("waveform"),
        I = B("currentmeasure"),
        R = B("currenttime");
    B("settings");
    var V = B("fullscreenbutton"),
        ba = B("togglenotation"),
        ea = !0,
        ca = "0" !== b.settings;
    u(w, "transitionend", function() {
        Xm(a, !1)
    });
    "0" === b.vfs && (ea = !1);
    ea || F(v, "novfs");
    ca || F(w, "nosettings");
    Ym(t);
    Qm(t);
    Bm(a);
    bn(a);
    a.assign([32, 4, 17, 12], function() {
        z.innerHTML = r.Qa.length
    });
    Cm(a);
    var na = !0,
        ta = B("progressbar"),
        W = B("progress-tooltip"),
        ha = B("progressmarker"),
        ka, na = !1;
    u(ta, "mousedown touchstart", xf(function(b) {
        for (var c = b.target; c &&
        !bm(c, "progress-bar");) c = c.parentNode;
        c = Tm(c);
        hn(a.m, (b.pageX - c.left) / c.width)
    }));
    u(B("progressnib"), "mouseover", function() {
        F(W, "active");
        na = !0;
        a.dispatch(46)
    }, "mouseout", function() {
        G(W, "active");
        na = !1
    });
    jn(ta, function() {
        ka = Tm(ta).width
    }, function(b) {
        hn(a.m, b / ka);
        document.body.style.cursor = "pointer"
    }, function() {
        document.body.style.cursor = "default"
    }, !0);
    a.assign([40, 51, 67], function() {
        ha.style.width = 100 * a.m.Va() + "%"
    });
    a.assign([46, 51, 67], function() {
        if (na) {
            I.innerHTML = r.U.length ? a.Ha + 1 : 0;
            var b = a.m;
            R.innerHTML =
                em(b.m ? b.Fa - b.m.I : 0, !1)
        }
    });
    var ab = B("volumeslider"),
        bb = B("increase-volume"),
        pa = B("decrease-volume");
    u(ab, "input", function() {
        a.m.setVolume(parseInt(ab.value, 10) / 100)
    }, "change", Am);
    a.assign([61], function(a) {
        ab.value = Math.round(100 * a.data)
    });
    u(bb, "mousedown touchstart", k);
    u(pa, "mousedown touchstart", k);
    var La = B("metronomesection"),
        Z = B("metronome-volume"),
        cb = B("increase-metronome"),
        tb = B("decrease-metronome");
    u(Z, "input", function() {
        var b = a.na,
            c = parseInt(Z.value, 10) / 100;
        null !== b && Jd(b.g, c)
    }, "change", Am);
    a.assign([62], function(a) {
        Z.value = Math.round(100 * a.data)
    });
    u(cb, "mousedown touchstart", g);
    u(tb, "mousedown touchstart", g);
    a.assign([1], function() {
        F(La, "active")
    });
    var ra = B("resizerange"),
        Yc = B("resizeout"),
        Ha = B("resizein"),
        Pb;
    Pb = B(ra.getAttribute("data-tooltip"));
    u(ra, "input", l, "change", Am, "mouseover mouseout", zm);
    a.assign([55], function(a) {
        a = a.data;
        var b = Math.round(100 * (36 + a) / 36);
        ra.value = a;
        Pb.innerHTML = b + "%"
    });
    ra.value = a.Y - 36;
    u(Yc, "mousedown touchstart", m);
    u(Ha, "mousedown touchstart", m);
    var sa = B("transposeslider"),
        za;
    if ("0" !== b.enable_transposition) {
        za = B(sa.getAttribute("data-tooltip"));
        u(sa, "input", f, "change", Am, "mouseover mouseout", zm);
        u(B("transposedown"), "mousedown touchstart", xf(e));
        u(B("transposeup"), "mousedown touchstart", xf(e));
        a.assign([32], function() {
            f()
        });
        for (var qd = document.getElementsByClassName("transposeui"), yb = qd.length; yb--;) F(qd[yb], "active")
    }
    u(x, "mousedown touchstart", function() {
        kn(a)
    });
    a.assign([10, 40], function() {
        G(x, "offroad")
    }, [9], function() {
        rk(a.m) && F(x, "offroad")
    });
    if (a.Ub && "0" !== b.enable_print) {
        var db =
            B("printbutton");
        u(db, "mousedown touchstart", function() {
            ln(a)
        });
        G(db, "hidden")
    }
    var rd = B("show-play-menu"),
        Zc = B("play-tooltip"),
        kc = [1, 2, 3];
    dm(rd, Zc, "active", null, null, !0);
    u(Zc, "mousedown touchstart", function(b) {
        for (b = b.target; b;) {
            if (b.hasAttribute && b.hasAttribute("data-play")) {
                mn(a.m, parseInt(b.getAttribute("data-play"), 10));
                G(Zc, "active");
                break
            }
            b = b.parentNode
        }
    });
    a.assign([54], function(a) {
        for (var b = 0, c = kc.length; b !== c; b++) {
            var d = kc[b];
            H(A, "playing-" + d, d === a.data);
            H(document.getElementsByClassName("playtype" +
                d)[0], "active", d === a.data)
        }
    });
    b.play_type && /^\d+$/.test(b.play_type) && mn(a.m, parseInt(b.play_type, 10));
    var Dc = "0" !== b.enable_fretboard,
        D = "0" !== b.enable_keyboard,
        zb = "0" !== b.enable_violin,
        aa = "0" !== b.enable_mixer;
    if (Dc || D || zb || a.wc || aa) {
        var Ua = B("instbuttons"),
            ua = B("instbuttonsset"),
            U = B("fretboard"),
            C = B("keyboard"),
            N = B("show-inst-menu"),
            Ab = B("inst-tooltip"),
            tc = "0" !== b.viz,
            T = !1,
            uc = function(b) {
                for (b = b.target; b;) {
                    if (b.hasAttribute && b.hasAttribute("data-inst")) {
                        nn(a, parseInt(b.getAttribute("data-inst"),
                            10));
                        G(Ab, "active");
                        break
                    }
                    b = b.parentNode
                }
            },
            sd = function(b) {
                for (b = b.target; b;) {
                    if (b.hasAttribute && b.hasAttribute("data-inst")) {
                        var c = parseInt(b.getAttribute("data-inst"), 10);
                        c === a.zb ? on(a) : nn(a, c)
                    }
                    b = b.parentNode
                }
            };
        u(Ua, "mousedown touchstart", xf(sd));
        u(ua, "mousedown touchstart", xf(sd));
        var Kb = function() {
            var b = !1,
                c = !1,
                d = !1,
                e = !1,
                f = !1,
                g = 0,
                h = r.O.length,
                k;
            if (!a.da)
                for (aa && 0 < h && (f = !0, g++, null === a.Pb && (a.Pb = new pn(a))); h--;) {
                    k = r.O[h];
                    !b && D && k.zc && !Ch(k) && (b = !0, g++, qn(a, C));
                    if (!c && Dc && k.Da) {
                        c = !0;
                        g++;
                        var n = a,
                            l = U,
                            m = B("fretboard-nut"),
                            p = B("fretcapo");
                        null === n.eb && (n.eb = new rn(l, m, p, !1, n))
                    }!d && zb && k.oc && (d = !0, g++, k = a, n = U, l = B("fretboard-nut"), m = B("fretcapo"), null === k.nb && (k.nb = new rn(n, l, m, !0, k)))
                }
            a.wc && -1 !== a.T && !Ld(a).g.N && (e = !0, g++, sn(a));
            h = a.zb;
            (!b && 1 === h || !c && 2 === h || !d && 3 === h || !e && 4 === h && !f && 5 === h) && on(a);
            tc && (a.mb && a.mb.m || a.eb && a.eb.g || a.nb && a.nb.g || a.Wa && a.Wa.R || a.Pb && a.Pb.g || (H(B("toggle-keyboard"), "visible", b && !c && !d), H(B("toggle-fretboard"), "visible", c && !d), H(B("toggle-violinboard"), "visible",
                d), H(B("toggle-waveform"), "visible", e && !b && !c && !d), H(B("toggle-mixer"), "visible", f && !b && !c && !d && !e)), H(B("mobile-toggle-keyboard"), "hidden", !b), H(B("mobile-toggle-fretboard"), "hidden", !c), H(B("mobile-toggle-violinboard"), "hidden", !d), H(B("mobile-toggle-waveform"), "hidden", !e), H(B("mobile-toggle-mixer"), "hidden", !f), H(B("keyboard-choice"), "visible", b), H(B("fretboard-choice"), "visible", c), H(B("violinboard-choice"), "visible", d), H(B("waveform-choice"), "visible", e), H(B("mixer-choice"), "visible", f), 1 < g ?
                (T || (dm(N, Ab, "active", null, null, !0), u(Ab, "mousedown touchstart", uc), T = !0), G(N, "hiddenarrow")) : F(N, "hiddenarrow"))
        };
        a.assign([68, 37], function() {
            Kb()
        }, [26], function() {
            Kb();
            D && C && "1" === b.keyboard && (qn(a, C), a.assign([32], function() {
                nn(a, 1)
            }));
            a.wc && "1" === b.waveform && (Kb(), nn(a, 4))
        }, [27], function() {
            Dc && U && (Kb(), "1" === b.fretboard && nn(a, 2))
        }, [29], function() {
            zb && U && (Kb(), "1" === b.violin && nn(a, 3))
        }, [76], function(b) {
            b = b.data;
            1 === b ? (F(C, "active"), tn(a.mb)) : 2 === b ? (F(U, "active"), un(a.eb)) : 3 === b ? (F(U, "active"),
                un(a.nb)) : 4 === b && (F(y, "active"), vn(a.Wa));
            if (tc) {
                for (var c = Ua.getElementsByTagName("button"), d = c.length, e,
                         f; d--;) e = c[d], f = parseInt(e.getAttribute("data-inst"), 10), f === b ? (F(e, "visible"), F(e, "active")) : G(e, "visible");
                c = Ab.getElementsByTagName("label");
                for (d = c.length; d--;) e = c[d], f = parseInt(e.getAttribute("data-inst"), 10), H(e, "active", f === b);
                c = ua.getElementsByTagName("button");
                for (d = c.length; d--;) e = c[d], f = parseInt(e.getAttribute("data-inst"), 10), H(e, "active", f === b)
            }
            Xm(a, !1)
        }, [75], function(b) {
            b = b.data;
            1 === b ? G(C, "active") : 2 === b || 3 === b ? G(U, "active") : 4 === b && G(y, "active");
            for (var c = Ua.getElementsByTagName("button"), d = c.length, e, f; d--;) G(c[d], "active");
            c = Ab.getElementsByTagName("label");
            for (d = c.length; d--;) G(c[d], "active");
            c = ua.getElementsByTagName("button");
            for (d = c.length; d--;) e = c[d], f = parseInt(e.getAttribute("data-inst"), 10), f === b && G(e, "active");
            Xm(a, !1)
        })
    }
    a.assign([68], function() {
        t.m = Ld(a).g.R;
        Mm(t);
        F(B("playtype3label"), "visible")
    });
    var $b = B("subtitlenav"),
        Aa = B("subtitleswitch"),
        eb = B("subtitlecues"),
        Vb = null,
        va = "";
    a.assign([68, 58, 70], function() {
        var b = Ld(a);
        b.g.R && (Aa.innerHTML = -1 === b.J ? "Subtitles off" : "Subtitles on (" + b.L[b.J].I + ")", H($b, "active", null !== b.L));
        if (b.g.R && -1 !== b.J) {
            var c = b.J;
            Vb = -1 === c ? null : b.L[c];
            n();
            a.assign([67, 51], n);
            F(eb, "active");
            F(w, "subtitles-active")
        } else Vb = null, a.unassign([67, 51], n), G(eb, "active"), G(w, "subtitles-active");
        Xm(a, !1)
    });
    u(Aa, "mousedown touchstart", xf(function() {
        var b = Ld(a);
        if (b.L) {
            var c = b.J;
            b.J = c === b.L.length - 1 ? -1 : c + 1; -
                1 !== b.J && b.L[b.J].g && wn(b.L[b.J]);
            b.o.dispatch(70)
        }
    }));
    var Lc = null,
        lc = document.getElementsByClassName("speedvalue"),
        X = xf(function(b) {
            Re("BLUR_ALL");
            var c = a.m;
            b = "1" === Rm(b.target, "data-dir");
            if (c.g.Wa) {
                var c = c.g,
                    d;
                d = c.m;
                d = d.g ? d.m.getAvailablePlaybackRates() : [];
                for (var e = c.m.L, f = c.pa(), g = c.na(), h = d.length, k = -1,
                         n; h--;) n = d[h], b && n > e && n <= g && n >= f && (-1 === k || n - e < k - e) ? k = n : !b && n < e && n <= g && n >= f && (-1 === k || e - n < e - k) && (k = n); -
                    1 !== k && c.sb(k)
            } else c.sb(Math.round(10 * c.I + (b ? .5 : -.6)) / 10)
        }),
        Ba = xf(function(a) {
            a = a.target;
            var b = B(a.getAttribute("data-ti"));
            Lc = b;
            G(a, "active");
            F(b, "active");
            b.value = "";
            b.focus()
        });
    (function() {
        for (var a = document.getElementsByClassName("speedbut"), b = a.length; b--;) u(a[b], "mousedown touchstart", X);
        for (b = lc.length; b--;) u(lc[b], "mousedown touchstart", Ba);
        a = document.getElementsByClassName("speedinp");
        for (b = a.length; b--;) u(a[b], "blur", d, "keydown", c)
    })();
    a.assign([57], function() {
        for (var b = Math.round(100 * a.m.I) + "%", c = lc.length; c--;) lc[c].innerHTML = b
    }, [63], function(a) {
        var b = document.getElementsByClassName("speed-unsupported-tip"),
            c = b.length;
        for (a =
                 a.data; c--;) b[c].innerHTML = a;
        b = document.getElementsByClassName("speed-controls");
        for (c = b.length; c--;) F(b[c], "unsupported")
    });
    u(window, "BLUR_ALL", function() {
        xm();
        Lc && d()
    });
    var Dd = B("toggle-settings"),
        Ec = B("toggle-settings-mobile");
    ca && (u(Dd, "mousedown touchstart", xf(q)), u(Ec, "mousedown touchstart", xf(q)), u(B("closesettings"), "mousedown touchstart", xf(q)));
    var fa = B("vidsizer"),
        ga, ma, wa;
    a.da || (ga = B("video-wrapper"), jn(fa, function(a) {
            wa = t.I;
            ma = a;
            F(ga, "resizing");
            document.body.style.cursor = "ew-resize"
        },
        function(a) {
            t.I = wa + a - ma;
            Mm(t)
        },
        function() {
            document.body.style.cursor = "default";
            G(ga, "resizing")
        }, !0));
    a.assign([74], function() {
        F(v, "partial-support")
    });
    var gd = B("vidflip");
    "0" !== b.flippable && (u(gd, "mousedown touchstart", xf(function() {
        cm(bf(a, "video-container"), "flip")
    })), a.assign([28], function() {
        G(gd, "hidden")
    }));
    if (ca) {
        var E = B("optionhoriz"),
            ad = B("optionhorizscroll"),
            S = B("optionvertscroll"),
            Ma = B("optionhidestave");
        u(B("advancedsettings"), "mousedown touchstart", xf(function() {
            p(!1);
            E.checked = a.R;
            S.checked =
                2 === a.Kc;
            Ma.checked = a.xc;
            H(B("optionhorizscrollblock"), "active", a.R);
            H(B("optionvertscrollblock"), "active", !a.R);
            F(B("optionsmodal"), "active")
        }));
        u(E, "change", function() {
            xn(a, E.checked)
        });
        u(ad, "change", function() {
            a.Xc = ad.checked ? 2 : 1
        });
        u(S, "change", function() {
            a.Kc = S.checked ? 2 : 1
        });
        u(Ma, "change", function() {
            a.xc = Ma.checked;
            Bh(a, !0)
        });
        a.assign([31], function() {
            H(B("optionhorizscrollblock"), "active", a.R);
            H(B("optionvertscrollblock"), "active", !a.R)
        })
    }
    var Lb = B("tracklabels");
    if ("0" !== b.show_track_names && Lb) {
        var da =
                B("track-menu-name"),
            Va = B("trackctrlstaff"),
            fb = B("trackctrltab"),
            Fc = B("trackctrlchords"),
            Wa = B("trackctrllyrics"),
            la = B("tuning-selector"),
            Ca = B("capo-selector"),
            Da = B("synthsound"),
            Pa = B("synthsound-choices"),
            vc = B("transpose-selector"),
            mc = B("transpose-key-choices"),
            nc = B("transpose-oct-selector"),
            Qa = B("transpose-oct-choices"),
            Mb = B("trackvolslider"),
            gb = B("track-control-rail"),
            qa = 0,
            Qb = !1,
            hb = !1,
            ub = [],
            Ea = [],
            Ra = {};
        "ontouchstart" in window && u(gb, "touchstart", function(a) {
            a.target === gb && a.preventDefault()
        });
        var td =
                function(a) {
                    qa = a;
                    a = r.O[a];
                    da.innerHTML = Hm(a.name);
                    H(Va, "active", a.va);
                    a.Ja ? (F(fb, "active"), H(fb, "stemless", !a.Cb)) : (G(fb, "active"), G(fb, "stemless"));
                    uh(a, !0, !1) ? (wf(Fc, "inline-block"), a.pb ? (F(Fc, "active"), H(Fc, "name-only", !a.hb)) : (G(Fc, "active"), G(Fc, "name-only"))) : wf(Fc, "none");
                    uh(a, !1, !0) ? (wf(Wa, "inline-block"), H(Wa, "active", a.Pa)) : wf(Wa, "none");
                    wc(a.qb);
                    Mb.value = 100 * a.volume;
                    bd(a);
                    a.Da ? (wf(fb, "inline-block"), B("track-tuning").innerHTML = ih(a), B("track-capo").innerHTML = a.Jb ? String(a.Jb) : "None", wf(la,
                        "block"), wf(Ca, "block")) : (wf(fb, "none"), wf(la, "none"), wf(Ca, "none"));
                    if (r.Nb) {
                        var b = !a.Xa;
                        F(B("tc-owneropts"), "active");
                        H(B("tc-owneroptsviolin"), "active", b);
                        B("tc-togglekeyboard").checked = a.zc;
                        b && (B("tc-toggleviolin").checked = a.oc)
                    }
                },
            Bb = function(a) {
                for (a = a.target; a;) {
                    if (a === Pa) return;
                    a = a.parentNode
                }
                Cb()
            },
            Cb = function() {
                G(Pa, "active");
                rc(window, "mousedown touchstart", Bb)
            },
            wc = function(a) {
                Ra[a] || (a = "0");
                Da.innerHTML = Ra[a];
                vm(Pa);
                (a = B("soundbutton" + a)) && F(a, "active")
            },
            Ia = function() {
                ub.length = 0;
                for (var b =
                        a.Aa, c = yn(a), d = 0, e = b.length, f = a.W, g = a.K.O, h = g.length, k, n, l, m, p,
                         q; d !== e; d++) {
                    k = b[d];
                    n = k.y + c + k.Aa + k.ya + k.sa + k.oa;
                    if (n > f) break;
                    if (!(0 > n + k.height))
                        for (l = 0; l !== h; l++)
                            if (m = g[l], p = n + Gk(k, l), q = k.ac[l], !(0 > p + q) && m.J && 0 !== q) {
                                if (p > f) break;
                                0 > p && (q += p, p = 0);
                                p + q > f && (q = f - p);
                                ub.push(p);
                                ub.push(q);
                                ub.push(l)
                            }
                }
                b = -1;
                c = 0;
                for (d = ub.length; c !== d; c += 3)
                    if (e = ub[c + 2], b = c / 3, f = Ea[b], f || (f = document.createElement("button"), f.className = "track-name small text-muted", Ea[b] = f, Lb.appendChild(f)), Wm(f, ub[c]), Vm(f, ub[c + 1]), wf(f, "block"),
                        Qb || f.getAttribute("data-trackidx") != e) f.setAttribute("data-trackidx", e), f.innerHTML = Hm(r.O[e].name);
                for (c = Ea.length; c-- > b + 1;) wf(Ea[c], "none");
                Qb = hb = !1
            };
        a.assign([60, 72], function(a) {
            a.data.index === qa && td(qa)
        }, [32, 48, 16], function() {
            Qb = !0;
            hb || (hb = !0, window.requestAnimationFrame(Ia))
        }, [49, 73, 35], function() {
            hb || (hb = !0, window.requestAnimationFrame(Ia))
        }, [56], function(a) {
            a = a.data;
            for (var b = "", c = 0, d = a.length, e,
                     f; c !== d; c++) e = a[c], f = e[2] ? ' <span class="synth-descriptor">' + e[2] + "</span>" : "", b += '<li><button id="soundbutton' +
                e[0] + '" data-font="' + e[0] + '">' + e[1] + f + "</button></li>", Ra[e[0]] = e[1] + f;
            Pa.innerHTML = b
        }, [3], function() {
            wf(B("synthcontrols"), "block")
        });
        u(Lb, "mousedown touchstart", xf(function(a) {
            a = a.target.getAttribute("data-trackidx");
            F(v, "track-settings-active");
            td(parseInt(a, 10))
        }));
        u(B("close-track-settings"), "mousedown touchstart", xf(function() {
            a.dispatch(15);
            G(v, "track-settings-active")
        }));
        u(Va, "mousedown touchstart", xf(function() {
            mh(r.O[qa])
        }));
        u(fb, "mousedown touchstart", xf(function() {
            nh(r.O[qa])
        }));
        u(Fc,
            "mousedown touchstart", xf(function() {
                kh(r.O[qa])
            }));
        u(Wa, "mousedown touchstart", xf(function() {
            var a = r.O[qa];
            a.Pa = !a.Pa;
            hh(a, !1)
        }));
        u(B("synthsound-selector"), "mousedown touchstart", xf(function(a) {
            a = B(Rm(a.target, "data-menu"));
            F(a, "active");
            u(window, "mousedown touchstart", Bb)
        }));
        u(Pa, "click", xf(function(b) {
            a.m.g.N && rk(a.m) || Cb();
            b = Rm(b.target, "data-font");
            var c = r.O[qa];
            c.qb = parseInt(b, 10);
            c.o.dispatch(13, c);
            wc(b)
        }));
        var Na = function() {
                r.O[qa].setVolume(parseInt(Mb.value, 10) / 100)
            },
            ac = function(a) {
                var b =
                    a.target;
                a.preventDefault();
                b.blur();
                a = Rm(b, "data-step");
                Mb.value = parseInt(Mb.value, 10) + parseInt(a, 10);
                Na()
            };
        u(Mb, "input", Na, "change", Am);
        u(B("trackvoldown"), "mousedown touchstart", ac);
        u(B("trackvolup"), "mousedown touchstart", ac);
        if (r.Nb) {
            var ib = B("synth-default-button");
            ib && (a.assign([13, 60], function(a) {
                a.data === r.O[qa] && F(ib, "active")
            }), u(ib, "mousedown touchstart", xf(function() {
                var a = r.O[qa];
                h([
                    [
                        ["tracks", qa, "midi"], a.qb
                    ],
                    [
                        ["tracks", qa, "vol"], Math.round(100 * a.volume)
                    ]
                ]);
                G(ib, "active")
            })))
        }
        var bd =
            function(a) {
                var b = Math.floor(a.xb / 12);
                a = B("transkey" + (a.xb + 60) % 12);
                vm(mc);
                F(a, "active");
                B("transkeyval").innerHTML = a.innerHTML;
                vm(Qa);
                a = B("transoct" + b);
                F(a, "active");
                B("transoctval").innerHTML = a.innerHTML
            };
        u(vc, "mousedown touchstart", xf(function(a) {
            a = B(Rm(a.target, "data-menu"));
            F(a, "active");
            u(window, "mousedown touchstart", Y)
        }));
        u(mc, "click", xf(function(a) {
            a = parseInt(Rm(a.target, "data-val"), 10);
            var b = r.O[qa];
            b.xb += a - (b.xb + 60) % 12;
            b.o.dispatch(71, b.index);
            bd(b);
            oa()
        }));
        var Y = function(a) {
                hm(a.target,
                    mc) || oa()
            },
            oa = function() {
                G(mc, "active");
                rc(window, "mousedown touchstart", Y)
            };
        u(nc, "mousedown touchstart", xf(function(a) {
            a = B(Rm(a.target, "data-menu"));
            F(a, "active");
            u(window, "mousedown touchstart", bc)
        }));
        u(Qa, "click", xf(function(a) {
            a = parseInt(Rm(a.target, "data-val"), 10);
            var b = r.O[qa];
            b.xb += 12 * (a - Math.floor(b.xb / 12));
            b.o.dispatch(71, b.index);
            bd(b);
            Wb()
        }));
        var bc = function(a) {
                hm(a.target, Qa) || Wb()
            },
            Wb = function() {
                G(Qa, "active");
                rc(window, "mousedown touchstart", bc)
            };
        if (r.Nb) {
            var Rb = B("trans-default-button");
            Rb && (a.assign([71], function(a) {
                a.data === qa && F(Rb, "active")
            }), u(Rb, "mousedown touchstart", xf(function() {
                h([
                    [
                        ["tracks", qa, "transpose"], r.O[qa].xb
                    ]
                ]);
                G(Rb, "active")
            })))
        }
        var dc = B("track-name-edit"),
            jb = B("track-name-input"),
            Db = B("track-default-button"),
            ja = function(b) {
                if ("mousedown" === b.type)
                    for (b = b.target; b;) {
                        if (b === jb) return;
                        b = b.parentNode
                    } else if ("keydown" === b.type)
                    if (27 === b.which) jb.value = r.O[qa].name;
                    else if (13 !== b.which) return;
                b = jb.value.trim() || "Untitled";
                r.O[qa].name = b;
                da.innerHTML = Hm(b);
                G(jb, "active");
                F(dc, "active");
                wf(da, "inline");
                rc(window, "mousedown keydown", ja);
                a.unassign([15], ja);
                a.dispatch(48);
                h([
                    [
                        ["tracks", qa, "name"], b
                    ]
                ])
            };
        dc && r.Nb && (F(dc, "active"), u(dc, "mousedown touchstart", xf(function() {
            G(dc, "active");
            wf(da, "none");
            jb.value = r.O[qa].name;
            F(jb, "active");
            jb.focus();
            jb.select();
            u(window, "mousedown keydown", ja);
            a.assign([15], ja)
        })));
        Db && r.Nb && (a.assign([72], function() {
            F(Db, "active")
        }), u(Db, "mousedown touchstart", xf(function() {
            var a = r.O[qa],
                b = [
                    [
                        ["tracks", qa, "ds"], a.va ? 1 : 0
                    ]
                ];
            gh(a) && b.push([
                ["tracks",
                    qa, "dt"
                ], a.Cb ? 2 : a.Ja ? 1 : 0
            ]);
            uh(a, !0, !1) && b.push([
                ["tracks", qa, "dc"], a.hb ? 2 : a.pb ? 1 : 0
            ]);
            uh(a, !1, !0) && b.push([
                ["tracks", qa, "dl"], a.Pa ? 1 : 0
            ]);
            h(b);
            G(Db, "active")
        })));
        if (r.Nb) {
            var hd = B("owneropts-save-button");
            hd && (u(B("tc-togglekeyboard"), "change", function(a) {
                a = a.target;
                r.O[qa].zc = a.checked;
                Kb();
                a.blur();
                F(hd, "active")
            }), u(B("tc-toggleviolin"), "change", function(a) {
                a = a.target;
                r.O[qa].oc = a.checked;
                Kb();
                a.blur();
                F(hd, "active")
            }), u(hd, "mousedown touchstart", xf(function() {
                var a = r.O[qa];
                h([
                    [
                        ["tracks", qa, "vk"],
                        a.zc ? 1 : 0
                    ],
                    [
                        ["tracks", qa, "vi"], a.oc ? 1 : 0
                    ]
                ]);
                G(hd, "active")
            })))
        }
    }
    if (document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled) {
        var oc = !1;
        G(V, "hidden");
        u(V, "mousedown touchstart", xf(function() {
            var a, b, c, d;
            oc ? (a = document, b = ["msExitFullscreen", "mozCancelFullScreen", "webkitExitFullscreen", "exitFullscreen"]) : (a = document.documentElement, b = ["msRequestFullscreen", "mozRequestFullScreen", "webkitRequestFullscreen", "requestFullscreen"]);
            for (c = b.length; c--;)
                if (d =
                        b[c], a[d]) {
                    a[d]();
                    break
                }
        }));
        u(window, "webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange", function() {
            (oc = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) && p(!1);
            H(V, "active", oc)
        })
    }
    H(v, "hasnotation", a.hc);
    ea ? (u(ba, "mousedown touchstart", xf(function() {
        zn(a, !a.da, !0)
    })), a.assign([43], function() {
        G(ba, "active")
    }, [40], function() {
        F(ba, "active")
    })) : G(ba, "active");
    var pb = document.getElementsByClassName("artist-info")[0];
    if ("0" !== b.show_title) {
        var Xb = Hm(r.Wb);
        r.Sb && (Xb += ' <span class="artist-name">' + Hm(r.Sb) + "</span>");
        r.fc && (Xb += ' <span class="badge">Cover</span>');
        pb.innerHTML = Xb
    } else wm(pb), F(w, "short-footer");
    if (r.Fc) {
        var Mc = B("coursenav"),
            Sb = r.Fc;
        Mc.innerHTML = '<a class="btn-secondary left-edge" href="' + Sb.p[0] + '"><span class="prevarrow">&larr;</span> <span class="only7col">' + Hm(Sb.p[1]) + '</span></a><a class="btn-secondary" href="' + Sb.url + '">' + Hm(Sb.name) + '</a><a class="btn-secondary right-edge" href="' + Sb.n[0] +
            '"><span class="only7col">' + Hm(Sb.n[1]) + '</span> <span class="nextarrow">&rarr;</span></a>';
        wf(Mc, "block")
    }
};
/*
 Copyright 2018 Soundslice LLC */
var B = utils.gid,
    Re = utils.dispatch,
    rc = utils.unassign,
    F = utils.addClass,
    G = utils.removeClass,
    H = utils.addRemoveClass,
    Tc = utils.ajax,
    Tm = utils.elOffset,
    Hm = utils.makeSafe,
    Rm = utils.getDataAttribute,
    An = [2, 4, 5, 7],
    Bn = [null, [76, 69, 62, 55],
        [79, 72, 65, 59],
        [81, 74, 67, 60],
        [83, 76, 69, 62],
        [84, 77, 71, 64],
        [86, 79, 72, 65],
        [88, 81, 74, 67]
    ],
    Wi = [null, 0, 1, -1, 2, -2, 3, -3],
    ej = {
        0: 1,
        1: 2,
        "-1": 3,
        2: 4,
        "-2": 5,
        3: 6,
        "-3": 7
    },
    Cn = [null, "", "#", "b", "##", "bb", "###", "bbb"],
    Dn = [null, 57953, 57954, 57952, 57955, 57956, 57957, 57958],
    En = [null, 0, 0, 0, 0, .5, 1, 1.5],
    Fn = [57472, 57473, 57474, 57475, 57476, 57477, 57478, 57479, 57480, 57481],
    vj = [57920, 57922, 57924, 57926, 57928, 57930, 57921, 57923, 57925, 57927, 57929, 57931],
    Gn = [0, 0, 58732, 58733, 58727, 58728, 58734, 58805, 58822, 58811, 58824, 58808, 58823, 58813, 58800],
    Hn = [null, 58960, 58965],
    In = [59520, 59521, 59522, 59523, 59524, 59525, 59526, 59527, 59528, 59529],
    Jn = [57888, 57889, 57890, 57898],
    yi = [null, 57506, 57507, 57508, 57513, 57563, 57561, 57560, 57565, 57591, 57523, 57593, 57601, 57600, 57514, 57604, 57512, 57511, 57504],
    Gi = [null, null, [1.18, .168, 0, -.168],
        [1.18, .168,
            0, -.168
        ],
        [1.16, .444, 0, -.44],
        [1, 0, 0, 0],
        [1.004, 0, 0, 0], null, [1, 0, 0, 0],
        [1, 0, .004, 0],
        [.996, 0, 0, 0],
        [1.54, .456, 0, -.436],
        [2.12, 1, 0, -1],
        [1.46, .656, 0, -.664],
        [.988, .316, 0, -.312],
        [2, 0, 0, 0],
        [1.336, .412, 0, -.412], null, null
    ],
    Kn = [58564, 58560, 58566],
    wl = [null, 58641, 58652, 58645, 58646],
    Ln = {
        f: 58658,
        ff: 58671,
        fff: 58672,
        ffff: 58673,
        fp: 58676,
        fz: 58677,
        mf: 58669,
        mp: 58668,
        p: 58656,
        pp: 58667,
        ppp: 58666,
        pppp: 58665,
        sf: 58678,
        sffz: 58683,
        sfz: 58681
    },
    Mn = {
        15: [57819, !1],
        22: [57819, !0],
        30: [57817, !1],
        45: [57817, !0],
        60: [57815, !1],
        90: [57815, !0],
        120: [57840, !1],
        180: [57840, !0],
        240: [57811, !1],
        360: [57811, !0]
    },
    Cj = {
        "1/2": 1,
        "1/4": 1,
        "1/8": 1,
        "1/16": 1
    },
    Nn = [0, "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X", "XI", "XII", "XIII", "XIV", "XV", "XVI", "XVII", "XVIII", "XIX", "XX"],
    On = {
        1: "Da Capo",
        2: "D.C. al Coda",
        3: "D.C. al Double Coda",
        4: "D.C. al Fine",
        5: "Da Segno",
        6: "D.S. al Coda",
        7: "D.S. al Double Coda",
        8: "D.S. al Fine",
        9: "Da Segno Segno",
        10: "D.S.S. al Coda",
        11: "D.S.S. al Double Coda",
        12: "D.S.S. al Fine",
        13: "Da Coda",
        14: "Da Double Coda",
        19: "fine"
    },
    Pn = [15, 17,
        16, 18
    ],
    tl = Math.log(2),
    pg = Math.PI,
    Qn = {
        25: "\u00bc",
        50: "\u00bd",
        75: "\u00be",
        100: "1",
        125: "1\u00bc",
        150: "1\u00bd",
        175: "1\u00be",
        200: "2",
        225: "2\u00bc",
        250: "2\u00bd",
        275: "2\u00be",
        300: "3"
    },
    Rn = {
        0: "0",
        1: "\u00bd",
        2: "1",
        3: "1\u00bd",
        4: "2",
        5: "2\u00bd",
        6: "3",
        7: "3\u00bd",
        8: "4",
        9: "4\u00bd",
        10: "5",
        11: "5\u00bd",
        12: "6",
        13: "6\u00bd",
        14: "7",
        15: "7\u00bd",
        16: "8"
    },
    Sn = {
        2: "A.H.",
        3: "P.H.",
        4: "T.H.",
        5: "S.H.",
        6: "Fdbk."
    },
    Tn = ["T", "P", "S"],
    Uk = {
        t8: .5 / 3 - .125,
        t16: .25 / 3 - .0625,
        d8: .0625,
        d16: .03125,
        s8: -.0625,
        s16: -.03125
    },
    hj = {
        "2.4": 34,
        "2.7": 31,
        "3.2": 28,
        4: 24,
        5: 19,
        "5.8": 29,
        7: 12,
        "8.2": 28,
        9: 19,
        "9.6": 24,
        12: 0,
        "14.7": 19,
        16: 12,
        17: 19,
        19: 0,
        "21.7": 12,
        24: 0
    },
    Vi = [0, -12, 12, -24, 24],
    Un = {
        5: 0,
        1: 2
    },
    cj = [115, 113, 112, 110, 108, 107, 105, 103, 101, 100, 98, 96, 95, 93, 91, 89, 88, 86, 84, 83, 81, 79, 77, 76, 74, 72, 71, 69, 67, 65, 64, 62, 60, 59, 57, 55, 53, 52, 50, 48, 47, 45, 43, 41, 40, 38, 36, 35, 33, 31, 29, 28, 26, 24, 23, 21, 19, 17, 16, 14, 12, 11, 9, 7, 5, 4, 2, 0],
    dj = {
        0: [
            [], null, 0, 0
        ],
        1: [
            [5], 2, 7, 4
        ],
        2: [
            [5, 0], 2, 2, 1
        ],
        3: [
            [5, 0, 7], 2, 9, 5
        ],
        4: [
            [5, 0, 7, 2], 2, 4, 2
        ],
        5: [
            [5, 0, 7, 2, 9], 2, 11, 6
        ],
        6: [
            [5, 0, 7, 2, 9, 4], 2, 6, 3
        ],
        7: [
            [5, 0, 7, 2, 9, 4,
                11
            ], 2, 1, 0
        ],
        "-7": [
            [11, 4, 9, 2, 7, 0, 5], 3, 11, 0
        ],
        "-6": [
            [11, 4, 9, 2, 7, 0], 3, 6, 4
        ],
        "-5": [
            [11, 4, 9, 2, 7], 3, 1, 1
        ],
        "-4": [
            [11, 4, 9, 2], 3, 8, 5
        ],
        "-3": [
            [11, 4, 9], 3, 3, 2
        ],
        "-2": [
            [11, 4], 3, 10, 6
        ],
        "-1": [
            [11], 3, 5, 3
        ]
    },
    Vn = {
        G1: [
            [2, 5, 1, 4, 0, 3, -1],
            [6, 3, 7, 4, 1, 5, 2]
        ],
        G2: [
            [0, 3, -1, 2, 5, 1, 4],
            [4, 1, 5, 2, 6, 3, 7]
        ],
        H2: [
            [0, 3, -1, 2, 5, 1, 4],
            [4, 1, 5, 2, 6, 3, 7]
        ],
        F3: [
            [4, 0, 3, -1, 2, 5, 1],
            [1, 5, 2, 6, 3, 7, 4]
        ],
        F4: [
            [2, 5, 1, 4, 7, 3, 6],
            [6, 3, 7, 4, 8, 5, 9]
        ],
        H4: [
            [2, 5, 1, 4, 7, 3, 6],
            [6, 3, 7, 4, 8, 5, 9]
        ],
        F5: [
            [0, 3, -1, 2, 5, 1, 4],
            [4, 1, 5, 2, 6, 3, 7]
        ],
        C1: [
            [5, 1, 4, 0, 3, -1, 2],
            [2, -1, 3, 0, 4, 1, 5]
        ],
        C2: [
            [3, 6, 2, 5,
                1, 4, 0
            ],
            [0, 4, 1, 5, 2, 6, 3]
        ],
        C3: [
            [1, 4, 0, 3, 6, 2, 5],
            [5, 2, 6, 3, 7, 4, 8]
        ],
        C4: [
            [6, 2, 5, 1, 4, 0, 3],
            [3, 0, 4, 1, 5, 2, 6]
        ]
    },
    ch = ["C Db D Eb E F Gb G Ab A Bb B".split(" "), "C C# D D# E F F# G G# A A# B".split(" ")],
    dh = {
        CB: 11,
        C: 0,
        "C#": 1,
        DB: 1,
        D: 2,
        "D#": 3,
        EB: 3,
        E: 4,
        "E#": 5,
        FB: 4,
        F: 5,
        "F#": 6,
        GB: 6,
        G: 7,
        "G#": 8,
        AB: 8,
        A: 9,
        "A#": 10,
        BB: 10,
        B: 11,
        "B#": 0
    },
    Si = [0, 1, 1, 2, 2, 3, 4, 4, 5, 5, 6, 6],
    xk = [
        [0, 0],
        [7, -5],
        [2, 2],
        [-3, -3],
        [4, 4],
        [-1, -1],
        [6, -6],
        [1, 1],
        [-4, -4],
        [3, 3],
        [-2, -2],
        [5, -7]
    ];
(function() {
    for (var a = 0, b = ["moz", "ms", "o", "webkit"],
             c; !window.requestAnimationFrame && (c = b.pop());) window.requestAnimationFrame = window[c + "RequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(b) {
        var c = (new Date).getTime(),
            f = Math.max(0, 16 - (c - a)),
            g = window.setTimeout(function() {
                b(c + f)
            }, f);
        a = c + f;
        return g
    })
})();

function og(a) {
    return Math.sin(a / 180 * pg)
}

function Wn(a, b) {
    var c = a.length,
        d = c;
    if (c !== b.length) return !1;
    for (; d--;)
        if (a[d] !== b[d]) return !1;
    return !0
}

function fj(a, b) {
    for (var c = a.length; c--;)
        if (a[c] === b) return !0;
    return !1
}

function Wl(a, b) {
    b.length && (b.length = 0);
    for (var c = 0, d = a.length; c !== d; c++) b[c] = a[c]
}

function Qi(a, b) {
    var c = a.length,
        d;
    for (d = 0; d !== c; d++)
        if (a[d] === b) return d;
    return -1
}

function Wm(a, b) {
    a.style.top = b + "px"
}

function Xn(a, b) {
    a.style.left = b + "px"
}

function Vm(a, b) {
    a.style.width = b + "px"
}

function Um(a, b) {
    a.style.height = b + "px"
}

function wf(a, b) {
    a.style.display = b
}

function jn(a, b, c, d, e) {
    var f, g, h, k, l, m, n, p;
    if (e = e && "ontouchstart" in window) {
        var q;
        m = "touchmove";
        n = "touchstart";
        p = "touchend"
    } else m = "mousemove", n = "mousedown", p = "mouseup";
    u(a, n, function(n) {
        if (2 !== n.which && 3 !== n.which) {
            n.preventDefault();
            Re("BLUR_ALL");
            f = Tm(a);
            e ? 1 === n.targetTouches.length && (q = n.targetTouches[0], g = k = q.pageX - f.left, h = l = q.pageY - f.top, b(g, h, n)) : (g = k = n.pageX - f.left, h = l = n.pageY - f.top, b(g, h, n));
            var t = function(a) {
                    a.preventDefault();
                    e ? 1 === a.targetTouches.length && (q = a.targetTouches[0], k = q.pageX -
                            f.left, l = q.pageY - f.top, c(k, l)) : (k = a.pageX - f.left, l = a.pageY - f.top, c(k, l))
                },
                w = function() {
                    rc(window, m, t);
                    rc(window, p, w);
                    w = t = null;
                    d(k, l, g === k && h === l)
                };
            u(window, m, t);
            u(window, p, w)
        }
    })
}

function xf(a) {
    return function(b) {
        b.stopPropagation();
        b.preventDefault();
        !0 !== b.g && (a(b), b.g = !0)
    }
}

function Yn(a, b) {
    u(a, "mousewheel DOMMouseScroll", function(a) {
        var d = 0,
            e = 0;
        "undefined" !== typeof a.wheelDeltaX && "undefined" !== typeof a.wheelDeltaY ? (d = -.1 * a.wheelDeltaX, e = -.1 * a.wheelDeltaY) : null !== a.axis && (a.axis === a.HORIZONTAL_AXIS ? d = 2.2 * a.detail : e = 2.2 * a.detail);
        b(d, e) && a.preventDefault()
    })
}

function Zn() {
    this.ib || (requestAnimationFrame(this.bc), this.ib = !0)
}

function $n() {
    var a = this.ma,
        b = this.o,
        c = b.W,
        b = b.L,
        d = "CANVAS" == a.tagName;
    this.width !== b && (d && (a.width = b * J), Vm(a, b), this.width = b);
    this.height !== c && (d && (a.height = c * J), Um(a, c), this.height = c);
    this.xa && this.xa()
}

function ao() {
    var a = window.location.search || "",
        b = {};
    "?" === a.charAt(0) && (a = a.substring(1));
    if (!a) return b;
    var a = a.replace(/\+/g, " "),
        a = a.split(/&/g),
        c, d, e, f;
    c = 0;
    for (d = a.length; c !== d; c++) e = a[c].split("="), f = decodeURIComponent(e[0]), e = 1 < e.length ? decodeURIComponent(e[1]) : "", b[f] = e;
    return b
}

function bo(a) {
    J = (window.devicePixelRatio || 1) / (a.backingStorePixelRatio || a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1)
}

function ym() {
    var a = document.activeElement.tagName;
    return "INPUT" === a || "TEXTAREA" === a
}

function cn() {
    return null !== document.querySelector(".modal.active")
}

function eg(a, b, c, d, e) {
    var f = a.g;
    if (e && (d && b < c - f / 2 || !d && b > c + a.Y + f / 2)) return b;
    a = c + f * Math.round((b - c) / f);
    Math.abs(b - a) < .26 * f && (b = d ? a - f / 2 : a + f / 2);
    return b
}

function eh(a, b, c) {
    for (var d = a.length, e = d, f = null, g = null, h = [], k; e--;)
        if (k = a[e], null !== k) {
            if (null === f || k < f) f = k;
            if (null === g || k > g) g = k
        }
    if (null !== g)
        if (5 > g - f && 0 <= f + b)
            for (e = 0, f = d; e !== f; e++) h[e] = null !== a[e] ? a[e] + b : null;
        else {
            e = 0;
            for (f = d; e !== f; e++) h[e] = null;
            for (e = d; e--;)
                if (k = a[e], null !== k)
                    for (f = c[d - e - 1] + k + b, g = d; g--;)
                        if (!(0 > b && g > e) && null === h[g] && c[d - g - 1] <= f) {
                            h[g] = f - c[d - g - 1];
                            break
                        }
        }
    return h
}

function gj(a) {
    return 1 === a || 3 === a || 6 === a || 8 === a || 10 === a
}
var bj = {
        0: 0,
        2: 1,
        4: 2,
        5: 3,
        7: 4,
        9: 5,
        11: 6
    },
    co = "CDEFGAB".split("");

function yj(a) {
    return "-" === a.charAt(a.length - 1) ? a.substring(0, a.length - 1) : a
}

function ul(a) {
    var b = 0,
        c = 1,
        d, e, f, g;
    for (e = a.length; e--;)
        if (g = a[e], g.ta) b += (g.track.g - 1) / 2, c++;
        else
            for (d = g.X, f = d.length, c += f; f--;) b += d[f].qa, g.ga || null === g.W || (b += 0 === g.W ? 4 : -4);
    return b / c
}

function sk(a, b) {
    return a.value === b.value && null !== a.ra ? a.ra - b.ra : a.value - b.value
}

function vl(a, b) {
    return b[1] - a[1]
}

function $l(a, b) {
    return a.Ta === b.Ta ? a.za - b.za : a.Ta - b.Ta
}

function Pf(a, b) {
    return a.track !== b.track ? a.track.index - b.track.index : a.ha !== b.ha ? a.ha - b.ha : a.P !== b.P ? a.P.$ - b.P.$ : a.fa - b.fa
}

function Pk(a, b) {
    return zg(a.g, b.g) ? 1 : -1
}

function vi(a, b) {
    this.x = a;
    this.y = b
}
var eo = {};

function fo(a, b) {
    return b ? fo(b, a % b) : a
}

function Nf(a, b) {
    var c = fo(a, b);
    1 !== c && (a /= c, b /= c);
    c = a + "-" + b;
    eo[c] || (eo[c] = new go(a, b));
    return eo[c]
}

function go(a, b) {
    this.m = a;
    this.g = b;
    this.Ea = a / b
}
go.prototype = {
    add: function(a) {
        return this.g === a.g ? Nf(this.m + a.m, this.g) : Nf(this.m * a.g + a.m * this.g, this.g * a.g)
    }
};

function Dj(a) {
    return a.m + "/" + a.g
}

function $k(a, b) {
    return a.g === b.g ? 0 === a.m % b.m : 0 === a.m * b.g % (b.m * a.g)
}

function Ej(a, b) {
    return a.g === b.g ? a.m >= b.m : a.m * b.g >= b.m * a.g
}

function zg(a, b) {
    return a.g === b.g ? a.m > b.m : a.m * b.g > b.m * a.g
}

function Cl(a, b) {
    return Nf(a.m * b.g, a.g * b.m)
}

function Vk(a, b) {
    return a.g === b.g ? Nf(a.m - b.m, a.g) : Nf(a.m * b.g - b.m * a.g, a.g * b.g)
}
var Ag = Nf(0, 4),
    Fj = Nf(1, 2),
    Yk = Nf(1, 4),
    Wk = Nf(1, 8),
    Xk = Nf(1, 16),
    Zk = Nf(1, 32),
    J = -1;

function ho(a, b, c) {
    a.clearRect(0 * J, 0 * J, b * J, c * J)
}

function K(a, b, c, d, e) {
    a.fillRect(b * J, c * J, d * J, e * J)
}

function io(a, b, c, d, e) {
    a.font = (d ? "bold " : "") + (e ? "italic " : "") + b * J + "px " + (1 === c ? "soundslice" : 2 === c ? "proxima-nova,sans-serif" : 3 === c ? "georgia,serif" : "times new roman,times,serif")
}

function jo(a, b, c, d) {
    a.fillText(b, c * J, d * J)
}

function ko(a, b, c) {
    var d = [];
    b = b.split(/\s+/);
    for (var e = 0, f = b.length, g = 0, h,
             k; e !== f; e++) k = b[e], 0 === e ? d.push(k) : (h = d[g] + " " + k, a.measureText(h).width / J > c ? (d.push(k), g++) : d[g] = h);
    return d
}

function lo(a, b, c) {
    a.moveTo(b * J, c * J)
}

function mo(a, b, c) {
    a.lineTo(b * J, c * J)
}

function no(a, b, c, d, e) {
    a.beginPath();
    a.arc(b * J, c * J, d * J, 0, 2 * pg, !1);
    a.fill();
    e && a.stroke();
    a.closePath()
}

function oo(a, b, c, d, e, f, g, h, k, l) {
    a.beginPath();
    a.moveTo(b * J, c * J);
    a.lineTo(d * J, e * J);
    a.lineTo(f * J, g * J);
    a.lineTo(h * J, k * J);
    l ? a.fill() : (a.lineTo(b * J, c * J), a.stroke());
    a.closePath()
}

function po(a, b, c, d, e, f) {
    b += 1;
    c += 1;
    d -= 2;
    e -= 2;
    a.beginPath();
    lo(a, b + f, c);
    mo(a, b + d - f, c);
    qo(a, b + d, c, b + d, c + f);
    mo(a, b + d, c + e - f);
    qo(a, b + d, c + e, b + d - f, c + e);
    mo(a, b + f, c + e);
    qo(a, b, c + e, b, c + e - f);
    mo(a, b, c + f);
    qo(a, b, c, b + f, c);
    a.closePath();
    a.stroke();
    a.fill()
}

function qo(a, b, c, d, e) {
    a.quadraticCurveTo(b * J, c * J, d * J, e * J)
}

function ro(a, b, c, d, e, f, g) {
    a.bezierCurveTo(b * J, c * J, d * J, e * J, f * J, g * J)
}

function so(a, b, c, d, e, f, g, h, k, l) {
    var m = Qi(f.ka, e),
        n = f.ka[m + 1],
        p = 0 === m,
        q, r;
    p && K(a, b, c - (d ? 0 : k), h - b, k);
    for (q = ri(e); 1 < q--;) {
        if (n && !n.ta && ri(n) > q) e = b, h = g;
        else if (n && (p || ri(f.ka[m - 1]) <= q)) e = b, h = b + l;
        else if (0 !== m && (f.ka[m - 1].ta || ri(f.ka[m - 1]) <= q)) e = b - l, h = b;
        else continue;
        r = d ? 0 : -k;
        r += c + 1.5 * (d ? 1 : -1) * k * q;
        K(a, e, r, h - e, k)
    }
}

function to(a, b, c, d, e, f, g, h, k, l) {
    f = b + f;
    e = mg(b, c, f, d, e, g, h, k, l);
    a.lineWidth = 1 * J;
    a.beginPath();
    lo(a, b, c);
    ro(a, e[0], e[1], e[2], e[3], f, d);
    a.stroke();
    a.beginPath();
    lo(a, b, c);
    ro(a, e[4], e[5], e[6], e[7], f, d);
    ro(a, e[10], e[11], e[8], e[9], b, c);
    a.fill();
    a.closePath()
}

function uo() {
    var a = document.createElement("canvas");
    a.width = 10;
    a.height = 10;
    this.ma = a;
    this.m = a.getContext("2d");
    this.g = {}
}
uo.prototype = {
    width: function(a, b, c, d, e) {
        var f = (d ? "1" : "0") + (e ? "1_" : "0_") + a + "_" + b + "_" + c;
        this.g[f] || (io(this.m, a, b, d, e), this.g[f] = this.m.measureText(c).width / J);
        return this.g[f]
    }
};
var zj = new uo;

function vo(a) {
    var b = document.createElement("canvas");
    b.width = 300;
    b.height = 300;
    this.o = a;
    this.ma = b;
    this.m = this.ma.getContext("2d");
    this.g = {};
    wo(this)
}
vo.prototype = {
    width: function(a) {
        this.g[a] || (this.g[a] = this.m.measureText(String.fromCharCode(a)).width / J);
        return this.g[a]
    }
};

function xo(a, b, c, d, e, f) {
    io(b, a.o.Y * f, 1);
    jo(b, String.fromCharCode(c), d, e)
}

function yo(a, b, c, d, e) {
    var f = "",
        g, h;
    g = 0;
    for (h = c.length; g < h; g++) f += String.fromCharCode(c[g]);
    io(b, 1 * a.o.Y, 1);
    jo(b, f, d, e)
}

function zo(a, b, c, d, e) {
    io(b, a.o.Y, 1);
    jo(b, String.fromCharCode(c), d, e)
}

function wo(a) {
    ho(a.m, 300, 300);
    io(a.m, a.o.Y, 1);
    a.g = {}
}

function Ao(a, b) {
    for (var c = a.toString(), d = 0, e = c.length; d !== e; d++) b.push(Fn[parseInt(c[d], 10)])
}

function sl(a, b) {
    for (var c = 0; 0 < b;) c += a.width(Fn[b % 10]), b = Math.floor(b / 10);
    return c
}
var yg = {
        1: [3, 2],
        2: [7, 4],
        3: [15, 8],
        4: [31, 16]
    },
    sg = {
        2: 58594,
        1: 58595,
        "0.5": 58596,
        "0.25": 58597,
        "0.125": 58598,
        "0.0625": 58599,
        "0.03125": 58600,
        "0.015625": 58601,
        "0.0078125": 58602,
        "0.00390625": 58603
    },
    tg = {
        2: 0,
        1: 0,
        "0.5": 0,
        "0.25": 0,
        "0.125": 1,
        "0.0625": 2,
        "0.03125": 3,
        "0.015625": 4,
        "0.0078125": 5,
        "0.00390625": 6
    },
    rg = {
        2: 1,
        1: 1,
        "0.5": 2,
        "0.25": 4,
        "0.125": 8,
        "0.0625": 16,
        "0.03125": 32,
        "0.015625": 64,
        "0.0078125": 128,
        "0.00390625": 256
    },
    vg = {
        2: 1,
        1: 1,
        "0.5": 1,
        "0.25": 2,
        "0.125": 1,
        "0.0625": 1,
        "0.03125": 2,
        "0.015625": 2,
        "0.0078125": 3,
        "0.00390625": 3
    },
    xg = {
        2: 1,
        1: 1,
        "0.5": 0,
        "0.25": 2,
        "0.125": 1,
        "0.0625": 2,
        "0.03125": 2,
        "0.015625": 3,
        "0.0078125": 3,
        "0.00390625": 4
    };

function Gl(a, b, c) {
    for (var d = 0, e; b--;)
        if (e = c[b], e.m) {
            d += e.R;
            break
        } else if (null !== e.Ma[a]) {
            d += e.width - e.Ma[a].gd;
            break
        } else d += e.width;
    return d
}

function Jl(a) {
    this.o = a;
    this.Ma = [];
    this.$b = 0;
    this.offset = Ag;
    this.R = this.I = this.jb = this.W = 0;
    this.L = this.m = this.J = !1;
    this.g = 0;
    this.duration = Ag;
    this.x = this.N = this.width = this.Y = this.T = 0
}
Jl.prototype = {};

function pl(a, b, c, d, e, f, g, h, k) {
    a.Ma.length = 0;
    a.$b = b;
    a.offset = c;
    a.W = d;
    a.jb = 16 !== b && 14 !== b ? Math.ceil(e) : e;
    a.I = 0;
    a.R = f;
    a.J = g;
    a.m = 1 !== b && 16 !== b && 14 !== b;
    a.L = h;
    a.g = k;
    a.duration = Ag;
    a.T = 0;
    a.Y = 0;
    a.width = 0;
    a.N = 0;
    a.x = 0
}

function Bo(a, b) {
    this.o = a;
    this.K = b;
    this.height = this.width = this.$ = 0;
    this.U = null;
    this.oa = this.sa = this.ya = this.Aa = this.y = 0;
    this.W = [];
    this.m = [];
    this.N = [];
    this.I = [];
    this.R = [];
    this.g = [];
    this.J = [];
    this.ia = [];
    this.Y = [];
    this.da = [];
    this.ea = [];
    this.T = [];
    this.la = [];
    this.pa = [];
    this.na = [];
    this.aa = [];
    this.L = [];
    this.Ia = [];
    this.ac = []
}
Bo.prototype = {};

function Co(a, b) {
    var c = a.U,
        d, e, f = 0;
    d = 0;
    for (e = c.length; d < e; d++) c[d].x = f, f += xl(c[d], !1, b);
    return f
}

function Do(a, b) {
    for (var c = a.U, d = 0, e = c.length, c = c[0],
             f; d !== e && !(f = a.U[d], f.width && (c = f), f.x + f.width > b); d++);
    return c
}

function Eo(a) {
    for (var b = 0, c = a.K.O, d = c.length, e = 0, f; b < d;) {
        f = c[b];
        if (Fo(a, b, f)) {
            e = Gk(a, b) + a.W[b] + a.m[b];
            if (f.va) return e + a.N[b] + a.I[b] + a.R[b] + a.g[b];
            f.Pa && (e += a.T[b]);
            if (f.Ja) return e + a.la[b] + a.pa[b] + a.na[b] + a.aa[b] + a.L[b]
        }
        b++
    }
    return e
}

function Fo(a, b, c) {
    return c.J && 0 !== a.U.length && a.U[0].O[b].Ka
}

function Gk(a, b) {
    for (var c = a.K.O, d = 0, e = 0, f; d < b;)(f = a.ac[d]) && (e += f + rh(c[d])), d++;
    return e
}

function Go(a) {
    this.o = a;
    this.ma = bf(a, "playhead");
    this.g = this.ib = !1;
    var b = this;
    this.bc = function() {
        Ho(b);
        b.ib = !1
    };
    a.assign([67], function() {
        Ho(b)
    }, [43], function() {
        b.g = !0
    }, [51], function() {
        b.g = !0;
        b.xa()
    }, [40, 73, 30, 35, 49], function() {
        b.xa()
    })
}
Go.prototype = {
    xa: Zn
};

function Ho(a) {
    if (!a.o.da) {
        var b = a.o,
            c = b.K,
            d = a.ma,
            e, f;
        if (!a.g || b.N && !rk(b.m)) Um(d, 0);
        else if (a = c.U[c.Qa[b.Ha]]) {
            if (e = nl(a)) {
                var g = b.Ha;
                kl(a) && (g += Rl(a), a = c.U[c.Qa[g]]);
                var c = Ld(b),
                    h = Io(c, g, 0);
                e = El(a, (b.m.Fa - h) / (Io(c, g + e - 1, 1) - h))
            } else e = El(a, Dl(a, b.Va));
            b.R && (0 > e || e > b.L) ? b = 0 : (g = b.W, f = yn(b) + a.y, b = a.height, 0 > f && (b += f), f + b > g && (b -= f + b - g));
            Xn(d, e);
            Wm(d, Math.max(0, f));
            Um(d, Math.max(0, b))
        }
    }
}

function Jo(a, b) {
    var c = this;
    this.o = a;
    this.g = b;
    this.ma = bf(a, b ? "vertbar" : "horizbar");
    this.m = !1;
    Ko(this);
    this.top = this.length = this.I = this.J = 0;
    a.assign([49], function() {
        c.xa()
    }, [31, 35], function() {
        !c.g && !a.R || c.g && a.ia <= a.W || !c.g && a.pa <= a.L ? Ko(c) : c.m || (F(c.ma, "active"), c.m = !0);
        c.xa()
    });
    b ? a.assign([73], function() {
        c.xa()
    }) : a.assign([30], function() {
        c.xa()
    });
    jn(this.ma, function(a, b) {
        c.J = c.g ? b : a;
        c.I = c.g ? c.o.Ua : c.o.Oa
    }, function(a, b) {
        var f = (c.g ? b : a) - c.J;
        c.g ? Lo(c.o, c.I + f / (c.o.W - Mo(c)), !1, !0, 0) : No(c.o, c.I + f / (c.o.Dc -
            Mo(c)), !1, !0, 0)
    }, ya, !0)
}
Jo.prototype = {
    xa: function() {
        var a = this.g,
            b = Mo(this),
            c;
        c = a ? this.o.Ua * (this.o.W - b) | 0 : this.o.Oa * (this.o.Dc - b) | 0;
        b !== this.length && (a ? Um(this.ma, b) : Vm(this.ma, b), this.length = b);
        c !== this.top && (a ? Wm(this.ma, c) : Xn(this.ma, c), this.top = c)
    }
};

function Mo(a) {
    var b = a.o;
    return a.g ? b.W / b.ia * b.W | 0 : b.L / b.pa * b.Dc | 0
}

function Ko(a) {
    a.m && (G(a.ma, "active"), a.m = !1)
}

function Oo(a, b, c) {
    var d = this;
    this.o = a;
    this.ma = b;
    this.la = c;
    this.m = "#000";
    this.R = "#fff";
    this.oa = this.I = "#000";
    this.J = this.ib = !1;
    this.bc = function() {
        Po(d);
        d.ib = !1
    };
    this.pa = function() {
        var a = d.Y;
        a ? (Qo(d, !1), d.g.drawImage(a, d.ia * J, d.ea * J, d.width * J, d.height * J)) : (d.J = !0, Po(d));
        d.ib = !1
    };
    this.height = this.width = 0;
    this.g = b.getContext("2d");
    this.L = [];
    this.T = [];
    this.Y = this.da = null;
    this.ea = this.ia = 0;
    this.N = null;
    this.na = this.W = -1;
    this.aa();
    c || a.assign([49], function() {
        d.J = !0;
        d.aa()
    }, [73, 30, 35], function(a) {
        a.data &&
        (d.J = !0, d.xa())
    }, [38, 40], function() {
        d.J = !0;
        d.xa()
    }, [67], function() {
        d.xa()
    })
}
Oo.prototype = {
    aa: $n,
    xa: Zn
};

function Ro(a, b, c) {
    var d = a.g,
        e = 1.5 * a.o.g;
    io(d, e, 2);
    return e * ko(d, c ? b.Eb : b.Db, So(a, b, c)).length
}

function So(a, b, c) {
    var d = b.P.La,
        e = b.track;
    a = a.o.g;
    var f, g, h, k, l;
    f = b.la;
    for (h = d.length; f < h; f++)
        for (k = d[f].Ma, g = k.length; g--;)
            if ((l = k[g]) && l !== b && l.track === e && (l.Eb && c || l.Db && !c)) return l.x - b.x - a;
    return b.P.width - b.x - a - a
}

function To(a, b, c, d) {
    var e = a.g;
    a = a.o.g;
    for (var f = 1E4, g; f--;) {
        g = Math.min(.8 * a, c - b);
        if (g < .2 * a) break;
        K(e, c - g, d, g, .13 * a);
        c -= g + .3 * a;
        if (c <= b) break
    }
}

function Uo(a, b, c, d, e) {
    var f = a.g;
    a = a.o.g;
    var g = .6 * a,
        h = .3 * a,
        k = e < c ? 1 : -1;
    f.beginPath();
    f.lineWidth = .13 * a * J;
    lo(f, b, c);
    b === d ? mo(f, d, e) : qo(f, d, c, d, e);
    f.stroke();
    f.closePath();
    f.beginPath();
    c === e ? (lo(f, d - g, e + h), mo(f, d - g, e - h)) : (lo(f, d + h, e + g * k), mo(f, d - h, e + g * k));
    mo(f, d, e);
    f.fill();
    f.closePath()
}

function Vo(a, b, c, d, e, f, g) {
    var h = a.g;
    h.fillStyle = g ? "#aaa" : a.m;
    h.beginPath();
    lo(h, b, c);
    qo(h, b + d / 2, c - e, b + d, c);
    qo(h, b + d / 2, c - e - f, b, c);
    h.fill();
    h.closePath()
}

function Wo(a, b, c, d, e, f, g, h, k) {
    var l = a.g,
        m = a.o.g,
        n = 1.3 * m,
        p = 1.25 * m,
        q = .2 * m;
    h -= 1.3 * m / 2;
    l.strokeStyle = k ? "#af2d1c" : qk(c) ? "#aaa" : a.m;
    l.lineWidth = .13 * m * J;
    1 === e || 2 === e ? (a = 1 === e, l.beginPath(), g = b ? g - (f + q + n) : g + (f + q), lo(l, g, h + (a ? p : 0)), mo(l, g + n, h + (a ? 0 : p))) : (b ? (g -= q + n + f, k = ki(d, !1), a = null === k ? !0 : k.value < d.value) : (g += f, k = ii(d), a = null === k ? !0 : k.value > d.value), e = p, b ? b = n : null === k || k.Z.P.Sa !== d.Z.P.Sa ? b = c.width - 2 * f : (b = dk(k.Z) - zj.width((k.Z.ga ? 1.25 : 1.56) * m, 2, Xi(k, !1, !1), !0) / 2 - g, d.Z.ga && (e = .65 * p, h += e / 2)), l.beginPath(),
        lo(l, g + q, h + (a ? e : 0)), mo(l, g + b - q, h + (a ? 0 : e)));
    l.stroke();
    l.closePath()
}

function Xo(a, b, c, d, e) {
    var f = a.g,
        g = a.o.I,
        h = g.width(60081),
        k = 0;
    d -= sj(b) + 1 * a.o.g;
    for (f.fillStyle = a.m; k + h < e;) zo(g, f, 60081, c + k, d), k += h
}

function Yo(a, b, c, d, e) {
    var f = a.g,
        g = a.o.g,
        h = 1.55 * g,
        k = 1 * g,
        l = pj(b, e, !0, 0),
        m = li(l, !0),
        n = 4 === e ? "let ring" : "P.M.";
    f.fillStyle = a.m;
    io(f, h, 2);
    jo(f, n, c, d - k);
    b !== l && (c += zj.width(h, 2, n) + 5, d -= k + .8 * h / 2, m && (4 === e && qj(m) || 5 === e && rj(m)) ? b = l.P.x + l.P.width : (b = $f(l) + l.width - g, K(f, b, d + -.87 * g / 2, .13 * g, 1 * g)), To(a, c, b, d))
}

function Zo(a, b, c, d, e, f, g) {
    var h = a.g,
        k = a.o.I,
        l = a.o.g,
        m = f ? 60078 : 60258,
        n = k.width(60074),
        p = k.width(m);
    h.fillStyle = a.m;
    h.strokeStyle = a.m;
    if (g) {
        a = 1.3 * l;
        g = Rj(b, !0);
        var q = Rj(b, !1);
        b = (q - g + 1) * a;
        e ? d += -p + (q + .5) * a : d += p + (g - .5) * a
    } else g = b.wa, q = l / 2, a = -q + (g ? ui(b, g).y(!0) : Gg(b, g, !1, null).y(!0)), g = q + (g ? Gg(b, g, !1, null).y(!0) : ui(b, g).y(!0)), b = g - a, e ? d += g - p : d += a + p;
    c -= .5 * l;
    f ? (e && (c -= l / 3), c -= l / 3) : (e || (c += 2 * l), c -= 1.5 * l);
    h.save();
    h.translate(c * J, d * J);
    h.rotate(pg / 2 * (e ? 1 : -1));
    zo(k, h, m, 0, 0);
    c = 0;
    b -= p;
    if (f) {
        if (0 < b)
            for (d = Math.ceil(b /
                n); d--;) zo(k, h, 60074, c, 0), c -= n
    } else K(h, 1 - b, -1.1 * l, b, .2 * l);
    h.restore()
}

function $o(a, b, c, d, e) {
    var f = a.g,
        g = a.o.I,
        h = a.o.g,
        k = .8 * h,
        l = pj(b, 3, !0, 0),
        m = li(l, !0);
    b = wl[b.I];
    f.fillStyle = a.m;
    d -= .5 * h;
    c && (e -= 1 * h);
    zo(g, f, b, d, e);
    d += g.width(b);
    c && (e -= 2 * h);
    m && m.I === l.I ? g = l.P.x + l.P.width : (g = $f(l) + ag(l), d >= g - k && (g = d + k), K(f, g, e - (c ? 0 : k), .13 * h, k), K(f, g - k, e, k, .13 * h), g -= k + .3 * h);
    To(a, d, g, e)
}

function ap(a, b, c, d, e) {
    var f = a.g,
        g = a.o.g,
        h = 1.5 * g;
    f.fillStyle = a.m;
    io(f, h, 2);
    d -= .8 * g;
    a = ko(f, b, e);
    for (b = a.length; b--;) f.fillText(a[b], c * J, d * J, e * J), d -= h
}

function bp(a, b, c, d, e) {
    var f = a.g,
        g = a.o.g,
        h = 1.3 * g,
        k = .2 * g,
        l = c.Z,
        m, n, p;
    if (b) {
        p = c.J;
        if (4 === p || 3 === p) {
            n = ki(c, !1);
            if (null === n) return;
            p = n.value > c.value ? -1 : 1
        } else p = 1 === p ? 1 : -1;
        b = Vj(l) - k - h;
        d = b + h;
        h = m = e + c.y(!0)
    } else if (p = c.I, b = d + Aj(l) + g / 2, m = e + c.y(!0), 4 === p || 3 === p || 10 <= p) {
        n = ii(c);
        if (null === n) return;
        p = c.value > n.value ? -1 : 1;
        d = l.P.Sa === n.Z.P.Sa ? Vj(n.Z) - g / 2 : d + l.width;
        h = e + n.y(!0)
    } else p = 1 === p ? 1 : -1, d = b + k + h, h = m;
    m === h ? (e = 1 === (c.qa & 1), m += p * g / (e ? 3 : 4), h -= p * g / (e ? 3 : 4)) : (m = eg(a.o, m, e, h > m, !1), h = eg(a.o, h, e, h < m, !1));
    f.strokeStyle =
        qk(c.Z) ? "#aaa" : a.I;
    f.lineWidth = .13 * g * J;
    f.beginPath();
    lo(f, b, m);
    mo(f, d, h);
    f.stroke()
}

function cp(a, b, c, d, e, f) {
    var g = a.g,
        h = a.o.g * (b.Z.ga ? .9 : 1) * (f ? 1.8 : 1.6);
    g.fillStyle = qk(b.Z) ? "#aaa" : a.I;
    io(g, h, 4, !0, f);
    a = pi(b, !0, !0, zj.width(h, 4, e, !0, f), f);
    jo(g, e, c + a.x, d + a.y)
}

function dp(a, b, c) {
    var d = b.ja.L;
    if (1 === d || 2 === d) {
        var e = a.g,
            f = a.o.I,
            g = 1 * a.o.g;
        b = b.P;
        var h = Il(b),
            k = (d = 1 === d) ? 58624 : 58625,
            l = f.width(k),
            m = ek(a.o);
        e.fillStyle = a.m;
        m = d || Sl(b) ? m + (b.x + h.x - g + Math.round((b.width - h.x + g - l) / 2)) : m + (b.x + b.width - l / 2);
        zo(f, e, k, m, c)
    }
}

function ep(a, b, c, d, e) {
    var f = a.o,
        g = a.g,
        h = f.I,
        k = f.g,
        l = k / 2,
        m = .065 * k,
        n = c.ja,
        p = c.track,
        q = p.index,
        r = b.g[q],
        t = c.X.length,
        w = si(c),
        v = n.g,
        x = v ? nl(n.P) : 0,
        A = 0 !== (c.g & 256),
        z = f.N,
        y, I, R, V, ba, ea, ca,
        na;
    d |= 0;
    y = d + c.R;
    e += b.W[q];
    c.Eb && ap(a, c.Eb, d, e, So(a, c, !0));
    if (ok(c)) {
        var ta = d,
            W = e,
            ha = a.g,
            ka = a.o.g,
            ab = pk(c),
            bb = ab.name,
            pa = 0,
            La, Z = 1 === a.o.sa,
            cb = p.hb && ab.ob,
            tb = ka * (Z ? 3 : cb ? 1.5 : 1.8),
            ra = Math.ceil(ka / 2),
            Yc = cb ? W + tb : e + b.m[q] - 1 * k,
            ta = ta | 0;
        if (cb) {
            var Ha = ab.ob.length,
                Pb = ab.I,
                sa = ab.m,
                za = 1.1 * ka,
                qd = 0 === Pb ? 1 : Pb,
                yb = ab.J,
                db = 6 * ka,
                rd = Math.ceil(.3 *
                    ka),
                Zc = Math.round(36 * ka) / 100,
                kc = Math.ceil(.1 * ka),
                Dc = Math.ceil(.4 * ka),
                D = ((db - Dc) / yb | 0) - kc,
                zb = Math.ceil(1.5 * ka),
                aa = Math.ceil(.7 * ka),
                Ua = Math.ceil(.1 * ka),
                ua = Math.ceil(.3 * ka),
                U = Math.ceil(1.1 * ka),
                C = 0 < Pb ? ua : 0,
                N, Ab,
                tc, W = Yc + ra + zb + ua | 0,
                pa = (Ha - 1) * (U + Ua) + Ua;
            ha.fillStyle = "#fff";
            K(ha, ta, W - C, pa, db + C);
            ha.fillStyle = "#000";
            for (N = 1; N < Ha - 1; N++) K(ha, ta + N * (U + Ua), W - C, Ua, db + C);
            for (N = 0; N < yb; N++) K(ha, ta, W + Dc - kc + N * (kc + D), pa, kc);
            ha.fillStyle = "#000";
            ha.strokeStyle = "#000";
            K(ha, ta, W - C, Ua, db + C);
            K(ha, ta + pa - Ua, W - C, Ua, db + C);
            0 === Pb ?
                K(ha, ta - rd, W, pa + 2 * rd, Dc) : (io(ha, za, 2, !0), jo(ha, String(sa), ta - zj.width(za, 2, String(sa), !0) - .4 * ka - (ab.ob[0] === sa ? Zc : 0), W + Dc + za + (kc + D) * (sa - Pb)));
            ha.fillStyle = "#efefef";
            ha.strokeStyle = "#efefef";
            po(ha, ta - aa, W - ua - zb, pa + 2 * aa, zb, 4);
            ha.fillStyle = "#000";
            io(ha, za, 2);
            for (N = 0; N < Ha; N++) Ab = ab.ob[N], tc = null === Ab ? "X" : 0 === Ab ? "O" : Ab, jo(ha, tc, ta + N * (U + Ua) - zj.width(za, 2, tc) / 2 + 1, W - ua - zb / 2 + za / 2 - 1);
            ha.fillStyle = "#000";
            for (N = 0; N < Ha; N++) Ab = ab.ob[N], null !== Ab && 0 !== Ab && no(ha, ta + 1 + N * (Ua + U), W + Dc + (D / 2 | 0) + (Ab - qd) * (kc + D), Zc, !1)
        }
        io(ha,
            tb, 2);
        ha.fillStyle = a.m;
        Z && (bb += " ");
        La = zj.width(tb, 2, bb);
        if (Z) {
            var T;
            a: {
                for (var uc = c.P, sd = uc.La, Kb = uc.fb, $b, Aa,
                         eb; Kb--;)
                    for (Aa = sd[Kb], eb = Aa.Ma, $b = eb.length; $b--;)
                        if (eb[$b] === c) {
                            T = Aa;
                            break a
                        }
                T = null
            }
            var Vb = T.jb;
            La > Vb ? ha.fillText(bb, ta * J, Yc * J, Vb * J) : jo(ha, bb, ta, Yc)
        } else if (pa) {
            var va = pa + 2 * aa;
            ha.fillText(bb, (ta + (va > La ? (pa - La) / 2 : -aa)) * J, Yc * J, va * J)
        } else jo(ha, bb, ta, Yc)
    }
    e += b.m[q];
    if (p.va) {
        e += b.N[q];
        if (c.ub) {
            var Lc = e,
                lc = a.g,
                X = a.o.g;
            lc.fillStyle = a.m;
            io(lc, 1.75 * X, 3);
            var Ba = "";
            c.ub && (Ba = Nn[c.ub[0]], c.ub[1] ||
            (Ba = "\u00bd B " + Ba));
            jo(lc, Ba, y, Lc - 1 * X)
        }
        e += b.I[q];
        if (c.T) {
            var Dd = d,
                Ec = e;
            a.g.fillStyle = a.m;
            zo(a.o.I, a.g, c.T ? 1 === c.T ? 58898 : 58896 : null, Dd, Ec - 1 * a.o.g)
        }
        e += b.R[q];
        c.I && (1 === c.I || 3 === c.I) && nk(c) && $o(a, c, !0, y, e);
        c.da && p.Pa && (ca = Ln[c.da], zo(h, g, ca, y + (w - h.width(ca)) / 2, e + 2 * k));
        e += r;
        if (t && !A) {
            var fa = Jj(c),
                ga = Kj(c),
                ma = fa || ga || Ij(c) || Lj(c),
                wa = ma || hi(c),
                gd = null,
                E = c.wa,
                ad = Gg(c, E, !0, null),
                S = e + m + ad.y(!0),
                Ma, Lb = .3 * k,
                da = !1,
                Va = wa ? Qj(c) : !1,
                fb = wa ? e + m + (Va ? dg(c, !1, !1, !0) : cg(c, !1, !1, !0)) : null,
                Fc;
            I = 0;
            for (R = t; I < R; I++) {
                ea = c.X[I];
                var Wa = a,
                    la = c,
                    Ca = ea,
                    Da = y,
                    Pa = e,
                    vc = Wa.g,
                    mc = Wa.o,
                    nc = mc.I,
                    Qa = mc.g,
                    Mb = xi(Ca),
                    gb = 1,
                    qa = 1.2 * Qa,
                    Qb = la.wa ? Da + si(la) - Mb : Da,
                    hb;
                a: {
                    var ub = Ca.qa,
                        Ea = void 0;
                    if (-3 >= ub) Ea = -3 - ub;
                    else if (9 <= ub) Ea = ub - 9;
                    else {
                        hb = 0;
                        break a
                    }
                    hb = Math.ceil((Ea + 1) / 2)
                }
                var Ra = fj(Wa.L, Ca),
                    td = mc.N && mc.selection && !rk(mc.m) && null !== mc.selection.L(Ca, null),
                    Bb = Da + Wj(la),
                    Cb = Pa + .065 * Qa,
                    wc = void 0,
                    Ia = void 0;
                la.ga ? (gb = .65, qa *= .65) : Ai(Ca) && (gb = .8);
                1 === Ca.yb ? Qb -= Mb - 1 : 2 === Ca.yb && (Qb += Mb - 1);
                if (hb) {
                    var Na = 9 <= Ca.qa;
                    vc.fillStyle = Wa.I;
                    Ia = Og(Ca) ? ci(Ng(la.ja)) + yn(Wa.o) :
                        Pa;
                    Na && (Ia += 4 * Qa);
                    for (wc = 1; wc <= hb; wc++) K(vc, Qb - .4 * Qa, Ia + wc * (Na ? 1 : -1) * Qa, Mb + .8 * Qa, .14 * Qa)
                }
                vc.fillStyle = Ra ? "#af2d1c" : qk(la) ? "#aaa" : td ? "#FC5D2B" : Wa.m;
                Pa = Cb + Ca.y(!0);
                Ca.la && xo(nc, vc, Dn[Ca.la], Bb - la.R - Ca.T * qa - En[Ca.la] * Qa, Pa, gb);
                xo(nc, vc, yi[zi(Ca)], Qb, Pa, gb);
                Yi(Ca) && (xo(nc, vc, 57589, Qb - (.3 * Qa + nc.width(57589)) * gb, Pa, gb), xo(nc, vc, 57590, Qb + Mb + .3 * Qa * gb, Pa, gb));
                if (!la.ga && la.ba.J)
                    for (Ia = Pa, 1 === (Ca.qa & 1) && (Ia -= Qa / 2), Da += ag(la) + .45 * Qa, wc = 0; wc !== la.ba.ab; wc++) zo(nc, vc, 57831, Da, Ia), Da += .9 * Qa;
                if (Ra || td) vc.fillStyle =
                    Wa.m;
                if (Lh(Ca)) {
                    var ac = Ca,
                        ib = Pa,
                        bd = Wa.g,
                        Y = Wa.o.g,
                        oa = ac.Z,
                        bc = qk(oa) ? "#aaa" : Wa.I,
                        Wb = Mh(ac, 1, !0, !1, !1, !1, !1),
                        Rb = $f(oa),
                        dc = Rb,
                        jb = Di(ac, Wb),
                        Db = jb ? 1 : -1,
                        ja = null !== Wb ? Wb.Z : null,
                        hd = !1,
                        oc = .78 * Y,
                        pb = 1.404 * Y,
                        Xb = void 0,
                        Mc = void 0,
                        Sb = void 0,
                        Eb = void 0,
                        nb = void 0;
                    if (1 < oa.X.length || !jb && !oa.wa || jb && oa.wa || ja && 1 < ja.X.length) {
                        var Mc = ib - (1 === (ac.qa & 1) ? .25 : .75) * Y * Db,
                            Tb = dc,
                            id, Gc = ac;
                        id = 1 === Gc.yb ? 0 : 2 === Gc.yb ? xi(Gc) + Aj(Gc.Z) : Aj(Gc.Z);
                        dc = Tb + (id + .25 * Y);
                        1 === ac.yb && (dc += Y / 4)
                    } else hd = !0, Mc = ib - .83 * Y * Db, dc += .7 * xi(ac);
                    null !== Wb ? (Sb =
                        $f(ja) + Ii(Wb), 2 === Wb.yb && (Sb -= Y / 4), Sb = !hd || 1 < ja.X.length || 1 < ja.ja.V.length || !ja.wa && !jb || oa.wa !== ja.wa ? Sb - .25 * Y : Sb + .3 * xi(Wb)) : Sb = oa.fa + 1 === oa.ja.V[oa.ha].length && Sl(oa.P) || !li(oa, !0) ? Rb + 1.5 * oa.width : $f(li(oa, !0));
                    Eb = Sb - dc;
                    Xb = Eb / Y;
                    nb = 5 >= Xb ? oc : 12 <= Xb ? pb : oc + (pb - oc) * (Xb - 5) / 7;
                    bd.fillStyle = bc;
                    bd.strokeStyle = bc;
                    to(bd, dc, Mc, Mc, .2, Eb, Db, nb, nb, nb + .28 * Y)
                }
                if (Fh(Ca) && Zf(la)) {
                    var ec = Qb,
                        fc = Pa,
                        ud = Wa.g,
                        Fb = Wa.o.g,
                        vd = 2.6 * Fb,
                        Za = Hh(Ca),
                        Oa = (Za ? Di(Za, Ca) : Di(Ca, null)) ? 1 : -1,
                        Ed = .28 * Fb * Oa,
                        Fe = .78 * Fb,
                        xc = void 0,
                        Gb = void 0,
                        ec = ec -
                            1.2 * Fb * Ca.Z.aa,
                        fc = fc - (1 === (Ca.qa & 1) ? .25 : .75) * Fb * Oa,
                        xc = ec - .8 * vd,
                        Gb = ec - .2 * vd;
                    ud.beginPath();
                    lo(ud, ec - vd, fc);
                    ro(ud, xc, fc - Oa * Fe, Gb, fc - Oa * Fe, ec - .25 * Fb, fc);
                    ro(ud, Gb, fc - (Oa * Fe + Ed), xc, fc - (Oa * Fe + Ed), ec - vd, fc);
                    ud.fill();
                    ud.closePath()
                }
                (1 === ea.J || 2 === ea.J || ea.J && Zf(c)) && bp(a, !0, ea, y, e + m);
                ea.I && bp(a, !1, ea, y, e + m);
                qi(ea) && cp(a, ea, y, e + m, ea.Y, !1);
                ea.R && cp(a, ea, y, e + m, ea.R, !0);
                ea.vb && (gd = ea)
            }
            hk(c) && (Ma = wi(c, E, !0, null), E ? K(g, y + fk(c), S - Fi(ad, !0) - Ma, .16 * k, Ma) : K(g, y, S - Fi(ad, !1), .16 * k, Ma), null === c.J && (Fc = uj(c, E))) && (xo(h,
                g, Fc, y + fk(c), S + Ma * (E ? -1 : 1), c.ga ? .65 : 1), c.ga && (g.strokeStyle = qk(c) ? "#aaa" : a.I, g.beginPath(), lo(g, y - w * (E ? -.2 : .4), S + (Ma - 1.5 * k) * (E ? -1 : 1)), mo(g, y + w * (E ? 1.6 : 1.2), S + (Ma - .5 * k) * (E ? -1 : 1)), g.closePath(), g.stroke()));
            if (c.ia) {
                var Nb = y,
                    Ub = e + m,
                    ob = c.ia,
                    Hb = Jn[ob - 1],
                    gc = Ub,
                    qb = ti(ui(c, E));
                if (hk(c)) {
                    E && (Nb += fk(c));
                    var Ge = Ub,
                        fe = Pj(c, !0, !0, null);
                    null !== c.J && (fe += .5 * (c.wa ? 1 : -1) * c.K.o.g * (1.5 * c.ba.R - .5));
                    Ub = Ge + (qb - (qb - fe) / 2)
                } else Nb += w / 2, Ub += qb + a.o.g / 2 * ob * (E ? -1 : 1);
                if (1 === ob || 4 === ob) var Pd = a.o,
                    jd = Pd.g,
                    Ub = Ub < gc - jd / 2 || Ub > gc +
                    Pd.Y + jd / 2 ? Ub : gc + jd * Math.round((Ub - gc) / jd);
                zo(a.o.I, a.g, Hb, Nb, Ub)
            }
            c.N && Zo(a, c, d - c.fd + 1.5 * k, e + m, 1 === c.N, !0, !1);
            S += l * (E ? 1 : -1);
            hi(c) && (fb += (Va ? 1 : -1) * Gj(c, ad), zo(h, g, Va ? 58531 : 58530, y + (w - h.width(58530)) / 2, fb), S = fb += .5 * (Va ? 1 : -1) * k);
            ma && (ga ? ca = Va ? 58541 : 58540 : fa ? ca = Va ? 58529 : 58528 : Ij(c) ? (ca = Va ? 58533 : 58532, Lb = Gj(c, ad), da = !0) : ca = Lj(c) ? Va ? 58535 : 58534 : Va ? 58531 : 58530, Va ? fb = da ? fb + Lb : Lb + Math.max(fb, e + 4.13 * k) : da ? fb -= Lb : fb = Math.min(fb, e) - Lb, zo(h, g, ca, y + (w - h.width(ca)) / 2, fb), S = fb + (Va ? 1 : -1) * k);
            S = !Va && wa ? S : e + m + cg(c, !1, !1, !0);
            S > e && (S = e);
            Mj(c) && (S -= l, zo(h, g, 59384, y + (w - h.width(59384)) / 2, S), S -= k);
            Nj(c) && (S -= l, zo(h, g, 59381, y + (w - h.width(59384)) / 2, S), S -= k);
            vk(c) && (S -= l, zo(h, g, 58574, y + c.width / 3, S), S -= k);
            c.pause && (S -= 1 * k, ca = Kn[c.pause - 1], zo(h, g, ca, y + (w - h.width(ca)) / 2, S), S -= 1.5 * k);
            if (gd)
                if (E && gk(c) ? ba = e + Hg(Oj(c), f) : ba = S, 1 === gd.vb) a: {
                    var Ib = gd,
                        cd = ba - 1 * k;
                    if (Fh(Ib)) {
                        var dd = Ib;
                        do
                            if ((dd = Hh(dd)) && dd.vb) break a; while (dd && Fh(dd))
                    }
                    var Ue = a.g,
                        wd = a.o.I,
                        Qd = wd.width(58726),
                        He = wd.width(60068),
                        ge = Mh(Ib, 1, !0, !0, !1, !1, !1),
                        Rd;
                    Rd = ge ? $f(ge.Z) +
                        ge.Z.width - $f(Ib.Z) : Ib.Z.width;
                    zo(wd, Ue, 58726, y, cd);
                    for (cd += 1.5 * a.o.g / 4; Qd + He < Rd;) zo(wd, Ue, 60068, y + Qd, cd),
                        Qd += He
                }
                else ca = Gn[gd.vb], zo(h, g, ca, y + (w - h.width(ca)) / 2, ba - 1 * k)
        } else if (n.L) dp(a, c, e + m + 2 * k);
        else if (!z && x || z && 0 < v || z && 0 > v && kk(c.P)) fp(a, z, n, c, d, e + 4.13 * k / 2, e + th(p), !0);
        else if (!A && 23 !== c.bb && !c.ga && (0 <= v && !x || 0 > v && !z)) {
            var Yb = d,
                Hc = e + m,
                Sd = a.o,
                Ve = a.g,
                lf = Sd.I,
                ed = Sd.g,
                Fd = Bj(c),
                Ie = 58595 === Fd,
                Td = Ie && jk(c),
                Ud = Sd.N && Sd.selection && !rk(Sd.m) && Sd.selection.m(c),
                Df = lf.width(Fd),
                fg = Hc,
                Je = c.bb;
            Ie && (Td && (Yb = Ll(c.P)),
            1 === c.track.g && Je++);
            Hc += ed * Je;
            Ve.fillStyle = qk(c) ? "#aaa" : tk(c) ? "#999" : Ud ? "#FC5D2B" : a.m;
            zo(lf, Ve, Fd, Yb, Hc);
            58596 === Fd && (4 < Je || 0 > Je) && K(Ve, Yb - .4 * ed, Hc, Df + .8 * ed, .14 * ed);
            if (!Td && c.ba.J)
                for (var Yb = Yb + (Df + .45 * ed),
                         mf = 0; mf !== c.ba.ab; mf++) zo(lf, Ve, 57831, Yb, fg + (Je - .5) * ed), Yb += .9 * ed
        }
        c.da && !p.Pa && (ba = e + Hk(n, c.Ca, !1) + 2.5 * k, ca = Ln[c.da], zo(h, g, ca, y + (w - h.width(ca)) / 2, ba));
        if (c.m)
            for (I = c.m.length; I--;)
                if (Zf(c) || c.m[I].ka[0] === c) {
                    var Nc = a,
                        Gd = c,
                        Zb = e + m,
                        vb = Nc.g,
                        pc = Qf(c.m[I], Gd),
                        Vd = qk(Gd) ? "#aaa" : Nc.m;
                    vb.fillStyle = Vd;
                    vb.strokeStyle =
                        Vd;
                    to(vb, pc.Sc, Zb + pc.hd, Zb + pc.dd, .1, pc.cd - pc.Sc, pc.yb, pc.height, pc.height, pc.height + .28 * Nc.o.g)
                }
        e += 4.13 * k + b.J[q] + b.ia[q];
        c.I && 1 !== c.I && 3 !== c.I && nk(c) && $o(a, c, !1, y, e);
        e += b.Y[q];
        c.Db && ap(a, c.Db, d, e, So(a, c, !1));
        var Wd;
        if (Wd = mk(c)) {
            var Xa = Qh(c, !0);
            Wd = null === Xa || mk(Xa) !== mk(c) || Zf(c)
        }
        if (Wd || c.pa) {
            var qc = d,
                xd = e + .5 * k,
                hc = a.g,
                Oc = a.o.g,
                he = 1 * Oc,
                Sf = he / 2,
                yc = mk(c),
                kd, Xd;
            if (null !== yc) {
                for (var nf = a.o, We = nf.K.U, Sa = yc.g + 1, ve, kb, Ja, zc, Xe, ie,
                         we; Sa-- && We[Sa].Sa !== c.P.Sa;);
                Ja = We[Sa];
                ve = we = Ja.x + ek(nf);
                kb = Sa === yc.g ? yc.I :
                    Ja.Ga;
                zc = 0;
                for (Xe = Ja.fb; zc !== Xe; zc++) {
                    ie = Ja.La[zc];
                    if (1 === ie.$b)
                        if (ie.offset === kb) {
                            ve = we + ie.x;
                            break
                        } else if (zg(ie.offset, kb)) break;
                    ve = ie.x + we
                }
                Xd = ve - $f(c) - Oc
            } else Xd = .5 * c.width;
            kd = Xd;
            hc.strokeStyle = a.I;
            hc.lineWidth = .1 * Oc * J;
            hc.beginPath();
            yc && 1 === yc.L || 1 === c.pa ? (lo(hc, qc + kd, xd), mo(hc, qc, xd + Sf), mo(hc, qc + kd, xd + he)) : yc && 2 === yc.L || 2 === c.pa ? (lo(hc, qc, xd), mo(hc, qc + kd, xd + Sf), mo(hc, qc, xd + he)) : (lo(hc, qc + kd / 2, xd), mo(hc, qc, xd + Sf), mo(hc, qc + kd / 2, xd + he), mo(hc, qc + kd, xd + Sf), mo(hc, qc + kd / 2, xd));
            hc.stroke()
        }
        e += b.da[q] +
            b.ea[q];
        0 === c.ha && null !== p.I && (V = lk(c)) && (g.fillStyle = a.I, ca = Hn[V], zo(h, g, ca, y + (w - h.width(ca)) / 2, e))
    }
    if (p.Pa) {
        if (c.L) {
            var Ic = d,
                je = e,
                ld = a.g,
                ke = a.o.g,
                xe = 1.7 * ke,
                yd = c.ta ? null : c.X[0],
                Ef = yd ? fj(a.L, yd) : !1,
                Pc = Ic,
                rb, zd, le, Hd, md, Ad;
            io(ld, xe, 3);
            ld.fillStyle = Ef ? "#af2d1c" : a.m;
            rb = 0;
            for (zd = c.L.length; rb !== zd; rb++)
                if (Hd = c.L[rb], Ad = yj(Hd), je += xe, Ad)
                    if (md = zj.width(xe, 3, Ad), Ic = Pc - (md - ag(c)) / 2, jo(ld, Ad, Ic, je), le = pj(c, 7, !1, rb), "-" === Hd.charAt(Hd.length - 1)) {
                        var Ic = Ic + md,
                            of = zj.width(xe, 3, "-"),
                            Jb = li(le, !0),
                            Ke;
                        Jb && Jb.L &&
                        Jb.L[rb] ? Ke = Jb.P.Sa === c.P.Sa ? $f(Jb) + (ag(Jb) - xj(Jb)) / 2 : c.P.x + c.P.width : Ke = Ic + 2 * of ;
                        jo(ld, "-", (Ic + Ke - of ) / 2, je)
                    } else if (yd && le !== c) {
                        var me = le && le.P.Sa === c.P.Sa ? $f(le) + ag(le) : Ek(c.P).width,
                            Ic = Ic + (md + .13 * ke);
                        K(ld, Ic, je, me - Ic, .13 * ke)
                    }
        }
        e += b.T[q]
    }
    if (p.Ja) {
        na = dk(c);
        if (p.va || p.Pa) e += 1.2 * k;
        ba = e += b.la[q];
        if (qj(c) || rj(c)) {
            var Id;
            if (Id = qj(c)) {
                var Qc = Qh(c, !0);
                Id = null === Qc || !qj(Qc) || Zf(c)
            }
            if (Id) Yo(a, c, d, ba, 4);
            else {
                var pf;
                if (pf = rj(c)) {
                    var qf = Qh(c, !0);
                    pf = null === qf || !rj(qf) || Zf(c)
                }
                pf && Yo(a, c, d, ba, 5)
            }
            ba -= 2.55 * k
        }
        if (c.Y) {
            var ne =
                    d,
                Le = ba,
                ye = a.g,
                oe = a.o.g;
            io(ye, 1.5 * oe, 2);
            ye.fillStyle = a.m;
            jo(ye, Tn[c.Y - 1], ne, Le - 1 * oe);
            ba -= 2.5 * k
        }
        if (Tj(c, !0)) {
            var pe = d,
                Ye = ba,
                rf = a.g,
                Lg = a.o.g;
            io(rf, 1.5 * Lg, 2);
            rf.fillStyle = a.m;
            jo(rf, Sn[Tj(c, !1)[0]], pe, Ye - 1 * Lg)
        }
        e += b.pa[q];
        if (c.ea) {
            var Rc = d,
                Jc = e,
                Ac = a.g,
                Ze = a.o.g,
                Rh = ia * Ze,
                oh = 1.5 * Ze,
                qe = c.ea,
                Sh, ph = li(c, !0);
            Sh = ph && ph.P.Sa === c.P.Sa && !ph.ta ? $f(ph) - $f(c) : c.width;
            var Me = Rc + Sh,
                Ff = Jc - qe.I * Rh,
                Bi = null !== qe.m ? Jc - qe.m * Rh : 0,
                gg = Jc - qe.g * Rh,
                Ci = c.fa + 1 === c.ja.V[c.ha].length,
                Gf;
            Ac.lineWidth = .13 * Ze * J;
            io(Ac, oh, 2);
            Ac.beginPath();
            switch (qe.J) {
                case 9:
                    Gf = Rn[Math.abs(qe.m)];
                    Me -= Sh / 2;
                    lo(Ac, Rc, Ff);
                    mo(Ac, (Rc + Me) / 2, Bi);
                    mo(Ac, Me, gg);
                    jo(Ac, Gf, (Rc + Me - zj.width(oh, 2, Gf)) / 2, Ff + (Ff > Bi ? oh : 0));
                    break;
                case 8:
                    Gf = Rn[Math.abs(qe.g)];
                    lo(Ac, Rc, Ff);
                    mo(Ac, Me, gg);
                    Ci && (Me = Rc + c.width - Ze / 2);
                    jo(Ac, Gf, Me - zj.width(oh, 2, Gf), gg + Ph(qe));
                    break;
                case 4:
                    lo(Ac, Rc, Ff);
                    mo(Ac, Me, gg);
                    break;
                case 10:
                case 11:
                    Gf = Rn[Math.abs(qe.g)], lo(Ac, Rc, Jc), mo(Ac, Rc + .5 * Ze, Ff), mo(Ac, Me, gg), Ci && (Me = Rc + c.width - Ze / 2), jo(Ac, Gf, Me - zj.width(oh, 2, Gf), gg + Ph(qe))
            }
            Ac.stroke();
            Ac.closePath()
        }
        e +=
            b.na[q] + b.aa[q] + b.L[q] + .13 * k / 2;
        V = d;
        Uj(c) && (V -= 1.5 * k);
        c.N && (Zo(a, c, V, e, 1 === c.N, !0, !0), V -= 1.5 * k);
        c.oa && Zo(a, c, V, e, 1 === c.oa, !1, !0);
        if (n.L) dp(a, c, e + sh(p) / 2);
        else {
            if (t)
                for (I = 0, R = t; I < R; I++) {
                    if (ea = c.X[I], null !== ea.ra && (null !== ea.Na || Vh(ea))) a: {
                        var Yd = a,
                            sf = c,
                            Ka = ea,
                            Sc = na,
                            ug = d,
                            Bd = e,
                            qh = Yd.o,
                            uq = !0,
                            Ki = !1,
                            vq = sf.track.Cb,
                            wq = !1,
                            Li = fj(Yd.L, Ka),
                            iu = qh.N && qh.selection && !rk(qh.m) && null !== qh.selection.L(Ka, null);
                        if (Fh(Ka))
                            if (vq) wq = Ki = !0;
                            else if (0 === sf.fa) {
                                if (!Ka.m && !ni(Ka) && !Ka.I) break a;
                                Ki = !0
                            } else if (Ka.m) {
                                var xq = Hh(Ka);
                                xq && xq.m ? uq = !1 : Ki = !0
                            } else if (ni(Ka) || Ka.I) Ki = !0;
                            else break a;
                        var ig = Yd.g,
                            Vf = Yd.o.g,
                            Mi = Xi(Ka, Ki, wq),
                            Xh = (sf.ga ? 1.25 : 1.56) * Vf,
                            ju = Bd,
                            Yh = 0,
                            Rg = void 0,
                            im = void 0,
                            jm = void 0,
                            Zh = void 0,
                            Bd = Bd + 1.3 * Ka.ra * Vf;
                        if (uq) {
                            io(ig, Xh, 2, !0);
                            ig.fillStyle = Yd.R;
                            Yh = zj.width(Xh, 2, Mi, !0);
                            Rg = Yh / 2;
                            Zh = Yh + 3;
                            im = Sc - Rg - 1;
                            jm = 1 === Ka.J || 2 === Ka.J || Ka.J && Zf(sf);
                            if (3 === Ka.I || 4 === Ka.I) {
                                var Xj = ii(Ka);
                                null !== Xj && Xj.Z.P.Sa === sf.P.Sa ? Zh += dk(Xj.Z) - zj.width(Xh, 2, Xi(Xj, !1, !1), !0) / 2 - Sc : Zh = sf.width
                            } else Ka.I && (Zh += 1.5 * Vf);
                            jm && (im -= 1.5 * Vf, Zh += 1.5 * Vf);
                            K(ig, im, Bd - 2, Zh, .13 * Vf + 4);
                            ig.fillStyle = Li ? "#af2d1c" : qk(sf) ? "#aaa" : iu ? "#FC5D2B" : "#000";
                            jo(ig, Mi, Sc - Rg, Bd + 1.3 * Vf / 2);
                            Ka.Xb && (Xh = 1.25 * Vf, io(ig, Xh, 2, !0), Mi = " " + ("(" + (Ka.Na + Ka.Xb) + ")") + " ", ig.fillStyle = Yd.R, K(ig, Sc + Rg, Bd - 2, zj.width(Xh, 2, Mi, !0), .13 * Vf + 4), ig.fillStyle = Li ? "#af2d1c" : "#000", jo(ig, Mi, Sc + Rg, Bd + 1.3 * Vf / 2));
                            jm && Wo(Yd, !0, sf, Ka, Ka.J, Rg, Sc, Bd, Li);
                            Ka.I && Wo(Yd, !1, sf, Ka, Ka.I, Rg, Sc, Bd, Li);
                            if (ni(Ka) || vq && Lh(Ka)) {
                                var yq = Sc + Rg,
                                    zq = Yd.o.g,
                                    Aq = Ka.Z,
                                    Bq = Mh(Ka, 2, !0, !1, !1, !1, !1);
                                Vo(Yd, yq, Bd, null !== Bq ? $f(Bq.Z) - yq :
                                    Aq.width - Yh, 1.4 * zq, .3 * zq, qk(Aq))
                            }
                            if (jj(Ka)) {
                                var km = Yd.o.g;
                                Vo(Yd, ug - 2 * Vf, Bd, 2 * km, 1.4 * km, .3 * km, qk(sf))
                            }
                            if (ij(Ka)) {
                                var lm = Yd.o.g;
                                Vo(Yd, ug + Yh, Bd, 2 * lm, 1.4 * lm, .3 * lm, qk(sf))
                            }
                        }
                        var mm;
                        if (mm = Ka.m) {
                            var nm = Ka.m;
                            mm = !(0 === nm.m && null === nm.I && 0 === nm.g)
                        }
                        if (mm) {
                            var Wf = Yd,
                                jg = Ka,
                                Ne = ug,
                                vh = Bd,
                                Cq = Sc,
                                Xf = ju,
                                wh = Yh,
                                ku = Li,
                                wh = wh + 2,
                                xh = Wf.g,
                                yh = Wf.o.g,
                                $h = 1.5 * yh,
                                om = jg.Z,
                                fd = jg.m,
                                Sg = om.width,
                                Ni = .3 * yh,
                                Oi = .5 * yh,
                                Md = void 0,
                                Yf = void 0,
                                Tg = void 0,
                                $d = void 0,
                                Nd = void 0,
                                Ce = void 0,
                                Kc = void 0,
                                Yj = void 0;
                            io(xh, $h, 2);
                            Lh(jg) && (Yj = Mh(jg, 1, !0, !0, !0, !1, !1)) && (Sg = $f(Yj.Z) - $f(om), Yj.m || (Sg += Yj.Z.width));
                            xh.strokeStyle = ku ? "#af2d1c" : qk(om) ? "#aaa" : "#000";
                            switch (fd.L) {
                                case 1:
                                    Yf = (Md = Qn[fd.g]) ? zj.width($h, 2, Md) : 0;
                                    Tg = Sg - Math.max(Ni, Math.ceil(Yf / 2));
                                    $d = Ne;
                                    0 === fd.m ? (Tg -= wh, $d += wh, Nd = vh - 1.3 * yh / 4) : Nd = Xf - Ih(fd, 1);
                                    Ce = $d + Tg - 1;
                                    Kc = Xf - Ih(fd, 3);
                                    Uo(Wf, $d, Nd, Ce, Kc);
                                    Md && jo(xh, Md, Ce - Math.round(Yf / 2), Kc - Oi);
                                    break;
                                case 2:
                                    $d = Ne;
                                    Ce = $d + (Sg - Ni) - 1;
                                    Nd = Xf - Ih(fd, 1);
                                    Kc = 0 === fd.g ? vh : Xf - Ih(fd, 3);
                                    Uo(Wf, $d, Nd, Ce, Kc);
                                    break;
                                case 3:
                                    Yf = (Md = Qn[fd.I]) ? zj.width($h, 2, Md) : 0;
                                    Tg = Sg - Ni - 5;
                                    $d = Ne;
                                    Fh(jg) ||
                                    (Tg -= wh, $d += wh);
                                    Ce = $d + (Tg >> 1);
                                    Nd = 0 === fd.m ? vh - 1.3 * yh / 4 : Xf - Ih(fd, 1);
                                    Kc = Xf - Ih(fd, 2);
                                    Uo(Wf, $d, Nd, Ce, Kc);
                                    Md && jo(xh, Md, Ce - Math.round(Yf / 2), Kc - Oi);
                                    Ce = $d + (Tg >> 1);
                                    Nd = Kc;
                                    Kc = 0 === fd.g ? vh : Xf - Ih(fd, 3);
                                    Uo(Wf, Ce + 5, Nd, Ce + (Tg >> 1), Kc);
                                    break;
                                case 4:
                                    $d = Ne;
                                    Ce = $d + Sg - 1;
                                    (jg = mi(jg)) && jg.m && (Nd = Xf - Ih(jg.m, 3), Uo(Wf, $d, Nd, Ce, Nd));
                                    break;
                                case 5:
                                    Yf = (Md = Qn[fd.m]) ? zj.width($h, 2, Md) : 0;
                                    Ne = Cq;
                                    Nd = vh - 1.3 * yh * 3 / 4;
                                    Kc = Xf - Ih(fd, 3);
                                    Uo(Wf, Ne, Nd, Ne, Kc);
                                    Md && jo(xh, Md, Ne - Math.round(Yf / 2), Kc - Oi);
                                    Lh(jg) && Uo(Wf, Ne, Kc, Ne + (Sg - Ni - 5), Kc);
                                    break;
                                case 6:
                                case 7:
                                    if (Yf =
                                            (Md = Qn[fd.m]) ? zj.width($h, 2, Md) : 0, Ne = Cq, Nd = vh - 1.3 * yh * 3 / 4, Kc = Xf - Ih(fd, 1), Uo(Wf, Ne, Nd, Ne, Kc), Md && jo(xh, Md, Ne - Math.round(Yf / 2), Kc - Oi), $d = Ne + 5, Ce = $d + (Sg - wh - Ni) - 1, Nd = Kc, Kc = 0 === fd.g ? vh : Xf - Ih(fd, 3), Uo(Wf, $d, Nd, Ce, Kc), 0 !== fd.g && (Md = Qn[fd.g])) Yf = zj.width($h, 2, Md), jo(xh, Md, Ce - Math.round(Yf / 2), Kc - Oi - (Kc > Nd ? 10 : 0))
                            }
                        }
                    }
                } else if (!z && x || z && 0 < v || z && 0 > v && kk(c.P)) {
                fp(a, z, n, c, d, e + sh(p) / 2, e - 1.5 * k, !1);
                return
            }
            e += -.13 * k / 2;
            if (p.Cb && !c.ga && !n.L) {
                var $e = 1 !== c.ja.V.length && 0 === c.Hb,
                    pm, qm;
                $e ? (pm = e - b.L[q], qm = e) : (pm = e += sh(p), qm =
                    e + b.Ia[q]);
                var zh = na,
                    Zj = pm,
                    rm = qm,
                    ai = a.g,
                    sm = a.o.I,
                    vf = a.o.g,
                    bi = 1.3 * vf,
                    lu = c.X,
                    ak = sh(c.track),
                    tm = 3.9 * vf,
                    Ug = $e ? ak : 0,
                    Pi = null,
                    wg = $e ? rm - tm : Zj + tm,
                    mu = 1 !== c.ja.V.length,
                    um, kg;
                ai.fillStyle = tk(c) ? "#999" : a.m;
                if (t) {
                    if (hk(c)) {
                        for (um = t; um--;)
                            if (kg = lu[um].ra * bi, $e && kg < Ug || !$e && kg > Ug) Ug = kg;
                        Ug = $e ? Ug - bi / 2 : ak - Ug - 3 * bi / 4;
                        K(ai, zh - .16 * vf / 2, $e ? wg : Zj - Ug, .16 * vf, tm + Ug)
                    }
                    if (null === c.J)(Pi = uj(c, $e)) && zo(sm, ai, Pi, zh, wg);
                    else {
                        var bk = Ig(c),
                            nu = dk(Jg(bk)),
                            Dq = bk.ka[Qi(bk.ka, c) + 1],
                            ou = Dq ? dk(Dq) : 0;
                        so(ai, zh, wg, $e, c, bk, ou, nu, .5 * vf, 1 * vf)
                    }
                } else 23 !==
                c.bb && (Pi = Bj(c), mu && 2 !== c.bb ? kg = $e ? rm - bi : Zj + bi : (kg = $e ? rm + ak / 2 : Zj - ak / 2, 1 === (c.track.gb & 1) || (kg -= bi / 2)), zo(sm, ai, Pi, zh, kg));
                c.ba.J && (Pi && (zh += vf), t && (kg = wg), zo(sm, ai, 57831, zh + .45 * vf, kg + vf / 2 * ($e ? 1 : -1)));
                if (gk(c)) {
                    var ck = Oj(c);
                    ck.ka[0] === c && ($e ? (wg -= 1.5 * vf, Eg(ck) || (wg += .75 * vf)) : (wg += .75 * vf, Eg(ck) || (wg += 1.5 * vf)), gp(a, ck, zh, wg, $e, !0))
                }
            }
        }
    }
}

function hp(a, b, c, d) {
    var e = a.g;
    a = a.o.I;
    b = Kg(b);
    var f, g, h;
    f = 0;
    for (g = b.length; f !== g; f++) h = ":" === b[f] ? 59530 : In[parseInt(b[f], 10)], zo(a, e, h, c, d), c += a.width(h)
}

function gp(a, b, c, d, e, f) {
    var g = a.g,
        h = a.o.g,
        k;
    k = a.o.I;
    for (var l = 0, m = Kg(b), n = m.length, p; n--;) p = ":" === m[n] ? 59530 : In[parseInt(n, 10)], l += k.width(p);
    k = l;
    l = .75 * h;
    m = .16 * h;
    n = .5 * h;
    g.fillStyle = qk(b.ka[0]) ? "#aaa" : a.m;
    Eg(b) ? (f = c, p = b.ka[b.ka.length - 1], p = p.x + si(p) - 1 - b.ka[0].x, f += p, p = (f - c - k - n - n) / 2, e ? (K(g, c, d, m, l), K(g, f, d, m, l), K(g, c, d, p, m), K(g, c + p + k + n + n, d, p, m), hp(a, b, c + p + n, d + 1.5 * h / 2)) : (K(g, c, d, m, l), K(g, f, d, m, l), K(g, c, d + l - 1, p, m), K(g, c + p + k + n + n, d + l - 1, p, m), hp(a, b, c + p + n, d + l + 1.5 * h / 2))) : (g = Ig(b.ka[0]), e && !f && (c += si(b.ka[0]) -
        .16 * h), hp(a, b, c + (g.width() - k) / 2, d))
}

function fp(a, b, c, d, e, f, g, h) {
    var k = a.o;
    a = a.g;
    var l = k.g,
        m = c.g,
        n = sl(k.I, m),
        p = l * (h ? 1 : 1.3),
        q = 0 > m,
        r = .16 * l,
        t = [],
        w = !0;
    if (b)
        if (b = k.K.U[0 < m ? d.P.$ + m - 1 : d.P.$ + m + Jk(c) - 1], b.Sa !== d.P.Sa) w = !1, d = k.L - $f(d);
        else {
            b.fb || (b = c.P);
            var v = Hl(b);
            d = ek(k) + b.x + (null === v ? 0 : b.La[v].x + b.La[v].width) - $f(d) - 1 * l
        }
    else d = d.width - 1 * l;
    q || K(a, e, f - p, r, 2 * p);
    w && K(a, e + d - r, f - p, r, 2 * p);
    K(a, e, f - .5 * l / 2, d, .5 * l);
    q || !h && c.track.va || (Ao(m, t), yo(k.I, a, t, e + (d - n) / 2, g))
}

function ip(a, b, c, d, e, f, g, h) {
    var k = a.g,
        l = a.o.I;
    a = a.o.g;
    var m = .3 * a,
        n = .5 * a,
        p = .16 * a;
    if (8 === h) K(k, e - p, f, p, g);
    else if (9 === h) K(k, e - n, f, n, g), K(k, e - n - m - p, f, p, g);
    else if (11 === h) K(k, e - p, f, p, g), K(k, e - Math.ceil(p + m) - p, f, p, g);
    else {
        var q = l.width(57412);
        0 === b ? (b = 1.3 * a * (Math.ceil(c.gb / 2) - 1), c = 1.3 * a * (c.gb + 2 >> 1)) : 1 === b ? (b = 2 * a, c = 3 * a) : (b = g / 3 + a / 2, c = 2 * g / 3 + a / 2);
        6 === h ? (K(k, d, f, n, g), d += n + m, K(k, d, f, p, g), d += .3 * a + 1, zo(l, k, 57412, d, f + b), zo(l, k, 57412, d, f + c)) : (10 === h && (e -= n, K(k, e, f, n, g)), e -= m + p, K(k, e, f, p, g), e -= .3 * a + q, zo(l, k, 57412,
            e, f + b), zo(l, k, 57412, e, f + c))
    }
}

function jp(a, b, c, d, e, f) {
    var g = a.g,
        h = a.o.I,
        k = a.o.g,
        l = .5 * k,
        m = [],
        n = [],
        p = ll(b),
        q = f ? 1.3 * (c.gb - 1) * k / 2 : (Un[c.g] + (c.g - 1) / 2) * k,
        r, t;
    if (p || f) d += l;
    Ao(b.Fb, m);
    Ao(b.Gb, n);
    r = sl(h, b.Fb);
    b = sl(h, b.Gb);
    t = r > b ? r : b;
    if (p && !f)
        for (f = e + Un[c.g] * k, g.fillStyle = a.R, K(g, d - l / 2, e, t + l, 4.13 * k), g.fillStyle = a.I, p = 0; p !== c.g; p++) K(g, d - l / 2, f - (.065 - p) * k, t + l, .13 * k);
    g.fillStyle = a.m;
    yo(h, g, m, d + (r < t ? (t - r) / 2 : 0), e + q - k);
    yo(h, g, n, d + (b < t ? (t - b) / 2 : 0), e + q + k)
}

function kp(a, b, c, d, e, f) {
    var g = a.g;
    g.fillStyle = a.m;
    xo(a.o.I, g, b.g, e, f + ("T" === b.J ? 1.3 * c.o.g * (c.gb - 1) / 2 : c.o.g * (1 === c.g ? Un[1] : c.g - b.qa)), "T" === b.J ? 1 / 1.3 * (c.gb - 1) / 4 : d ? .66 : 1)
}

function lp(a, b, c, d, e) {
    var f = a.g,
        g = a.o.g,
        h = 1.56 * g,
        k = a.o.I;
    f.fillStyle = a.m;
    if (b) {
        var l = b.kc;
        io(f, h, 2);
        l && (jo(f, l, c, d), c += zj.width(h, 2, l + "   "));
        b.qc && (l = Mn[b.g][0], xo(k, f, l, c, d, .55), c += .55 * k.width(l), Mn[b.g][1] && (c += .45 * g * .55, xo(k, f, 57852, c, d, .55), c += .55 * k.width(57852)), l = " = " + b.m, io(f, h, 2), jo(f, l, c, d), c += zj.width(h, 2, l) + 2.5 * g)
    }
    if (e) {
        b = .55 * g;
        h = 2.975 * g;
        l = 2.5 * g;
        if ("t8" === e || "d8" === e || "s8" === e || "n" === e) c = mp(a, c, d, h, l, 1, 1, !1, !1, !1, !1);
        else {
            if ("d16" === e || "s16" === e) h = 3.5 * g * 1.1;
            c = mp(a, c, d, h, l, 2, 2, !1, !1, !1, !1)
        }
        c += b;
        xo(k, f, 61, c, d, .55);
        c += .55 * k.width(61) + b;
        switch (e) {
            case "n":
                mp(a, c, d, h, l, 1, 1, !1, !1, !1, !1);
                break;
            case "t8":
                mp(a, c, d, h, l, 0, 0, !1, !1, !0, !0);
                break;
            case "t16":
                mp(a, c, d, h, l, 1, 2, !1, !1, !1, !0);
                break;
            case "d8":
                mp(a, c, d, h, l, 1, 2, !0, !1, !1, !1);
                break;
            case "d16":
                mp(a, c, d, h, l, 2, 3, !0, !1, !1, !1);
                break;
            case "s8":
                mp(a, c, d, h, l, 2, 1, !1, !0, !1, !1);
                break;
            case "s16":
                mp(a, c, d, h, l, 3, 2, !1, !0, !1, !1)
        }
    }
}

function mp(a, b, c, d, e, f, g, h, k, l, m) {
    d *= .55;
    e *= .55;
    var n = a.g,
        p = a.o.g;
    a = a.o.I;
    var q = .55 * a.width(57508),
        r = f <= g ? f : g,
        t = c - d,
        w = .275 * p,
        v = .16 * p * .55,
        x, A, z;
    if (h || m) e += .55 * p;
    m && (z = .55 * p, x = .75 * p * .55, A = .16 * p * .55, m = .55 * a.width(59523), xo(a, n, 59523, b + (q + e - m) / 2, t - z, .55), m = t - z - x, K(n, b, m, A, x), K(n, b, m, q, A), K(n, b + e, m, q, A), K(n, b + q + e, m, A, x));
    xo(a, n, 57508, b, c, .55);
    b += q - v;
    K(n, b, t, v, d);
    h && xo(a, n, 57831, b + .45 * p * .55, c, .55);
    for (h = r; h--;) K(n, b, t + h * w * 1.5, e, w);
    if (f > g)
        for (h = f; h-- > g;) K(n, b, t + h * w * 1.5, q, w);
    else if (f < g)
        for (h = g; h-- > f;) K(n,
            b + e - q, t + h * w * 1.5, q, w);
    b += e;
    K(n, b, t, v, d);
    xo(a, n, 57508, b - q + v, c, .55);
    k && xo(a, n, 57831, b + .45 * p * .55, c, .55);
    l && xo(a, n, 57920, b, c - d, .55);
    return b + .16 * p * .55
}

function np(a, b, c, d, e, f, g, h, k, l) {
    for (var m = a.g, n = f; n--;) K(m, b, c + n * h, g, k);
    if (l) {
        g = a.o.selection;
        for (var p, n = d.length; n--;) {
            l = d[n];
            p = l.O[e];
            var q;
            if (q = !l.R && !l.m && g && !g.N(p)) a: {
                q = bl(p.P);
                for (var r = p.V.length; r--;)
                    if (q !== dl(p, r)) {
                        q = !0;
                        break a
                    }
                q = !1
            }
            q && (m.fillStyle = "red", p = l.x < b ? b - l.x : 0, np(a, ek(a.o) + l.x + p, c, d, e, f, l.width - p, h, k, !1))
        }
    }
}

function Qo(a, b) {
    var c = a.o,
        d = a.g,
        e = a.height,
        f = c.Aa,
        g = yn(c) + (c.oa ? c.Vb ? 10 : 40 : 0),
        h, k, l;
    d.fillStyle = a.R;
    K(d, 0, 0, a.width, e);
    h = 0;
    for (k = f.length; h !== k; h++)
        if (l = f[h], g += l.height, 0 <= g) {
            var m = a,
                n = l,
                p = b,
                q = m.o,
                r = q.K,
                t = q.g,
                w = r.O,
                v = q.R,
                x = ek(q),
                A = x + (ol(r) ? 1.25 * t : 0),
                z = n.y + yn(q) + n.Aa + n.ya + n.sa + n.oa,
                y = z,
                I = -1,
                R = z,
                V;
            if (V = n.U.length) a: {
                var ba = n.U[0];
                if (kk(ba))
                    for (var ea = ba.O.length, ca = 0, na,
                             ta; ea--;)
                        if (na = ba.O[ea], ta = na.track, na.Ka && (ta.Ja || ta.va) && (ca++, 1 < ca || ta.Ja)) {
                            V = !0;
                            break a
                        }
                V = !1
            }
            var W = V,
                ha = 0 === n.$,
                ka, ab, bb, pa;
            ka = 0;
            for (ab = w.length; ka < ab; ka++)
                if (bb = w[ka], Fo(n, ka, bb)) {
                    var La = m,
                        Z = n,
                        cb = bb,
                        tb = A,
                        ra = y + n.W[ka] + n.m[ka],
                        Yc = !ha,
                        Ha = La.o,
                        Pb = La.g,
                        sa = Ha.g,
                        za = cb.index,
                        qd = Z.width - tb,
                        yb = -1,
                        db = ra,
                        rd = cb.g;
                    Ha.R && (qd = Ha.pa - 20 - tb + ek(Ha), 0 > tb && (qd += tb, tb = 0));
                    cb.va && (Pb.fillStyle = La.I, ra += Z.N[za] + Z.I[za] + Z.R[za] + Z.g[za], Yc && (io(Pb, 1.3 * sa, 2, !1, !0), Pb.fillStyle = La.I, jo(Pb, String(Z.U[0].$ + 1), tb, ra - (cb.va && cb.Ja ? 2.25 * sa : 1.5 * sa))), yb = ra, ra += Un[rd] * sa, np(La, tb, ra, Z.U, za, rd, qd, sa, .13 * sa, Ha.N), db = ra = yb + 4.13 * sa, ra += Z.J[za] + Z.ia[za] + Z.Y[za] +
                        Z.da[za] + Z.ea[za]);
                    cb.Pa && (ra += Z.T[za]);
                    if (cb.Ja) {
                        if (cb.va || cb.Pa) ra += 1.2 * sa;
                        ra += Z.la[za] + Z.pa[za] + Z.na[za] + Z.aa[za] + Z.L[za]; -
                            1 === yb && (yb = ra);
                        Pb.fillStyle = La.oa;
                        np(La, tb, ra, Z.U, za, cb.gb, qd, 1.3 * sa, .13 * sa, Ha.N);
                        db = ra += sh(cb);
                        ra += Z.Ia[za]
                    }
                    La.N = ra;
                    La.W = yb;
                    La.na = db;
                    ha = !0;
                    y !== m.N && (m.N += rh(bb));
                    y = m.N; -
                        1 === I && -1 !== m.W && (I = m.W);
                    R = m.na
                }
            ka = 0;
            for (ab = n.U.length; ka < ab; ka++) {
                pa = n.U[ka];
                var Zc;
                if (!(Zc = !v)) a: {
                    var kc = pa.o,
                        Dc = pa.K,
                        D = pa.x + x,
                        zb = kc.L;
                    if (kc.N)
                        for (var aa = pa.O, Ua = aa.length; Ua--;)
                            if (aa[Ua].Ka && 0 < aa[Ua].g) {
                                var ua =
                                    Dc.U[pa.$ + aa[Ua].g - 1];
                                Zc = D < zb && 0 < ua.x + ua.width + x;
                                break a
                            }
                    Zc = 0 < D + pa.width + 500 && D < zb
                }
                if (Zc) {
                    var U = m,
                        C = n,
                        N = pa,
                        Ab = p,
                        tc = U.o,
                        T = tc.g,
                        uc = .065 * T,
                        sd = 4.13 * T,
                        Kb = tc.sa,
                        $b = N.m,
                        Aa = U.g,
                        eb = ek(tc),
                        Vb = yn(tc),
                        va = N.y + Vb,
                        Lc = Kl(N),
                        lc = Il(N),
                        X = N.x + (lc ? lc.x : 0) + eb,
                        Ba = tc.K.Za,
                        Dd = N.$,
                        Ec = !1,
                        fa = N.O.length,
                        ga, ma, wa, gd, E,
                        ad, S, Ma, Lb, da, Va;
                    if ($b) {
                        var fb = lc.width,
                            Fc;
                        da = (Kb ? C.y : Eo(C)) | 0;
                        var Wa;
                        if (Kb) Wa = Math.ceil(C.height) - 2.5 * T;
                        else {
                            var la;
                            a: {
                                for (var Ca = C.K.O, Da = Ca.length, Pa = 0,
                                         vc = void 0; Da--;)
                                    if (vc = Ca[Da], Fo(C, Da, vc)) {
                                        Pa = Gk(C, Da) + C.ac[Da];
                                        if (vc.Ja) {
                                            la = Pa - C.Ia[Da];
                                            break a
                                        }
                                        vc.Pa && (Pa -= C.T[Da]);
                                        if (vc.va) {
                                            la = Pa - C.ea[Da] - C.da[Da] - C.Y[Da] - C.ia[Da] - C.J[Da];
                                            break a
                                        }
                                    }
                                la = Pa
                            }
                            Wa = Math.ceil(la) - da
                        }
                        Fc = Wa;
                        Kb || (da += va + C.Aa + C.ya + C.sa + C.oa);
                        Aa.fillStyle = "rgba(245, 245, 245, 0.9)";
                        K(Aa, X, da, fb, Fc);
                        Aa.fillStyle = "#000";
                        io(Aa, 1.6 * T, 2);
                        jo(Aa, $b, X + (fb - zj.width(1.6 * T, 2, $b)) / 2, da + Fc / 2 + 1.6 * T / 4)
                    }
                    va += C.Aa;
                    if (Ab && tc.oa) {
                        if (!Kb) {
                            for (wa = Ba.length; wa--;) Va = Ba[wa], !Va.qc && "" === Va.kc || Dd !== Va.Ta || (0 === Va.za && Lc && (Ec = !0), lp(U, Va, Va.za ? N.x + Fl(N, Va.za) : X, va - 1.7 * T, 0 === Va.za ?
                                Lc : null));
                            Lc && !Ec && lp(U, null, X, va - 1.7 * T, Lc)
                        }
                        if (N.J || N.L) {
                            var mc = U,
                                nc = N,
                                Qa = X,
                                Mb = va,
                                gb = mc.g,
                                qa = mc.o.g,
                                Qb = 1.6 * qa,
                                hb = .3 * qa,
                                ub = void 0;
                            io(gb, Qb, 2, !0);
                            gb.fillStyle = mc.m;
                            nc.J && (gb.strokeStyle = mc.m, gb.lineWidth = .1 * qa * J, ub = zj.width(Qb, 2, nc.J, !0), oo(gb, Qa, Mb, Qa + ub + hb + hb, Mb, Qa + ub + hb + hb, Mb + Qb + hb, Qa, Mb + Qb + hb, !1), jo(gb, nc.J, Qa + hb, Mb + Qb), Qa += ub + 4 * hb);
                            nc.L && jo(gb, nc.L, Qa, Mb + Qb)
                        }
                    }
                    va += C.ya;
                    va += C.sa;
                    if (Ab) {
                        if (N.g)
                            for (var Ea = N, Ra = X - 1 * T, td = va - 1 * T, Bb = U.g, Cb = U.o.I, wc = U.o.g,
                                     Ia = 1.8 * wc, Na = Ea.g, ac = Na.length, ib = td, bd = td, Y = void 0,
                                     oa = void 0; ac--;)
                                if (Y = Na[ac], fj(Pn, Y)) {
                                    switch (Y) {
                                        case 15:
                                            zo(Cb, Bb, 57416, Ra, ib);
                                            break;
                                        case 17:
                                            zo(Cb, Bb, 57415, Ra, ib);
                                            break;
                                        case 16:
                                            yo(Cb, Bb, [57416, 57416], Ra, ib);
                                            break;
                                        case 18:
                                            yo(Cb, Bb, [57415, 57415], Ra, ib)
                                    }
                                    ib -= 4 * wc
                                } else io(Bb, Ia, 3), oa = On[Na[ac]], jo(Bb, oa, Ea.x + Ea.width - zj.width(Ia, 3, oa), bd), bd -= Ia;
                        if (N.cb) {
                            var bc = X,
                                Wb = va,
                                Rb = U.g,
                                dc = U.o,
                                jb = dc.g,
                                Db = .16 * jb,
                                ja = dc.I,
                                hd = ek(dc),
                                oc = N.cb,
                                pb = fl(N),
                                Xb = gl(N),
                                Mc = kk(N) || null === Xb.cb || !Wn(Xb.cb, oc),
                                Sb = pb && null !== pb.cb && Wn(pb.cb, oc),
                                Eb = Sl(N) || Sb,
                                nb = null !== pb && null !== pb.cb &&
                                    !Sb,
                                Tb = void 0,
                                bc = kk(N) ? bc : hd + N.x - .16 * jb,
                                Tb = hd + N.x + N.width - bc - (Eb ? 0 : .5 * jb);
                            Rb.fillStyle = U.m;
                            K(Rb, bc, Wb, Tb, Db);
                            if (Mc) {
                                K(Rb, bc, Wb, Db, 2 * jb);
                                for (var id = 0, Gc = oc.length, ec = bc + .7 * jb, fc = Wb + 1.3 * jb,
                                         ud = void 0; id !== Gc; id++) ud = Fn[oc[id]], xo(ja, Rb, ud, ec, fc, .6), ec += .6 * ja.width(ud) + .1 * jb, id !== Gc - 1 ? (xo(ja, Rb, 57494, ec, fc + .6 * jb, .6), ec += jb) : xo(ja, Rb, 57412, ec, fc + .9 * jb, .85)
                            }
                            nb && K(Rb, bc + Tb - .16 * jb, Wb, Db, 2 * jb)
                        }
                    }
                    va += C.oa;
                    if (Ab && !$b)
                        for (Aa.fillStyle = U.m, wa = 0, gd = fa; wa !== gd; wa++)
                            if (ga = N.O[wa], ga.Ka) {
                                S = ga.track;
                                da = va + Gk(C, wa) +
                                    C.W[wa] + C.m[wa];
                                if (S.va) {
                                    da += C.N[wa] + C.I[wa] + C.R[wa] + C.g[wa];
                                    if (ga.R.length)
                                        for (var Fb = U, vd = ga, Za = eb + N.x, Oa = da + uc, Ed = Fb.g, Fe = Fb.o.g,
                                                 xc = void 0, Gb = void 0, Nb = void 0, Ub = void 0, ob = void 0,
                                                 Hb = void 0, gc = void 0, qb = void 0, Ge = void 0, fe = void 0,
                                                 Pd = void 0, jd = void 0, Ib = void 0, cd = void 0, dd = void 0,
                                                 Ue = void 0, wd = void 0, Qd = void 0, He = void 0, ge = void 0,
                                                 Rd = void 0, Yb = void 0, Hc = void 0, xc = 0,
                                                 Nb = vd.R.length; xc < Nb; xc++) {
                                            ob = vd.R[xc];
                                            Hb = Xg(ob);
                                            gc = Vg(ob);
                                            Ib = Za + Qg(Hb);
                                            cd = Za + Qg(gc);
                                            dd = Oa + Pj(Hb, !0, !0, ob.m);
                                            Ue = Oa + Pj(gc, !0, !0, ob.m);
                                            Qd =
                                                Ib === cd ? 0 : (Ue - dd) / (cd - Ib);
                                            He = dd - Qd * Ib;
                                            if (Hb !== ob.ka[0] || gc !== Jg(ob)) Ib = Za + Qg(ob.ka[0]), dd = Qd * Ib + He, cd = Za + Qg(Jg(ob)), Ue = Qd * cd + He;
                                            ge = .5 * Fe * (Hb.ga ? .65 : 1);
                                            wd = Hb.wa ? -1 : 1;
                                            Ed.fillStyle = qk(Hb) ? "#aaa" : Fb.m;
                                            oo(Ed, Ib, dd, cd, Ue, cd, Ue - wd * ge, Ib, dd - wd * ge, !0);
                                            Gb = 0;
                                            for (Ub = ob.g; Gb !== Ub; Gb++)
                                                if (qb = ob.ka[Gb], !qb.ta)
                                                    for (Yb = Gb + 1 === Ub ? null : ob.ka[Gb + 1], Hc = 0 === Gb ? null : ob.ka[Gb - 1], Ib = Za + Qg(qb), Ge = Qd * Ib + He, fe = ri(qb); 1 < fe--;) {
                                                        if (Yb && !Yb.ta && ri(Yb) > fe && Yb.kb === qb.kb) cd = Za + Qg(Yb), Rd = !1;
                                                        else if (Yb && (!Hc || ri(Hc) <= fe)) cd = Ib + si(qb) -
                                                            1, Rd = !0;
                                                        else if (Hc && (Hc.ta || ri(Hc) <= fe || Hc.kb !== qb.kb)) cd = Ib - si(qb) - 1, Rd = !0;
                                                        else continue;
                                                        Pd = Rd && ob.I !== qb.wa ? Ge + 1.5 * ge * fe * (qb.wa ? 1 : -1) : Ge - 1.5 * wd * ge * fe;
                                                        jd = Qd * (cd - Ib) + Pd;
                                                        oo(Ed, Ib, Pd, cd, jd, cd, jd - wd * ge, Ib, Pd - wd * ge, !0)
                                                    }
                                        }
                                    if (ga.Y.length)
                                        for (E = 0, ad = ga.Y.length; E !== ad; E++) {
                                            var Sd = ga.Y[E],
                                                Ve = U,
                                                lf = Sd,
                                                ed = eb + N.x + Sd.ka[0].x,
                                                Fd = da + uc,
                                                Ie = Sd;
                                            null === Ie.m && Cg(Ie, tc);
                                            gp(Ve, lf, ed, Fd + Ie.m, Dg(Sd), !1)
                                        }
                                    da += sd + C.J[wa] + C.ia[wa] + C.Y[wa] + C.da[wa] + C.ea[wa]
                                }
                                S.Pa && (da += C.T[wa]);
                                (S.va || S.Pa) && S.Ja && (da += 1.2 * T);
                                if (S.Ja) {
                                    da += C.la[wa];
                                    if (C.aa[wa]) {
                                        for (var Td = U, Ud = wa, Df = eb + N.x, fg = da, Je = N.La, mf = N.fb, Nc = null,
                                                 Gd = null, Zb = void 0, vb = void 0, pc = void 0, Vd = void 0, Wd = void 0,
                                                 vb = 0; vb !== mf; vb++) {
                                            Vd = Je[vb];
                                            Zb = !1;
                                            if (1 === Vd.$b)
                                                for (pc = Vd.Ma.length; pc--;) {
                                                    var Wd = Vd.Ma[pc],
                                                        Xa;
                                                    if (Xa = Wd && Wd.track.index === Ud) a: if (Wd.Tc) Xa = !0;
                                                    else {
                                                        for (var qc = Wd.X, xd = qc.length; xd--;)
                                                            if (qc[xd].aa) {
                                                                Xa = !0;
                                                                break a
                                                            }
                                                        Xa = !1
                                                    }
                                                    if (Xa) {
                                                        Nc = Wd;
                                                        Zb = !0;
                                                        break
                                                    }
                                                }
                                            Zb ? null === Gd && (Gd = Vd.x) : null !== Gd && (Xo(Td, Nc, Df + Gd, fg, Vd.x - Gd), Gd = null)
                                        }
                                        null !== Gd && Xo(Td, Nc, Df + Gd, fg, Vd.x +
                                            Vd.width - Gd)
                                    }
                                    if (Kk(ga)) {
                                        var hc = U,
                                            Oc = S,
                                            he = X,
                                            Sf = da,
                                            yc = hc.g,
                                            kd = 1.5 * hc.o.g,
                                            Xd = "";
                                        io(yc, kd, 2);
                                        yc.fillStyle = hc.m;
                                        Oc.Jb && (Xd = "Capo " + Oc.Jb);
                                        jh(Oc) && (Xd && (Xd += "; "), Xd += ih(Oc));
                                        jo(yc, Xd, he, Sf + kd)
                                    }
                                }
                            }
                    wa = 0;
                    for (gd = N.fb; wa !== gd; wa++) switch (ma = N.La[wa], Ma = ma.$b, X = eb + N.x + ma.x, Ma) {
                        case 1:
                            if (Ab && !$b)
                                for (E = 0, ad = ma.Ma.length; E !== ad; E++) Lb = ma.Ma[E], null !== Lb && Lb.ja.Ka && ep(U, C, Lb, X, va + Gk(C, Lb.track.index));
                            break;
                        case 16:
                            Ab && !$b && (Lb = ma.Ma[0], ep(U, C, Lb, X, va + Gk(C, Lb.track.index)));
                            break;
                        case 17:
                            Aa.fillStyle = U.m;
                            for (E = fa; E--;)
                                if (ga =
                                        N.O[E], ga.Ka && ga.track.va)
                                    if (1 === ga.track.Xa && N.O[E + 1].Ka) {
                                        da = ci(ga);
                                        var nf = ci(N.O[E + 1]) + sd - da,
                                            We = U.g,
                                            Sa = X,
                                            ve = da + Vb + nf,
                                            kb = 1 * U.o.g;
                                        io(We, nf, 1);
                                        We.fillText(String.fromCharCode(57344), Sa * J, ve * J, kb * J)
                                    } else if (ga.track.Ja) {
                                        da = ci(ga);
                                        var Ja = X,
                                            zc = da + Vb,
                                            Xe = Dk(ga) + sh(ga.track) - da,
                                            ie = U.g,
                                            we = U.o.I,
                                            Ic = U.o.g,
                                            Xe = Xe + Ic / 2,
                                            Ja = Ja + Ic / 4,
                                            zc = zc - Ic / 4;
                                        zo(we, ie, 57347, Ja, zc + 1);
                                        K(ie, Ja, zc, .5 * Ic, Xe);
                                        zo(we, ie, 57348, Ja, zc - 1 + Xe)
                                    }
                            break;
                        case 15:
                            var je;
                            Aa.fillStyle = U.m;
                            for (E = fa; E--;)
                                if (ga = N.O[E], ga.Ka && ga.track.va && ga.track.index ===
                                    ma.g) {
                                    var ld;
                                    a: {
                                        var ke = void 0;
                                        if (ga.m)
                                            for (ke = ga.m.length; ke--;)
                                                if (ga.m[ke].g == ma.offset) {
                                                    ld = ga.m[ke].m;
                                                    break a
                                                }
                                        ld = null
                                    }
                                    if (je = ld || Ok(ga).J) da = va + Gk(C, E) + C.W[E] + C.m[E] + C.N[E] + C.I[E] + C.R[E] + C.g[E], kp(U, je, ga.track, !0, X - ma.jb, da + uc)
                                }
                            break;
                        case 8:
                        case 11:
                        case 9:
                        case 10:
                        case 12:
                        case 6:
                        case 3:
                        case 4:
                        case 13:
                        case 5:
                            for (Aa.fillStyle = U.m, E = 0, ad = fa; E !== ad; E++)
                                if (ga = N.O[E], ga.Ka)
                                    if (S = ga.track, da = va + Gk(C, E) + C.W[E] + C.m[E], 8 === Ma || 9 === Ma || 6 === Ma || 10 === Ma || 12 === Ma || 11 === Ma) {
                                        var xe = X + ma.width,
                                            yd;
                                        if (S.va) {
                                            yd = sd;
                                            if (1 ===
                                                S.Xa && N.O[E + 1].Ka || S.Ja) yd += C.J[E] + C.ia[E] + C.Y[E] + C.da[E] + C.ea[E], S.Pa && (yd += C.T[E]), yd = S.Xa ? yd + (rh(S) + C.W[E + 1] + C.m[E + 1] + C.N[E + 1] + C.I[E + 1] + C.R[E + 1] + C.g[E + 1]) : yd + (1.2 * T + C.la[E]);
                                            da += C.N[E] + C.I[E] + C.R[E] + C.g[E];
                                            if ((10 === Ma || 12 === Ma) && null !== N.lb && 2 < N.lb && (2 !== S.Xa || !Ng(ga).Ka)) {
                                                io(Aa, 1.5 * T, 2, !0);
                                                var Ef = N.lb + "x";
                                                jo(Aa, Ef, xe - zj.width(1.5 * T, 2, Ef, !0), da - T)
                                            }
                                            ip(U, 1, S, X, xe, da, yd, Ma);
                                            da += sd + C.J[E] + C.ia[E] + C.Y[E] + C.da[E] + C.ea[E]
                                        }
                                        da += C.T[E];
                                        if (S.Ja) {
                                            if (S.va || S.Pa) da += 1.2 * T;
                                            ip(U,
                                                0, S, X, xe, da + C.la[E] + C.pa[E] + C.na[E] + C.aa[E] + C.L[E], sh(S), Ma)
                                        } else Kb && ip(U, 2, S, X, xe, da - C.m[E], C.m[E], Ma)
                                    } else if (3 === Ma) S.va && (da += C.N[E] + C.I[E] + C.R[E] + C.g[E], kp(U, ga.J, S, !1, X + .5 * T, da + uc), S.Ja && kp(U, ga.ia, S, !1, X + .5 * T, da + sd + C.J[E] + C.ia[E] + C.Y[E] + C.da[E] + C.ea[E] + C.T[E] + 1.2 * T + C.la[E]));
                                    else if (4 === Ma || 13 === Ma) {
                                        if (S.va) {
                                            var Pc = U,
                                                rb = ga,
                                                zd = X,
                                                le = da + C.N[E] + C.I[E] + C.R[E] + C.g[E] + uc,
                                                Hd = 13 === Ma;
                                            if ("P" !== rb.J.m) {
                                                var md = Pc.g,
                                                    Ad = Pc.o.I,
                                                    of = Pc.o.g,
                                                    Jb = Hd || ml(rb.P) && !kk(rb.P);
                                                Hd && (rb =
                                                    Ok(rb));
                                                Jb && (zd += 1 * of );
                                                var Ke = Jb && 0 === rb.T,
                                                    me = Ke ? el(rb).T : rb.T,
                                                    Id = dj[me],
                                                    Qc = Ke ? 57953 : 2 === Id[1] ? 57954 : 57952,
                                                    pf = Ad.width(Qc) * (Ke ? 1.5 : 1),
                                                    qf = Vn[rb.J.J][2 === dj[me][1] ? 0 : 1],
                                                    ne = 0,
                                                    Le = Id[0].length;
                                                for (md.fillStyle = Pc.m; ne !== Le; ne++) zo(Ad, md, Qc, zd, le + qf[ne] * of / 2), zd += pf
                                            }
                                        }
                                    } else {
                                        S.va && (da += C.N[E] + C.I[E] + C.R[E] + C.g[E], jp(U, N, S, X, da + uc, !1), da += sd + C.J[E] + C.ia[E] + C.Y[E] + C.da[E] + C.ea[E]);
                                        if (S.va || S.Pa) da += 1.2 * T;
                                        S.Pa && (da += C.T[E]);
                                        S.Cb && jp(U, N, S, X, da + C.la[E], !0)
                                    }
                    }
                } else if (pa.x > -x +
                    q.L) break
            }
            if (m.la && r.Nc) {
                m.g.fillStyle = m.I;
                io(m.g, 2 * t / 3, 2);
                var ye = soundslice.user_id.toString(20);
                jo(m.g, ye, m.width - m.g.measureText(ye).width / J, R + t)
            }
            W && -1 !== I && (m.g.fillStyle = "#000", K(m.g, A, I, .16 * t, R - I));
            if (g > e) break
        }
}

function Po(a) {
    var b = a.o,
        c = b.K,
        d;
    if (b.Wc && !b.da) {
        a.T.length = 0;
        if (!a.la) {
            if (rk(b.m) && (c = c.U[c.Qa[b.Ha]])) {
                b = b.Va;
                d = a.T;
                for (var e = c.O.length, f, g, h, k, l, m, n, p,
                         b = b * c.Ga.Ea; e--;)
                    if (f = c.O[e], f.Ka)
                        for (g = f.V.length; g--;)
                            for (h = f.V[g], k = h.length; k--;)
                                if (l = h[k], l.Ra <= b && l.Ra + l.Mb > b)
                                    for (m = l.X.length; m--;) {
                                        n = l.X[m];
                                        d.push(n);
                                        for (p = n; Lh(p);) {
                                            p = Mh(p, 1, !1, !1, !1, !1, !1);
                                            if (null === p) break;
                                            d.push(p)
                                        }
                                        for (p = n; Fh(p);) {
                                            p = Hh(p);
                                            if (null === p) break;
                                            d.push(p)
                                        }
                                    }
                d = c.$
            }
            if (!a.J && Wn(a.T, a.L) && d === a.da) return
        }
        Wl(a.T, a.L);
        a.da = d;
        Qo(a, !0);
        a.J = !1
    }
}

function op(a) {
    this.o = a;
    this.ma = bf(a, "mouseland");
    this.height = this.width = 0;
    this.I = -1;
    this.g = {};
    this.m = {};
    this.J();
    var b = this;
    a.assign([49], function() {
        b.J()
    });
    jn(this.ma, function(c, d) {
        a.N || pp(b, c, d)
    }, function(c, d) {
        a.N || qp(b, c, d)
    }, function(c, d, e) {
        a.N || rp(b, c, e)
    }, !1)
}
op.prototype = {
    J: $n
};

function rp(a, b, c) {
    if (c || 20 > Math.abs(a.I - b) && Ek(a.g.P).$ === Ek(a.m.P).$)
        if (sp(a.o.J, !1), b = a.o, b.K.U.length) {
            c = a.g;
            var d = c.P;
            c.Tb ? d.tb ? en(b.m, fn(b.aa[b.T], d, c.za)) : dn(b.m, d, c.Ya) : en(b.m, fn(Ld(b), d, c.za))
        }
    a.g.P = null;
    a.m.P = null
}

function tp(a, b, c) {
    a.o.J.set(b.P.$, b.za, b.Tb, c.P.$, c.za, c.Tb)
}

function qp(a, b, c) {
    if (a.o.K.U.length) {
        var d = a.g,
            e = a.m;
        up(a.o, b, c, e);
        d.P.$ < e.P.$ ? tp(a, d, e) : d.P.$ > e.P.$ ? tp(a, e, d) : d.za < e.za ? tp(a, d, e) : tp(a, e, d)
    }
}

function pp(a, b, c) {
    var d = a.o;
    if (d.K.U.length) {
        a.I = b;
        var e;
        a: {
            e = a.g;
            var f = a.o,
                g = f.J,
                h = vp(f, c),
                k, l;
            if (wp(g)) {
                k = f.K.U[g.m];
                if (h.$ === k.Sa && (l = El(k, g.I), 8 > Math.abs(b - l))) {
                    e.P = k;
                    e.za = g.I;
                    e = !0;
                    break a
                }
                k = f.K.U[g.g];
                if (h.$ === k.Sa && (l = El(k, g.J), 8 > Math.abs(b - l))) {
                    e.P = k;
                    e.za = g.J;
                    e = !0;
                    break a
                }
            }
            e = !1
        }
        e ? (b = d.J, a = c = a.g, c.P.$ === b.m && c.za === b.I ? (a.P = b.o.K.U[b.g], a.za = b.J, a.Tb = b.R) : (a.P = b.o.K.U[b.m], a.za = b.I, a.Tb = b.T)) : (up(d, b, c, a.g), sp(d.J, !1))
    }
}

function xp(a) {
    var b = this;
    this.o = a;
    this.N = this.L = this.J = this.g = this.I = this.m = -1;
    this.R = this.T = !1;
    sp(this, !0);
    this.ma = bf(a, "looper");
    this.height = this.width = 0;
    this.Y = this.ma.getContext("2d");
    this.ib = !1;
    this.aa = {};
    this.bc = function() {
        if (!b.o.da) {
            var a = b.Y,
                d = b.o,
                e = d.K.U,
                f = ek(d),
                d = yn(d),
                g = b.m,
                h = b.g,
                k = b.I,
                l = b.J,
                m, n = 0,
                p = 0,
                q, r, t, w;
            ho(a, b.width, b.height);
            if (wp(b) && !(g > h)) {
                b.Y.fillStyle = "rgba(178, 184, 221, 0.3)";
                for (r = g; r <= h; r++)
                    if (q = e[r], t = q.y + d, !(0 > t + q.height)) {
                        if (t > b.height) break;
                        if (m = nl(q)) {
                            w = q;
                            var v = 0,
                                x;
                            kl(q) && (v = -Rl(q), w = e[r - v]);
                            x = v / m;
                            r === g && (x += k / m);
                            v = (v + 1) / m;
                            r === h && (v -= (1 - l) / m);
                            m = El(w, x);
                            x = El(w, v);
                            w = x - m;
                            r === g && (n = m);
                            r === h && (p = x)
                        } else m = r === g ? El(q, k) : q.x + f, w = q.width, r === g && (n = m, w -= Fl(q, k)), r === h && (w -= q.width - Fl(q, l), p = m + w);
                        K(a, m, t, w, q.height)
                    }
                if (b.T || b.R) b.Y.fillStyle = "#EA6B24", b.T && (q = e[g], K(a, n - 1, q.y + d, 1, q.height)), b.R && (q = e[h], K(a, p - 1, q.y + d, 1, q.height))
            }
        }
        b.ib = !1
    };
    this.W();
    a.assign([49], function() {
        b.W()
    }, [35, 73, 30], function() {
        b.xa()
    }, [47], function() {
        yp(b);
        b.xa()
    })
}
xp.prototype = {
    set: function(a, b, c, d, e, f) {
        if (a === d && b === e) return sp(this, !1);
        this.m = a;
        this.I = b;
        this.T = c;
        this.g = d;
        this.J = e;
        this.R = f;
        zp(this);
        this.xa();
        this.o.dispatch(53)
    },
    W: $n,
    xa: Zn
};

function yp(a) {
    if (-1 !== a.L && -1 !== a.N) {
        var b = a.o,
            c = Ld(b),
            d = a.aa;
        Kd(c, a.L, d);
        a.m = b.K.Qa[d.Ha];
        a.I = d.Va;
        Kd(c, a.N, d);
        a.g = b.K.Qa[d.Ha];
        a.J = d.Va
    }
}

function zp(a) {
    if (wp(a)) {
        var b = a.o,
            c = Ld(b);
        a.L = fn(c, b.K.U[a.m], a.I);
        a.N = fn(c, b.K.U[a.g], a.J)
    }
}

function Ap(a, b, c) {
    b === c ? sp(a, !1) : (a.L = b, a.T = !1, a.N = c, a.R = !1, yp(a), a.xa(), a.o.dispatch(53))
}

function sp(a, b) {
    a.m = a.I = a.g = a.J = a.L = a.N = -1;
    a.T = a.R = !1;
    b || (a.xa(), a.o.dispatch(14))
}

function wp(a) {
    return -1 !== a.m && -1 !== a.g
}

function Bp(a) {
    var b = this;
    this.o = a;
    this.volume = this.I = 1;
    this.R = this.Fa = 0;
    this.g = this.m = null;
    this.N = 1;
    this.J = !1;
    this.L = 0;
    a.assign([57], function(a) {
        b.I = a.data
    }, [7], function(c) {
        c.data === a.T && (c = b.g, c.da(b.Fa), c.sb(b.I), c.setVolume(b.volume), c.ia && b.play())
    }, [38], function(c) {
        if (a.selection && 1 === a.selection.g.length) {
            var d = c.data[1];
            d && c.data[2] && b.m && (d.rb === d.Ra ? dn(b, d.P, d.Ca) : en(b, fn(Ld(a), d.P, d.rb / d.P.Ga.Ea)))
        }
    }, [44, 25], function(a) {
        var d = b.g;
        if (d && d.N) {
            var e = rk(b);
            b.pause();
            !e || a.data && !d.g.ya(a.data.qb) ||
            b.play()
        }
    });
    this.T = function() {
        Cp(b, !1)
    }
}
Bp.prototype = {
    Va: function() {
        var a = this.m;
        return Math.min(1, (this.Fa - a.I) / a.duration(!0))
    },
    play: function() {
        if (null !== this.g && !this.g.aa()) {
            var a = this.g,
                b = this.o;
            a.T() ? (wp(b.J) && en(this, b.J.L), 3 === this.N ? Dp(this) : Ep(this)) : (a.ia = !0, a.L() || a.Y())
        }
    },
    pause: function() {
        this.L && (clearTimeout(this.L), this.L = 0, this.o.na.g.pause(), this.J = !1, this.o.dispatch(40));
        try {
            this.g.pause()
        } catch (a) {}
    },
    sb: function(a) {
        if (null !== this.g && this.g.Ia && a !== this.I) {
            var b = this.g,
                c = b.pa(),
                d = b.na();
            a < c ? a = c : a > d && (a = d);
            b.T() || b.L() ?
                (b.sb(a), De(this)) : this.o.dispatch(57, a)
        }
    },
    setVolume: function(a) {
        0 > a ? a = 0 : 1 < a && (a = 1);
        a !== this.volume && (this.volume = a, this.g.setVolume(a), this.o.dispatch(61, a))
    }
};

function Cp(a, b) {
    if (rk(a)) {
        requestAnimationFrame(a.T);
        var c = a.o,
            d = c.la,
            e = (new Date).getTime(),
            f = e - (a.R || e),
            g = c.J,
            h = a.g,
            k = a.m,
            l = d ? 0 : k.I,
            d = d ? -1 : k.R;
        a.R = e;
        b || h.Ua ? (e = h.Fa(), null !== e ? a.Fa = e : e = a.Fa) : (a.Fa += f / 1E3 * a.I, e = a.Fa);
        wp(g) && (e < g.L - h.sa || e > g.N) ? 2 === a.N ? a.pause() : (c.dispatch(34), en(a, g.L)) : -1 !== d && e > d ? (a.pause(), c.dispatch(41)) : l && e < l - h.sa && en(a, l);
        Kd(k, e, c);
        c.ec = null;
        c.Zb && Fp(c, !1);
        c.dispatch(67)
    }
}

function dn(a, b, c) {
    var d = a.o,
        e = d.K,
        f = fn(Ld(d), b, Cl(c, b.Ga).Ea);
    Gp(a, f);
    d.Ha = Qi(e.Qa, b.$);
    d.Va = Cl(c, b.Ga).Ea;
    d.ec = c;
    Fp(d, !0);
    d.dispatch(51, f)
}

function hn(a, b) {
    1 < b ? b = 1 : 0 > b && (b = 0);
    var c = b * a.o.duration(!0);
    en(a, c + a.m.I)
}

function en(a, b) {
    Gp(a, b);
    Hp(a.o);
    a.o.dispatch(51, b)
}

function Gp(a, b) {
    var c = a.g;
    null != c && (c.T() || c.L() || 0 === b || c.Y(), 0 >= b ? b = c.eb() : c.duration && b > c.duration && (b = c.duration), c.da(b), a.Fa = b)
}

function Ep(a) {
    a.J && (a.J = !1);
    try {
        a.g.play()
    } catch (b) {
        a.o.dispatch(24, ["The audio couldn't be loaded.", !1]);
        return
    }
    De(a)
}

function Dp(a) {
    if (!a.J) {
        a.J = !0;
        a.o.dispatch(43);
        var b = a.o,
            c = b.K,
            d = b.Ha,
            e = c.U[c.Qa[d]],
            f = Ld(b),
            c = b.na.g.g,
            g = e.Fb,
            h = Io(f, d, 0),
            d = (Io(f, d, 1) - h) / a.I / e.Ga.Ea / e.Gb;
        0 !== b.Va && en(a, h);
        a.L = setTimeout(function() {
            Ep(a);
            a.L = 0
        }, d * g * 1E3);
        for ($c(c); g--;) c.Cc.push([null, -4, d * g, .2, 0, null, !1, !0]);
        Xc(c)
    }
}

function De(a) {
    if (a.g) {
        var b = a.g.Fa();
        null !== b && (a.Fa = b, Cp(a, !0))
    }
}

function rk(a) {
    return null === a.g ? !1 : a.g.aa()
}

function mn(a, b) {
    1 !== b && 2 !== b && 3 !== b || b === a.N || (a.N = b, a.o.dispatch(54, b))
}

function Ip(a) {
    return a[2] ? a[2] / 480 : 0
}

function Jp(a, b, c, d, e, f, g, h, k, l) {
    this.o = a;
    this.N = b;
    this.name = c;
    this.index = d;
    this.da = g;
    this.aa = null;
    this.ia = 0;
    this.W = h;
    this.Y = k;
    this.g = l;
    this.T = l.N;
    this.m = e || [];
    this.L = null;
    this.J = -1;
    this.I = 0;
    this.R = -1;
    f && (a.hc || a.K.Nb) && Kp(this, f);
    var m = this;
    a.assign([47], function() {
        Lp(m)
    })
}
Jp.prototype = {
    duration: function(a) {
        return this.T ? Mp(this, this.o.K.Qa.length - 1, 1) : a ? Np(this) - this.I : this.g.duration
    }
};

function Op(a, b, c) {
    var d = a.m,
        e = a.o.K.Qa,
        f = d.length,
        g = a.o.K.U.length - 1,
        h = e.length - 1,
        k = null,
        l = null,
        m, n;
    if (0 !== f && e.length) {
        for (m = 0; m < f; m++)
            if (n = d[m], n[1] > b) {
                if (0 === m) {
                    c.Ha = 0;
                    c.Va = 0;
                    return
                }
                k = d[m - 1];
                l = n;
                break
            }
        null === k && (k = d[f - 1], l = [k[0], a.g.duration, 480]);
        a = Ip(k);
        d = Ip(l);
        d = k[0] === l[0] ? d - a : 1 - a + d + (l[0] - k[0] - 1);
        b = a + d * (b - k[1]) / (l[1] - k[1]);
        c.Ha = k[0] + (b | 0);
        c.Va = b % 1;
        0 === c.Va && c.Ha === e.length && (c.Ha--, c.Va = 1);
        if (-1 !== h)
            for (; c.Ha > h || e[c.Ha] > g;) c.Ha--, c.Va = 1
    } else c.Ha = 0, c.Va = 0
}

function Pp(a, b, c) {
    var d = a.m,
        e = d.length,
        f = null,
        g = null,
        h, k;
    if (0 === e) return 0;
    for (h = 0; h < e; h++)
        if (k = d[h], k[0] > b || k[0] === b && Ip(k) > c) {
            f = d[h - 1];
            g = k;
            break
        }
    null === f && (f = d[e - 1], g = [f[0], a.g.duration, 480]);
    a = Ip(f);
    d = Ip(g);
    return f[1] + (f[0] === b ? c - a : 1 - a + c + (b - f[0] - 1)) / (f[0] === g[0] ? d - a : 1 - a + d + (g[0] - f[0] - 1)) * (g[1] - f[1])
}

function Mp(a, b, c) {
    var d = a.o.K.U,
        e = a.o.K.Qa;
    a = 0;
    var f;
    if (d.length) {
        for (f = 0; f < b; f++) a += Zd(d[e[f]], 0, 1);
        (b = d[e[b]]) && (a += Zd(b, 0, c))
    }
    return a
}

function Kd(a, b, c) {
    if (a.T) a: {
        var d = a.o.K.U,
            e = a.o.K.Qa,
            f = 0,
            g = e.length,
            h, k;
        if (0 === b || 0 === d.length) c.Ha = 0,
            c.Va = 0;
        else {
            for (h = 0; h < g; h++) {
                a = d[e[h]];
                k = Zd(a, 0, 1);
                if (b >= f && b < f + k) {
                    c.Ha = h;
                    b: if (b -= f, d = a.K.Za, 1 === d.length) a = b / k;
                    else {
                        e = a.$;
                        f = 0;
                        for (k = d.length; f !== k; f++) {
                            h = d[f];
                            g = f + 1 === k;
                            if (!g) {
                                if (d[f + 1].Ta < e) continue;
                                if (d[f + 1].Ta === e && b >= Zd(a, 0, d[f + 1].za)) continue
                            }
                            k = h.Ta < e ? 0 : h.za;
                            d = g || d[f + 1].Ta > e ? 1 : d[f + 1].za;
                            e = Zd(a, 0, k);
                            a = Zd(a, 0, d);
                            a = k + (b - e) / (a - e) * (d - k);
                            break b
                        }
                        a = void 0
                    }
                    c.Va = a;
                    break a
                }
                f += k
            }
            c.Ha = g - 1;
            c.Va = 1
        }
    }
    else Op(a,
        b, c)
}

function Io(a, b, c) {
    return a.T ? Mp(a, b, c) : Pp(a, b, c)
}

function fn(a, b, c) {
    var d;
    if (b.tb) {
        d = b.Ga.Ea;
        c *= d;
        var e = 10,
            f = null,
            g, h, k, l, m, n, p;
        for (g = b.O.length; g--;)
            if (h = b.O[g], h.Ka)
                for (k = h.V.length; k--;)
                    for (l = h.V[k], m = l.length; m--;) n = l[m], p = c - n.rb, 0 <= p && (p < e || p === e && n.Bb < f.Bb) && (f = n, e = p);
        e = p = d;
        for (g = b.O.length; g--;)
            if (h = b.O[g], h.Ka)
                for (k = h.V.length; k--;)
                    for (l = h.V[k], m = l.length; m--;) n = l[m], n.rb > f.rb && n.rb < e && (e = n.rb, p = n.Ra);
        d = f.Ra / d + (c - f.rb) / (e - f.rb) * ((p - f.Ra) / d)
    } else d = c;
    return Io(a, Qi(a.o.K.Qa, b.$), d)
}

function Np(a) {
    return -1 === a.R ? a.g.duration : a.R
}

function Lp(a) {
    var b = a.I,
        c = a.R;
    a.I = null !== a.W ? a.W : 0;
    a.R = null !== a.Y ? a.Y : -1;
    a.I === b && a.R === c || a.o.dispatch(36)
}

function Qp(a, b) {
    var c = new XMLHttpRequest;
    c.open("GET", b, !0);
    c.responseType = "arraybuffer";
    c.onreadystatechange = function() {
        if (4 == c.readyState && 200 == c.status) {
            for (var b = new Uint8Array(c.response), e = b.length, f = 0; e--;) b[e] > f && (f = b[e]);
            a.aa = b;
            a.ia = f;
            a.o.dispatch(84)
        }
    };
    c.send()
}

function Rp(a, b) {
    a.N && Tc("GET", "/api/v1/recordings/" + a.N + "/waveform/", null, function(c) {
        c.sample_rate ? (a.da = c.sample_rate, Qp(a, c.url)) : window.setTimeout(function() {
            Rp(a, 2 * b)
        }, b)
    }, ya)
}

function Kp(a, b) {
    Tc("GET", b, null, function(b) {
        a.m = b;
        a.o.dispatch(66);
        a.o.dispatch(47)
    }, ya)
}

function Sp(a, b) {
    this.I = a;
    this.g = b;
    this.m = []
}
Sp.prototype = {};

function wn(a) {
    Tc("GET", a.g, null, function(b) {
        Tc("GET", b.url, null, function(b) {
            for (var d = a.m, e = 0, f = b.length, g; e !== f; e++) g = b[e], d.push(new Tp(g.t1, g.t2, g.t));
            a.g = null
        }, ya)
    }, ya)
}

function Tp(a, b, c) {
    this.m = a;
    this.g = b;
    this.I = c
}

function rn(a, b, c, d, e) {
    this.pa = a;
    this.oa = b;
    this.L = c;
    this.N = d;
    this.o = e;
    this.J = [];
    this.ia = [];
    this.R = [];
    this.Oa = [];
    this.Ua = [];
    this.da = {};
    this.aa = 0;
    this.na = d ? 15 : 12;
    this.track = null;
    this.g = !1;
    this.W = null;
    Tm(a);
    var f = this;
    this.m = B("fretback");
    this.sa = this.m.getContext("2d");
    this.I = B("fretfront");
    this.ya = this.I.getContext("2d");
    this.width = 0;
    this.Y = this.T = !1;
    this.Aa = function() {
        if (null !== f.track) {
            var a = f.sa,
                b = f.N,
                c = f.na,
                d = f.o.gc,
                e = f.track,
                n = f.width,
                p = f.J,
                q = b ? 4 : e.gb,
                r;
            if (b) r = 12;
            else {
                r = e.K.U;
                for (var t = r.length,
                         w = e.index, v = 0, x, A, z, y, I, R,
                         V; t--;)
                    for (x = r[t].O[w].V, A = x.length; A--;)
                        for (z = x[A], y = z.length; y--;)
                            for (I = z[y].X, R = I.length; R--;)(V = I[R].Na) && V > v && (v = V);
                r = Math.max(v + 1, 10)
            }
            t = (n - 20 - 20) / (1 - 1 / Math.pow(2, (r + 1) / 12));
            f.aa = Math.floor((135 - 2 * c) / (q - 1));
            a.fillStyle = d ? "#626262" : "#6d5c7d";
            K(a, 0, 0, n, 135);
            for (w = p.length = 0; w !== r + 2; w++) v = 40 + t - t / Math.pow(2, w / 12), p.push(v);
            if (b)
                for (a.fillStyle = "#91839e", w = An.length; w--;) K(a, p[An[w]], 0, 16, 135);
            else
                for (a.fillStyle = d ? "#868686" : "#8d8591", w = 1; w !== r + 1; w++) K(a, p[w], 0, 3, 135);
            b ||
            (a.fillStyle = d ? "#868686" : "#a4a1a6", no(a, (p[2] + 3 + p[3]) / 2, 67.5, 4, !1), no(a, (p[4] + 3 + p[5]) / 2, 67.5, 4, !1), 5 < r && (no(a, (p[6] + 3 + p[7]) / 2, 67.5, 4, !1), 7 < r && (no(a, (p[8] + 3 + p[9]) / 2, 67.5, 4, !1), 10 < r && (no(a, (p[11] + 3 + p[12]) / 2, 45, 4, !1), no(a, (p[11] + 3 + p[12]) / 2, 90, 4, !1), 13 < r && (no(a, (p[14] + 3 + p[15]) / 2, 67.5, 4, !1), 15 < r && (no(a, (p[16] + 3 + p[17]) / 2, 67.5, 4, !1), 17 < r && (no(a, (p[18] + 3 + p[19]) / 2, 67.5, 4, !1), 20 < r && (no(a, (p[20] + 3 + p[21]) / 2, 67.5, 4, !1), 23 < r && (no(a, (p[23] + 3 + p[24]) / 2, 45, 4, !1), no(a, (p[23] + 3 + p[24]) / 2, 90, 4, !1))))))))));
            e.Jb && !f.N ?
                (wf(f.L, "block"), Xn(f.L, f.J[e.Jb] - 16), f.L.innerHTML = "Capo " + Hm(String(e.Jb))) : wf(f.L, "none");
            a.fillStyle = d ? "#bdbdbd" : "#f2eff6";
            for (w = 0; w !== q; w++) K(a, 0, c + w * f.aa, n, 2 * (w + q) / (2 * q))
        }
        f.T = !1
    };
    this.Ia = function() {
        if (null !== f.track) {
            var a = f.o,
                b = a.K,
                c = f.ya,
                d = f.ia,
                e = f.Oa,
                n = f.Ua,
                p = f.track,
                q = b.Qa[a.Ha],
                a = a.Va,
                r, t,
                w, v, x, A, z, y, I, R, V, ba, ea;
            ho(c, f.width, 135);
            io(c, 11, 2, !0);
            c.strokeStyle = "transparent";
            f.R.length = 0;
            e.length = 0;
            r = n.length = 0;
            for (t = d.length; r < t; r += 3)
                for (A = b.U[d[r]], w = d[r + 1], v = d[r + 2], z = A.O[p.index].V, y = z.length; y--;)
                    for (I =
                             z[y], R = I.length; R--;)
                        if (V = I[R], x = V.Ra / A.Ga.Ea, ba = (V.Ra + V.Mb) / A.Ga.Ea, !(0 !== w && w >= ba || 1 !== v && v <= x))
                            for (ea = d[r] === q && x <= a && ba >= a, ba = V.X.length; ba--;) x = V.X[ba], ea ? e.push(x) : n.push(x);
            for (r = e.length; r--;) Up(f, c, e[r], !0, a);
            for (r = n.length; r--;) Up(f, c, n[r], !1, a)
        }
        f.Y = !1
    };
    this.la = function() {
        wp(f.o.J) || Vp(f);
        Wp(f)
    };
    this.ea = function() {
        f.W = null;
        Vp(f);
        Wp(f)
    };
    un(this);
    e.assign([49], function() {
        un(f)
    }, [25], function() {
        Xp(f)
    });
    u(b, "mousedown touchstart", xf(function() {
        Yp(f)
    }))
}
rn.prototype = {};

function Up(a, b, c, d, e) {
    var f = a.N,
        g = a.na,
        h = a.R,
        k, l, m;
    if (f) {
        l = a.da;
        var n = null;
        k = 3;
        var p = c.Z;
        m = c.value;
        for (var q = p.K.U, r = p.P.$, t = r, w = p.track.index, v, x, A, z, y; 0 <= r && null === n;) {
            A = q[r];
            v = A.La;
            for (A = r === t ? p.la + 1 : A.fb; A-- && null === n;)
                if (x = v[A], 1 === x.$b)
                    for (z = x.Ma, x = z.length; x--;)
                        if ((y = z[x]) && y.track.index === w && null !== y.ub) {
                            n = y.ub[0];
                            break
                        }
            r--
        }
        null === n && (n = 1);
        n = Bn[n];
        for (x = 0; 4 !== x; x++)
            if (m >= n[x]) {
                k = x;
                break
            }
        m -= Bn[1][k];
        l.ra = k;
        l.Na = m;
        k = a.da.Na;
        l = a.da.ra
    } else k = c.Na + a.track.Jb, l = c.ra;
    m = 50 * l + k; -
        1 === Qi(h, m) && (a.R.push(m),
        f = 0 === k ? 20 : f ? a.J[k] + 8 : (a.J[k] + 3 + a.J[k - 1]) / 2, g += l * a.aa, h = Vh(c) ? "X" : co[c.ya] + Cn[c.da], d ? (a = -3 * di(c, e) / 5 + 1, b.fillStyle = "rgba(243, 164, 44, " + Math.round(100 * a) / 100 + ")") : b.fillStyle = a.o.gc ? "rgba(0, 0, 0, 0.5)" : "rgba(59, 51, 70, 0.7)", no(b, f, g, 12, !1), b.fillStyle = "#FFF", jo(b, h, f - zj.width(11, 2, h, !0) / 2, g + 2.75))
}

function Wp(a) {
    a.g && !a.Y && (requestAnimationFrame(a.Ia), a.Y = !0)
}

function Xp(a) {
    a.g && !a.T && (requestAnimationFrame(a.Aa), a.T = !0)
}

function un(a) {
    var b = Tm(a.pa).width;
    a.width !== b && (0 === a.width && (a.m.height = 135 * J, Um(a.m, 135), a.I.height = 135 * J, Um(a.I, 135)), a.m.width = b * J, Vm(a.m, b), a.I.width = b * J, Vm(a.I, b), a.width = b);
    Xp(a);
    Wp(a)
}

function Yp(a) {
    for (var b = null === a.track, c = a.N, d = b ? null : a.track.index, e = b ? 0 : d + 1, f = a.o.K.O, g = f.length,
             h, k; e !== 2 * g; e++)
        if (h = e % g, k = f[h], c && k.oc || !c && k.Da) {
            (b || h !== d) && Zp(a, k);
            break
        }
}

function Vp(a) {
    if (a.g) {
        var b = a.ia,
            c = a.o,
            d = c.K.Qa,
            e = c.J,
            f = wp(e);
        if (f || d[c.Ha] !== a.W)
            if (b.length = 0, f)
                for (a = e.m; a !== e.g + 1; a++) b.push(a), b.push(a === e.m ? e.I : 0), b.push(a === e.g ? e.J : 1);
            else b.push(d[c.Ha]), b.push(0), b.push(1), a.W = d[c.Ha]
    }
}

function Zp(a, b) {
    a.track !== b && (a.track = b, a.oa.innerHTML = Hm(b.name), Vp(a), Xp(a), Wp(a))
}

function $p(a) {
    a.g && (a.g = !1, a.o.unassign([67, 51, 25], a.la), a.o.unassign([14, 53], a.ea))
}

function aq(a) {
    a.g || (a.g = !0, null === a.track && Yp(a), a.o.assign([67, 51, 25], a.la, [14, 53], a.ea, [48], function() {
        Zp(a, a.track)
    }))
}

function bq(a, b, c) {
    this.ia = a;
    this.la = b;
    this.o = c;
    this.m = !1;
    Tm(a);
    var d = this;
    this.ma = B("keycan");
    Xn(this.ma, 30);
    this.ea = this.ma.getContext("2d");
    this.N = this.width = 0;
    this.track = null;
    this.g = !0;
    this.I = this.W = this.aa = 0;
    this.J = 52;
    this.L = this.R = 0;
    this.T = [];
    this.na = [];
    this.ib = !1;
    this.bc = function() {
        if (d.m) {
            var a = d.ea,
                b = d.o,
                c = d.N,
                h = d.track,
                k = d.R,
                l = d.L,
                m = l / 2,
                n = d.na,
                p = b.K.U[b.K.Qa[b.Ha]],
                q = b.Va,
                r = b.ec,
                b = d.I,
                t = d.J,
                w, v, x, A, z, y, I, R;
            a.fillStyle = "#fff";
            K(a, 0, 0, c, 120);
            a.fillStyle = "#aaa";
            for (R = t + 1; R--;) K(a, k * R - .5, 0,
                1, 120);
            K(a, 0, 0, c, 1);
            K(a, 0, 119, c, 1);
            a.fillStyle = "#999";
            a.strokeStyle = "#999";
            no(a, k * (23 - b + .5), 105, k / 8, !0);
            io(a, 14, 2);
            n.length = 0;
            if (p)
                for (c = p.Ga.Ea, R = 1 === h.Xa && d.g ? 2 : 1; R--;)
                    for (w = p.O[h.index + R].V, v = w.length; v--;)
                        for (x = w[v], A = x.length; A--;)
                            if (z = x[A], r && Ej(r, z.Ca) && zg(z.rc, r) || !r && q >= z.Ra / c && q < (z.Ra + z.Mb) / c)
                                for (y = z.X.length; y--;) I = z.X[y], gj((I.value + I.Z.K.o.ea + 60) % 12) ? n.push(I) : cq(d, a, I, !0, q, b);
            a.fillStyle = "#000";
            for (R = b; R !== t + b + 1; R++) 0 != R && 52 != R && (h = R % 7, 2 !== h && 5 !== h && K(a, k * (R - b) - m + d.T[h], 0, l, 78));
            if (R =
                    n.length)
                for (; R--;) cq(d, a, n[R], !1, q, b)
        }
        d.ib = !1
    };
    this.da = function() {
        d.xa()
    };
    this.Y = function() {
        tn(d)
    };
    u(b, "mousedown touchstart", xf(function() {
        dq(d);
        d.xa()
    }))
}
bq.prototype = {
    xa: Zn
};

function cq(a, b, c, d, e, f) {
    var g = a.R,
        h = Ri(c);
    b.fillStyle = (2 === c.Z.track.Xa ? "rgba(193, 165, 217, " : "rgba(243, 164, 44, ") + Math.round(100 * (-2 * di(c, e) / 5 + 1)) / 100 + ")";
    d ? (e = g * (h - f), K(b, e, 0, g, 120)) : (e = g * (h - f) - a.L / 2 + a.T[h % 7], K(b, e + 1, 1, a.L - 2, 76));
    qi(c) && (f = d ? 99 : 39, c = c.Y, e += (d ? g : a.L) / 2, b.fillStyle = "#ddd", b.strokeStyle = "#bbb", no(b, e, f, 3 * g / 5, !0), b.fillStyle = "#000", jo(b, c, e - zj.width(14, 2, c) / 2, f + .2 * g))
}

function eq(a) {
    if (!(30 >= a.width)) {
        var b = a.width - 30,
            c = a.aa,
            d = a.W - c + 1,
            e = b / 52 | 0;
        20 <= e ? (a.I = 0, a.J = 52) : (e = b / 20 | 0, e < d ? (a.I = c, a.J = d) : (a.I = c - (e - d) / 2 | 0, 0 > a.I && (a.I = 0), a.J = e), e = b / a.J | 0);
        a.N = e * a.J;
        if (e != a.R)
            for (a.R = e, a.L = .55 * e, b = 0; 7 !== b; b++) {
                c = 0;
                if (1 === b || 4 === b) c = .08 * e;
                else if (6 === b || 3 === b) c = .08 * -e;
                a.T[b] = c
            }
    }
}

function tn(a) {
    var b = Tm(a.ia).width;
    a.width !== b && (0 === a.width && (a.ma.height = 120 * J, Um(a.ma, 120)), a.width = b, eq(a), a.ma.width = a.N * J, Vm(a.ma, a.N));
    a.xa()
}

function dq(a) {
    if (a.track && 1 === a.track.Xa && a.g) fq(a, a.track, !1);
    else
        for (var b = a.o.K.O,
                 c = null === a.track ? 0 : a.track.index + 1,
                 d = b.length,
                 e; c !== 2 * d; c++)
            if (e = b[c % d], e.zc && !Ch(e)) {
                fq(a, e, 1 !== e.Xa || a.g);
                break
            }
}

function fq(a, b, c) {
    if (a.track !== b || a.g !== c) {
        a.track = b;
        a.g = c;
        var d = b.name;
        b.Xa && (d = 1 === b.Xa ? d + (c ? " (both)" : " (right)") : d + " (left)");
        a.la.innerHTML = Hm(d);
        b = 52;
        c = 0;
        for (var d = 1 === a.track.Xa && a.g ? 2 : 1, e = a.o.K.U, f = e.length, g, h, k, l, m, n, p,
                 q; f--;)
            for (q = d; q--;)
                for (g = e[f].O[a.track.index + q].V, h = g.length; h--;)
                    for (k = g[h], l = k.length; l--;)
                        for (m = k[l].X, n = m.length; n--;) p = Ri(m[n]), p > c && (c = p), p < b && (b = p);
        a.aa = b;
        a.W = c;
        eq(a)
    }
}

function gq(a) {
    a.m || (null === a.track && dq(a), a.o.assign([67, 51, 25], a.da, [49], a.Y, [48], function() {
        fq(a, a.track, a.g)
    }), a.m = !0, a.xa())
}

function pn(a) {
    this.o = a;
    this.ma = B("mixer");
    this.m = B("mixerbody");
    this.g = !1;
    hq(this);
    var b = this;
    a.assign([72, 60, 59, 48], function() {
        iq(b)
    }, [5, 16], function() {
        hq(b)
    });
    u(this.m, "mousedown touchstart input", function(a) {
        var d = a.target,
            e = Rm(d, "data-trackid"),
            f = Rm(d, "data-action");
        if (f && null !== e) switch (f = parseInt(f, 10), 5 !== f && a.preventDefault(), a = 5 === f ? parseInt(d.value, 10) : null, e = b.o.K.O[e], f) {
            case 1:
                mh(e);
                break;
            case 2:
                nh(e);
                break;
            case 3:
                kh(e);
                break;
            case 4:
                e.Pa = !e.Pa;
                hh(e, !1);
                break;
            case 5:
                e.setVolume(a / 100);
                break;
            case 6:
                e.Pc = !e.Pc;
                e.o.dispatch(60, e);
                break;
            case 7:
                e.Gc = !e.Gc, e.o.dispatch(59)
        }
    }, "change", function(a) {
        a.target.blur()
    })
}
pn.prototype = {};

function iq(a) {
    a = a.o.K.O;
    for (var b = a.length, c, d,
             e; b--;) c = a[b], d = B("mixer" + b), d.getElementsByClassName("mixername")[0].innerHTML = Hm(c.name), H(d.getElementsByClassName("mixerstaff")[0], "active", c.va), e = d.getElementsByClassName("mixertab")[0], c.Da ? (wf(e, "inline-block"), c.Ja ? (F(e, "active"), H(e, "stemless", !c.Cb)) : (G(e, "active"), G(e, "stemless"))) : wf(e, "none"), e = d.getElementsByClassName("mixerchord")[0], uh(c, !0, !1) ? (wf(e, "inline-block"), c.pb ? (F(e, "active"), H(e, "name-only", !c.hb)) : (G(e, "active"), G(e, "name-only"))) :
        wf(e, "none"), e = d.getElementsByClassName("mixerlyric")[0], uh(c, !1, !0) ? (wf(e, "inline-block"), H(e, "active", c.Pa)) : wf(e, "none"), d.getElementsByClassName("inputrange")[0].value = 100 * c.volume, H(d.getElementsByClassName("mixermute")[0], "active", c.Pc), H(d.getElementsByClassName("mixersolo")[0], "active", c.Gc)
}

function hq(a) {
    var b = B("mixertemplate").innerHTML,
        c = a.o.K.O,
        d = "",
        e;
    e = 0;
    for (c = c.length; e !== c; e++) d += '<tr id="mixer' + e + '" data-trackid="' + e + '">' + b + "</tr>";
    a.m.innerHTML = d;
    iq(a)
}

function jq(a, b) {
    this.o = a;
    this.g = b;
    this.m = b.J.getElementsByClassName("waveformnav")[0];
    this.left = this.width = this.J = this.I = 0;
    var c = this;
    a.assign([39, 52, 36], function() {
        c.xa()
    });
    jn(this.m, function(a) {
        c.I = a;
        c.J = c.g.m
    }, function(a) {
        a = (a - c.I) / c.g.width;
        var b = c.o.duration(c.g.I) + 100 * c.g.g;
        kq(c.g, c.J + a * b, !1)
    }, ya, !0)
}
jq.prototype = {
    xa: function() {
        var a;
        if (this.o.duration(!0)) {
            var b = a = this.g.width,
                c;
            c = this.g;
            c = c.o.duration(c.I) / c.g + 100;
            b /= c;
            1 <= b ? a = 0 : (a = a * b | 0, 20 > a && (a = 20))
        } else a = 0;
        b = Math.round(lq(this.g) * this.g.width);
        a !== this.width && (Vm(this.m, a), this.width = a);
        b !== this.left && (Xn(this.m, b), this.left = b)
    }
};

function mq(a, b, c, d, e) {
    function f(b) {
        if ("mousedown" === b.type)
            for (b = b.target; b;) {
                if (b === k) return;
                b = b.parentNode
            } else if ("keydown" === b.type)
            if (13 === b.which) {
                b = k.value;
                var c = a.duration(g.I),
                    d = null,
                    e;
                b = b.trim();
                /^\d+(\.\d+)?$/.exec(b) ? d = parseFloat(b) : (e = /^(\d+)?:(\d\d(\.\d+)?)$/.exec(b)) ? d = 60 * parseInt(e[1] || 0, 10) + parseFloat(e[2]) : (e = /^(\d+):(\d\d):(\d\d(\.\d+)?)$/.exec(b)) && (d = 3600 * parseInt(e[1], 10) + 60 * parseInt(e[2], 10) + parseFloat(e[3]));
                null !== d && d > c && (d = c);
                b = d;
                null !== b && en(a.m, b)
            } else if (27 !== b.which) return;
        G(h, "editmode");
        rc(window, "mousedown", f);
        rc(window, "keydown", f)
    }

    this.o = a;
    this.oa = e;
    this.J = B(b);
    this.Wa = this.W = this.Y = this.N = this.width = 0;
    this.I = d;
    this.ma = this.J.getElementsByClassName("waveformcan")[0];
    this.aa = this.J.getElementsByClassName("waveformplayhead")[0];
    this.Aa = this.J.getElementsByClassName("waveformloop")[0];
    this.mb = this.J.getElementsByClassName("waveformtime-all")[0];
    this.ea = this.J.getElementsByClassName("waveformtime-now")[0];
    this.ia = this.ma.getContext("2d");
    this.ib = !1;
    this.da = 0;
    this.g =
        .008;
    this.R = !1;
    this.m = -50 * this.g;
    this.T = this.L = 0;
    this.nb = new jq(a, this);
    this.sa = 0;
    this.zb = [];
    this.eb = [];
    var g = this;
    this.bc = function() {
        ho(g.ia, g.width, g.Y);
        if (-1 !== g.o.T) {
            var a = Ld(g.o);
            if (null !== a.aa && a.da) {
                var b = a.aa,
                    c = a.ia,
                    d = g.ia,
                    e = g.width,
                    f = g.W,
                    h = g.g,
                    k = g.L,
                    v = g.T,
                    x = g.m,
                    A = nq(g),
                    a = h * a.da / 147,
                    z = g.zb,
                    y = g.eb,
                    I = Math.round(x / h),
                    k = g.I && k > x ? Math.floor((k - x) / h) : 0,
                    h = g.I && v < A ? e - Math.ceil((A - v) / h) : e;
                d.fillStyle = g.oa;
                for (v = 0; v !== e; v++) {
                    if (v < k || v > h) x = A = 0;
                    else {
                        x = v + I;
                        A = Math.floor(a * x);
                        x = Math.ceil(a * (x + 1)) - 1;
                        z.length =
                            0;
                        y.length = 0;
                        z.push(0);
                        for (y.push(0); A++ < x;)
                            if (b[2 * A]) z.push(b[2 * A]), y.push(b[2 * A + 1]);
                            else break;
                        A = Math.max.apply(Math, z) * f / c;
                        x = Math.max.apply(Math, y) * f / c
                    }
                    K(d, v, f - A, 1, A + x + 1)
                }
            } else {
                b = g.ia;
                c = g.width;
                d = g.Y;
                e = g.Wa;
                z = 8 * Math.max(0, Math.ceil(g.m - 1));
                f = 8 * (nq(g) + 1);
                a = Ld(g.o).g.duration;
                b.fillStyle = g.oa;
                for (K(b, 0, g.W, c, 1); z < f; z++)
                    if (y = z / 8, !a || y <= a) y = oq(g, y), 0 < y && y < c && (I = e / Nf(z % 8, 8).g, K(b, y, (d - I) / 2, 1, I));
                io(b, 10, 2);
                jo(b, "Waveform unavailable", 10, d - 10)
            }
        }
        g.ib = !1
    };
    this.Oa = function() {
        var a = g.o.J,
            b = g.Aa,
            c = 0,
            d = 0;
        wp(a) && (c = Math.max(0, oq(g, a.L)), d = Math.min(g.width, oq(g, a.N)) - c);
        0 < d ? (Vm(b, d), Xn(b, c)) : Vm(b, 0)
    };
    this.Ia = function() {
        var a = g.o.m,
            b = a.Fa;
        b <= g.m || b >= nq(g) ? kq(g, b - g.g * g.width / 8, !0) : pq(g);
        g.ea.innerHTML = em(g.I ? a.m ? a.Fa - a.m.I : 0 : b, !0)
    };
    this.Ua = function() {
        qq(g);
        g.xa()
    };
    this.la = function() {
        qq(g);
        rq(g)
    };
    this.na = function() {
        if (-1 !== g.o.T && g.R) {
            var a = Ld(g.o);
            g.la();
            g.xa();
            null === a.aa && Rp(a, 1E3)
        }
    };
    this.pa = 0;
    this.Ab = function() {
        vn(g)
    };
    this.ya = function() {
        g.pa && window.clearTimeout(g.pa);
        g.pa = window.setTimeout(g.Ab, 10)
    };
    Yn(this.J, function(a) {
        a && kq(g, g.m + a * g.g, !1);
        return !0
    });
    c && jn(this.ma, function(a) {
        g.sa = sq(g, a)
    }, function(b) {
        var c = g.sa;
        b = sq(g, b);
        c < b ? (.2 > b - c && (b = c + .2), Ap(a.J, c, b)) : (.2 > c - b && (b = c - .2), Ap(a.J, b, c))
    }, function(b, c, d) {
        d && (en(a.m, sq(g, b)), wp(a.J) && sp(a.J, !1))
    }, !0);
    u(this.J.getElementsByClassName("zoom-in")[0], "mousedown touchstart", xf(function() {
        tq(g, !0)
    }));
    u(this.J.getElementsByClassName("zoom-out")[0], "mousedown touchstart", xf(function() {
        tq(g, !1)
    }));
    var h = this.J.getElementsByClassName("waveform-time")[0],
        k = this.J.getElementsByClassName("waveformtime-inp")[0];
    u(this.ea, "mousedown touchstart", xf(function() {
        k.value = g.ea.innerHTML;
        F(h, "editmode");
        k.focus();
        k.select();
        u(window, "mousedown", f);
        u(window, "keydown", f)
    }));
    a.assign([32, 68, 52, 4, 17, 12], function() {
        rq(g)
    }, [84], function() {
        g.xa()
    });
    rq(this)
}
mq.prototype = {
    xa: Zn
};

function rq(a) {
    a.R && (a.mb.innerHTML = em(a.o.duration(a.I), !1))
}

function pq(a) {
    var b = oq(a, a.o.m.Fa) - .5;
    b >= a.width - 3 && (b = -10);
    b !== a.da && (Xn(a.aa, b), 0 > a.da && 0 <= b ? wf(a.aa, "block") : 0 > b && 0 <= a.da && wf(a.aa, "none"), a.da = b)
}

function vn(a) {
    var b = Tm(a.J),
        c = Math.ceil(b.width),
        b = b.height;
    if (c !== a.width || b !== a.N) a.width = c, a.ma.width = c * J, Vm(a.ma, c), a.N = b - 2, a.Y = b - 6, a.W = b / 2 / J - 1, a.Wa = .8 * a.Y, a.ma.height = a.Y, Um(a.ma, a.Y), Um(a.aa, a.N), Um(a.Aa, a.N), a.xa(), pq(a), a.nb.xa(), a.o.dispatch(77)
}

function qq(a) {
    var b = a.L,
        c = a.T;
    if (a.I && -1 !== a.o.T) {
        var d = Ld(a.o);
        a.L = d.I;
        a.T = Np(d)
    } else a.L = 0, a.T = 0;
    a.L === b && a.T === c || kq(a, a.m, !0)
}

function kq(a, b, c) {
    var d = 50 * a.g,
        e = a.L - d,
        d = a.L + a.o.duration(a.I) + d - a.g * a.width;
    b < e ? b = e : b > d && (b = Math.max(e, d));
    a.m !== b ? (a.m = b, a.xa(), pq(a), a.o.dispatch(39)) : c && (a.xa(), pq(a))
}

function sq(a, b) {
    var c = a.m + b * a.g;
    a.I && (c < a.L ? c = a.L : c > a.T && (c = a.T));
    return c
}

function oq(a, b) {
    return Math.floor((b - a.m) / a.g)
}

function lq(a) {
    var b = 50 * a.g;
    return (a.m - a.L + b) / (a.o.duration(a.I) + b + b)
}

function nq(a) {
    return a.m + a.g * a.width
}

function tq(a, b) {
    var c, d;
    if (b) c = a.g / 1.5, .002 > c && (c = .002);
    else {
        d = a.o.duration(a.I) + 100 * a.g;
        var e = a.width;
        c = 1.5 * a.g;
        c * e > d && (c = a.o.duration(a.I) / (e - 50 - 50))
    }
    if (c !== a.g) {
        d = Ld(a.o);
        var e = d.I,
            f = Np(d),
            g = a.m;
        d = b && (d.W || d.Y) && g < e && nq(a) > f ? (f + e) / 2 : a.m + a.g * a.width / 2;
        a.g = c;
        kq(a, d - a.g * a.width / 2, !1)
    }
}

function Eq(a) {
    if (a.R) {
        var b = a.o;
        a.R = !1;
        b.unassign([53, 14, 39], a.Oa);
        b.unassign([67, 51], a.Ia);
        b.unassign([52], a.Ua);
        b.unassign([36], a.la);
        b.unassign([68], a.na);
        b.unassign([49], a.ya)
    }
}

function Fq(a) {
    a.R || (a.R = !0, a.o.assign([53, 14, 39], a.Oa, [67, 51], a.Ia, [52], a.Ua, [36], a.la, [68], a.na, [49], a.ya), a.na())
}

function Gq(a, b, c) {
    this.ic = c = c || {};
    this.Jc = a;
    this.oa = b && !0;
    this.ya = bf(this, "notationland");
    this.Vc = document.createTextNode("");
    this.kd = b ? bf(this, "notationwide") : this.ya;
    this.ad = this.Lc = null;
    this.ld = new Km(this, c);
    this.Ob = this.Ab = this.Zc = 0;
    this.Wc = !1;
    this.Dc = this.W = this.L = 0;
    Xm(this, !0);
    this.da = this.R = this.Zb = this.Ub = this.gc = !1;
    this.Y = 36;
    this.g = 9;
    this.Ua = this.Oa = 0;
    this.$c = this.yc = -1;
    this.Hc = null;
    this.sa = this.md = this.zb = 0;
    this.Kc = this.Xc = 1;
    this.xc = !0;
    this.jd = !1;
    this.Ia = null;
    this.wc = !0;
    this.Vb = this.N =
        this.la = this.Yc = !1;
    this.ia = this.pa = 0;
    this.K = new Tl(this);
    this.hc = !0;
    this.Aa = [];
    this.Va = this.Ha = this.ea = 0;
    this.ec = Ag;
    this.jc = !0;
    this.aa = [];
    this.T = -1;
    this.na = null;
    a = bf(this, "notecanvas");
    bo(a.getContext("2d"));
    this.I = new vo(this);
    new Jo(this, !0);
    new Jo(this, !1);
    this.Qb = new Oo(this, a, !1);
    this.J = new xp(this);
    this.m = new Bp(this);
    this.od = new Go(this);
    this.Ic = new op(this);
    this.selection = this.Wa = this.Pb = this.nb = this.mb = this.eb = null;
    540 > this.L && yl(this, this.L / 50 + 20, !1);
    var d = this;
    this.nd = function() {
        Xm(d, !1)
    };
    u(window, "resize", function() {
        d.Zc && window.clearTimeout(d.Zc);
        d.Zc = window.setTimeout(d.nd, 10)
    }, "GLYPHS_LOADED", function() {
        d.Wc = !0;
        wo(d.I);
        Bh(d, !0)
    });
    d.assign([43], function() {
        kn(d)
    }, [40], function() {
        Hq(d)
    }, [41], function() {
        if (!d.N) {
            var a = wp(d.J);
            en(d.m, a ? d.J.L : Ld(d).I);
            d.od.g = !1;
            a && d.m.play()
        }
    }, [71], function(a) {
        a = a.data;
        for (var b = d.K.U, c = 0, e = b.length, f; c !== e; c++) f = b[c], yk(f.O[a]), zl(f);
        Bh(d, !0)
    }, [25], function() {
        for (var a = d.K.U, b = 0, c = a.length, e = d.K.O.length, f, g; b !== c; b++) {
            f = a[b];
            for (g = e; g--;) yk(f.O[g]);
            zl(f)
        }
        Bh(d, !0)
    });
    var e = bf(this, "playererrmsg1"),
        f = bf(this, "playererrmsg2"),
        g = 0;
    e && f && (d.assign([24], function(a) {
        g && clearTimeout(g);
        var b = a.data[1] ? f : e;
        F(b, "active");
        b.getElementsByTagName("p")[0].innerHTML = a.data[0];
        a.data[1] || (g = setTimeout(function() {
            G(e, "active")
        }, 3E3))
    }), u(f.getElementsByClassName("playererrclose")[0], "mousedown touchstart", xf(function() {
        G(f, "active")
    })));
    Yn(this.ya, function(a, b) {
        var c = !1,
            e;
        d.R && a && (e = 2 * a / (d.pa - d.L), c = No(d, d.Oa + e, !1, !0, 0));
        b && (e = 2 * b / (d.ia - d.W), c = Lo(d, d.Ua + e, !1, !0, 0) || c);
        return c
    });
    if ("ontouchstart" in window) {
        var h = {},
            k = null,
            l = null,
            m = null,
            n = 0,
            p = 0,
            q, r, t, w, v;
        u(this.ya, "touchstart", function(a) {
            var b = (new Date).getTime(),
                c = a.targetTouches.length;
            1 === c && (w = a.targetTouches[0], r = Tm(d.ya), t = Do(vp(d, w.pageY - r.top), w.pageX - r.left));
            if (1 === c && k && 300 >= b - k && l === t.$) d.J.set(l, 0, !0, l, 1, !0);
            else {
                for (var e = 0; e !== c; e++) w = a.targetTouches[e], h[w.identifier] = [w.pageX, w.pageY];
                n = ek(d);
                p = yn(d);
                2 === c && (q = d.Y);
                a = d.Qb;
                var c = document.createElement("canvas"),
                    e = a.width,
                    f = a.height;
                c.width =
                    e * J;
                c.height = f * J;
                Vm(c, e);
                Um(c, f);
                c.getContext("2d").drawImage(a.ma, 0, 0, c.width, c.height);
                a.Y = c
            }
            v = !1;
            m = null;
            k = b;
            l = t.$
        }, "touchmove", function(a) {
            d.oa && a.preventDefault();
            if (1 === a.targetTouches.length) {
                var b = d.pa - d.L,
                    c = d.ia - d.W,
                    e = h[w.identifier][0],
                    f = h[w.identifier][1],
                    g;
                w = a.targetTouches[0];
                g = w.pageX - e;
                a = w.pageY - f;
                r = Tm(d.ya);
                null === m && (m = Math.abs(g) > Math.abs(a)) && pp(d.Ic, e - r.left, f - r.top);
                m && !d.R ? qp(d.Ic, w.pageX - r.left, w.pageY - r.top) : (d.R ? (e = n + g, 0 < e && (e = 0), e < -b && (e = -b), No(d, -e / b, !1, !1, 0) && (v = !0)) : e =
                    n, b = p + a, b < -c && (b = -c), 0 < b && (b = 0), Lo(d, -b / c, !1, !1, 0) && (v = !0), v && (c = d.Qb, b -= p, c.ia = e - n, c.ea = b, c.ib || (requestAnimationFrame(c.pa), c.ib = !0)))
            } else 2 === a.targetTouches.length && (c = a.targetTouches[0], b = a.targetTouches[1], yl(d, q + Math.round((Math.sqrt(Math.pow(c.pageX - b.pageX, 2) + Math.pow(c.pageY - b.pageY, 2)) - Math.sqrt(Math.pow(h[c.identifier][0] - h[b.identifier][0], 2) + Math.pow(h[c.identifier][1] - h[b.identifier][1], 2))) / 10), !1), Qo(d.Qb, !1), v = !0, m = !1)
        }, "touchend", function(a) {
            var b = d.J;
            1 === a.changedTouches.length &&
            (w = a.changedTouches[0], w.pageX === h[w.identifier][0] && w.pageY === h[w.identifier][1] && (r = Tm(d.ya), t = Do(vp(d, w.pageY - r.top), w.pageX - r.left), en(d.m, fn(Ld(d), t, 0)), sp(b, !1)));
            v ? (d.Qb.Y = null, d.Qb.J = !0, d.Qb.xa()) : m && !d.R && (w = a.changedTouches[0], rp(d.Ic, w.pageX - r.left, !1))
        })
    }
    soundslice.user_id && Iq(d)
}
Gq.prototype = {
    Uc: function(a, b, c, d, e, f, g, h, k, l) {
        var m;
        switch (a) {
            case 1:
                m = new ff(this, l.sd, l.duration);
                break;
            case 2:
                m = new(ic && sb ? ce : ic ? Ae : Ee)(this, "", {
                    url: l.mediaurl,
                    duration: l.duration,
                    mediaURL: soundslice.media_url,
                    extra: l.sr || 44100,
                    init: !k,
                    indirect: l.ind
                });
                break;
            case 3:
            case 4:
            case 6:
            case 7:
                m = new Cf(this, b, l.mediaurl, l.renwurl, l.hls || "", l.duration)
        }
        a = Jq(this, b, c, d, e, f, g, h, m);
        if (l.st && this.oa) {
            l = l.st;
            b = [];
            c = 0;
            for (d = l.length; c !== d; c++) b.push(new Sp(l[c].l, l[c].u));
            a.L = b;
            a.o.dispatch(58)
        }
        return a
    },
    duration: function(a) {
        return -1 ===
        this.T ? 0 : this.aa[this.T].duration(a)
    },
    xb: function(a) {
        if (this.ea !== a) {
            for (var b = this.K.O, c = this.K.U, d = b.length, e = d, f = [], g,
                     h; e--;)
                for (h in g = b[e].L, g) g[h].xb(a);
            for (e = c.length; e--;)
                for (g = d; g--;)
                    if (b[g].Da) {
                        var k = c[e].O[g];
                        h = a;
                        var l = f,
                            m = k.track.m,
                            n = m.length,
                            k = k.V,
                            p, q, r, t, w, v, x;
                        l.length = 0;
                        for (t = n; t--;) l.push(null);
                        for (t = k.length; t--;)
                            for (p = k[t], q = p.length; q--;)
                                if (!p[q].ta)
                                    if (r = p[q].X, 0 === h)
                                        for (w = r.length; w--;) r[w].Na = r[w].pa, r[w].ra = r[w].oa;
                                    else {
                                        for (w = n; w--;) l[w] = null;
                                        for (w = r.length; w--;) l[n - r[w].oa -
                                        1] = r[w].pa;
                                        v = eh(l, h, m);
                                        w = v.length;
                                        for (x = r.length - 1; w--;) null !== v[w] && (r[x].Na = v[w], r[x].ra = n - w - 1, x--)
                                    }
                    }
            this.ea = a;
            this.dispatch(25)
        }
    },
    dispatch: function(a, b) {
        var c = document.createEvent("Events");
        c.initEvent("ss" + a, !0, !0);
        c.data = b;
        this.Vc.dispatchEvent(c)
    },
    assign: function(a) {
        var b = this.Vc,
            c = arguments,
            d, e, f, g;
        e = 0;
        for (g = c.length; e < g; e += 2)
            for (d = c[e], f = d.length; f--;) b.addEventListener("ss" + d[f], c[e + 1])
    },
    unassign: function(a, b) {
        for (var c = a.length, d = this.Vc; c--;) d.removeEventListener("ss" + a[c], b, !1)
    }
};

function Kq(a, b, c, d) {
    var e = a.L,
        f = a.R,
        g = a.Y,
        h = J,
        k, l, m, n, p, q;
    a.L = 720;
    a.R = !1;
    J = 3.125;
    yl(a, 30, !1);
    Bh(a, !0);
    setTimeout(function() {
        n = document.createElement("canvas");
        n.width = 720 * J;
        Vm(n, 720);
        p = new Oo(a, n, !0);
        k = 0;
        for (l = a.Aa.length; k < l; k++) q = a.Aa[k], a.Hc = -q.y, n.height = q.height * J, Po(p), m = b.createElement("img"), Vm(m, 720), Um(m, q.height), c.appendChild(m), m.src = n.toDataURL();
        n = a.Hc = null;
        J = h;
        a.L = e;
        a.R = f;
        yl(a, g, !1);
        Bh(a, !0);
        d()
    }, 2E3)
}

function ln(a) {
    var b = a.K,
        c = window.open("", "ssprint", "width=760,height=600"),
        d = c.document.body,
        e = "";
    b.Wb && (e += '<h1 style="text-align: center; font: 20px solid Georgia,serif; margin: 0 0 10px">' + Hm(b.Wb) + "</h1>");
    b.Nc && (e += '<p style="font: 11px solid Georgia,serif; margin: 0 0 10px; float: right">Printed by ' + b.Nc + "</p>");
    e && (d.innerHTML = e);
    Kq(a, c.document, d, function() {
        setTimeout(function() {
            c.print()
        }, 500)
    });
    a.dispatch(45)
}

function zn(a, b, c) {
    if (a.da !== b) {
        var d = B("appwrapper");
        (a.da = b) ? (a.md = a.zb, F(d, "notationless"), sn(a), c && nn(a, 4)) : (G(d, "notationless"), nn(a, a.md), Xm(a, !1), Bh(a, !0));
        a.dispatch(37)
    }
}

function xn(a, b) {
    a.R !== b && (a.R = b, H(a.ya, "flushright", b), a.Oa = 0, a.Ua = 0, a.dispatch(31), setTimeout(a.nd, 100))
}

function up(a, b, c, d) {
    b -= ek(a);
    c = Do(vp(a, c), b);
    var e = nl(c);
    b -= c.x;
    if (e) {
        Bl(c, b, d);
        var f = Math.max(Math.min(Math.floor(d.za * e), e - 1), 0),
            g = d.Tb;
        d.P = a.K.U[c.$ + f];
        d.za = (d.za - f / e) * e;
        d.Ya = null;
        d.Tb = !1;
        if (g && .1 > d.za || 6 >= Math.abs(Fl(c, f / e) - b)) d.Ya = Ag, d.za = 0, d.Tb = !0;
        else if (g && .9 < d.za || 6 >= Math.abs(Fl(c, (f + 1) / e) - b)) d.Ya = Nf(1, 1), d.za = 1, d.Tb = !0
    } else d.P = c, Bl(c, b, d)
}

function vp(a, b) {
    var c, d, e;
    b -= yn(a);
    c = 0;
    for (d = a.Aa.length; c < d && !(e = a.Aa[c], e.y + e.height > b); c++);
    return e
}

function yn(a) {
    if (null !== a.Hc) return a.Hc;
    var b = a.ia - a.W;
    return 0 >= b ? 0 : -Math.floor(a.Ua * b)
}

function ek(a) {
    var b = a.pa - a.L;
    return 0 >= b ? 0 : -Math.floor(a.Oa * b)
}

function Lq(a) {
    a.Ob && clearInterval(a.Ob);
    a.Ob = 0;
    a.$c = -1
}

function Mq(a, b, c) {
    a.$c = b;
    var d = a.Ua,
        e = b - a.Ua,
        f = (new Date).getTime();
    a.Ob && clearInterval(a.Ob);
    a.Ob = setInterval(function() {
        var b = (new Date).getTime() - f;
        b > c && (b = c);
        Lo(a, -e / 2 * (Math.cos(Math.PI * b / c) - 1) + d, !0, !0, 0);
        b === c && Lq(a)
    }, 50)
}

function Lo(a, b, c, d, e) {
    0 > b ? b = 0 : 1 < b && (b = 1);
    if (b === a.Ua || a.W > a.ia) return !1;
    if (e) return b !== a.$c && Mq(a, b, e), !1;
    c || (Hq(a), Lq(a));
    a.Ua = b;
    a.dispatch(73, d);
    return !0
}

function Nq(a) {
    a.Ab && clearInterval(a.Ab);
    a.Ab = 0;
    a.yc = -1
}

function Oq(a, b, c) {
    a.yc = b;
    var d = a.Oa,
        e = b - a.Oa,
        f = (new Date).getTime();
    a.Ab && clearInterval(a.Ab);
    a.Ab = setInterval(function() {
        var b = (new Date).getTime() - f;
        b > c && (b = c);
        No(a, -e / 2 * (Math.cos(Math.PI * b / c) - 1) + d, !0, !0, 0);
        b === c && Nq(a)
    }, 50)
}

function No(a, b, c, d, e) {
    0 > b ? b = 0 : 1 < b && (b = 1);
    if (b === a.Oa || a.L > a.pa) return !1;
    if (e) return b !== a.yc && Oq(a, b, e), !1;
    c || (Hq(a), Nq(a));
    a.Oa = b;
    a.dispatch(30, d);
    return !0
}

function yl(a, b, c) {
    61 < b ? b = 61 : 11 > b && (b = 11);
    if (b === a.Y) return !1;
    a.Ia && b >= a.Ia && (a.Ia = null);
    a.Y = b;
    a.g = b / 4;
    a.dispatch(55, b - 36);
    wo(a.I);
    Bh(a, c);
    return !0
}

function Xm(a, b) {
    var c = Tm(a.ya),
        d = c.width | 0,
        c = c.height;
    if (b || a.L !== d || a.W !== c) {
        var e = !b && d < a.L;
        a.L = d;
        a.W = c;
        a.Dc = Tm(a.kd).width | 0;
        b || (!e && a.Ia ? yl(a, a.Ia, !0) : Bh(a, !0), a.dispatch(49))
    }
}

function Fp(a, b) {
    if (!a.da) {
        var c = a.K,
            d = a.J,
            e = ek(a),
            f = yn(a),
            g = a.L,
            h = a.W,
            k = a.aa[a.T],
            l = rk(a.m),
            m = a.m.Fa,
            n = c.U,
            p = n[c.Qa[a.Ha]],
            q = wp(d);
        if (p)
            if (a.R) f = El(p, Dl(p, a.Va)), 1 === a.Xc ? -1 === a.yc && (0 > f || p.x + p.width + e > g) && No(a, p.x / (a.pa - g), !0, !0, 200) : No(a, (f - e - 100) / (a.pa - g), !0, !0, 0);
            else if (!(q && 0 <= n[d.m].y + f && n[d.g].y + n[d.g].height + f <= h || b && !l && 0 <= p.y + f && p.y + p.height + f <= h))
                if (l && !b) {
                    for (var e = 2 === a.Kc, g = c.Qa, p = Ek(p), c = p.$, l = a.Ha,
                             r = g.length; l !== r - 1 && n[g[l + 1]].Sa === c;) l++;
                    q && n[g[l]].$ > d.g ? (q = n[d.m], k = fn(k, n[d.g],
                        d.J)) : (q = n[g[l + 1]], k = Io(k, l, 1));
                    q ? 1.5 > k - m && (d = Ek(q), e || !(e || 0 <= d.y + f && d.y + d.height + f <= h)) && (e || !e && q.Sa !== c + 1 || p.height - (p.Aa + p.ya + p.sa + p.oa + Eo(p)) + d.height > h ? 350 > 1E3 * (k - m) && Lo(a, 0 === d.$ ? 0 : d.y / (a.ia - h), !0, !0, 350) : d.y + d.height + f > h && Lo(a, (d.y + d.height - h) / (a.ia - h), !0, !0, 1E3 * (k - m - .5))) : Lo(a, 1, !0, !0, 0)
                } else l && !b || Lo(a, 0 === p.Sa ? 0 : p.y / (a.ia - h), !0, !0, 350)
    }
}

function Hq(a) {
    a.Zb && (a.Zb = !1, Hp(a), a.dispatch(9))
}

function kn(a) {
    a.Zb || (a.Zb = !0, Hp(a), a.dispatch(10))
}

function Bh(a, b) {
    if (a.Wc && !a.da) {
        var c = a.K,
            d = c.U,
            e = a.Aa,
            f = a.sa,
            g = a.R,
            h = a.L,
            k = [],
            l = 0,
            m = a.oa ? a.Vb ? 10 : 40 : 0,
            n = 0,
            p = d.length,
            q, r, t, w, v, x;
        if (p) {
            for (q = p; q--;) d[q].Sa = -1;
            for (q = 0; q <= p; q++) {
                v = q === p;
                if (!v && (r = d[q], !il(r, 0 === q, g ? q === p - 1 : !0))) return Bh(a, b);
                if (v || !g && l + r.naturalWidth > h && k.length) {
                    t = e[n];
                    t || (t = new Bo(a, c), e.push(t));
                    x = g || (f || n) && v && h - l >= r.naturalWidth;
                    var A = t,
                        z = l,
                        y = k,
                        I = m,
                        R = x;
                    A.$ = n;
                    A.width = z;
                    A.U = y;
                    A.y = I;
                    for (var V = A.o, ba = !V.N && V.xc, ea = A.U, ca = ea.length, na = A.K.O, ta = na.length, W = ta,
                             ha = void 0, ka = void 0,
                             ab = !1, bb = void 0; W--;) {
                        bb = ca;
                        if ((ha = na[W].J) && ba) {
                            for (ka = !1; bb--;)
                                if (Sk(ea[bb].O[W], !0)) {
                                    ab = ka = !0;
                                    break
                                }
                            ka || na[W].Xa || (ha = !1)
                        }
                        for (bb = ca; bb--;) ea[bb].O[W].Ka = ha
                    }
                    if (ba && !ab)
                        for (W = 0; W < ta; W++)
                            if (na[W].J) {
                                for (bb = ca; bb--;) ea[bb].O[W].Ka = !0;
                                break
                            }
                    if (!R) {
                        var pa = A,
                            La = pa.o.L,
                            Z = pa.U[0].Y,
                            cb = 1,
                            tb = 0,
                            ra = Z,
                            Yc = void 0,
                            Ha = void 0,
                            Pb = void 0,
                            sa = void 0,
                            za = void 0,
                            qd = void 0,
                            yb = void 0,
                            db = void 0,
                            rd = void 0;
                        do cb *= 2, Ha = Co(pa, cb); while (Ha < La && 20 > tb++);
                        for (tb = 0; 20 > tb++;) {
                            Yc = (Z + cb) / 2;
                            Ha = Co(pa, Yc);
                            if (Ha <= La && (ra = Yc, 10 >= Math.abs(La -
                                    Ha))) break;
                            Ha > La ? cb = Yc : Ha < La && (Z = Yc)
                        }
                        Ha > La && (Ha = Co(pa, ra));
                        if (Ha < La) {
                            Pb = La - Ha;
                            a: {
                                for (var Zc = pa.U, kc = Zc.length, Dc = void 0; kc--;)
                                    if (Dc = Zc[kc], !kl(Dc)) {
                                        sa = Dc;
                                        break a
                                    }
                                sa = Zc[0]
                            }
                            for (za = sa.O.length; za--;)
                                if (rd = sa.O[za], rd.Ka)
                                    for (qd = rd.V.length; qd--;) db = rd.V[qd], db.length && (db[db.length - 1].width += Pb);
                            if (sa.fb && (yb = Hl(sa), null !== yb))
                                for (sa.La[yb].width += Pb, yb++; yb < sa.fb;) sa.La[yb].x += Pb, yb++;
                            sa.width += Pb
                        }
                        pa.width = La
                    }
                    var D = A,
                        zb = D.o,
                        aa = D.K,
                        Ua = zb.Qb,
                        ua = zb.g,
                        U = zb.sa,
                        C = zb.oa,
                        N = aa.O.length,
                        Ab = D.U,
                        tc = Ab.length,
                        T =
                            N,
                        uc = !1,
                        sd = !1,
                        Kb = !1,
                        $b = 0,
                        Aa = void 0,
                        eb = void 0,
                        Vb = void 0,
                        va = void 0,
                        Lc = void 0,
                        lc = void 0,
                        X = void 0,
                        Ba = void 0,
                        Dd = void 0,
                        Ec = void 0;
                    D.W.length = 0;
                    D.m.length = 0;
                    D.N.length = 0;
                    D.I.length = 0;
                    D.R.length = 0;
                    D.g.length = 0;
                    D.J.length = 0;
                    D.ia.length = 0;
                    D.Y.length = 0;
                    D.da.length = 0;
                    D.ea.length = 0;
                    D.T.length = 0;
                    D.la.length = 0;
                    D.pa.length = 0;
                    D.na.length = 0;
                    D.aa.length = 0;
                    D.L.length = 0;
                    for (D.Ia.length = 0; T--;) D.W.push(0), D.m.push(0), D.N.push(0), D.I.push(0), D.R.push(0), D.g.push(0), D.J.push(0), D.ia.push(0), D.Y.push(0), D.da.push(0), D.ea.push(0),
                        D.T.push(0), D.la.push(0), D.pa.push(0), D.na.push(0), D.aa.push(0), D.L.push(0), D.Ia.push(0);
                    for (; tc--;) {
                        Aa = Ab[tc];
                        Aa.Sa = D.$;
                        Aa.y = D.y;
                        if (Aa.J || Aa.L) sd = !0;
                        if (Aa.g) {
                            Ec = Dd = 0;
                            for (Ba = Aa.g.length; Ba--;) fj(Pn, Aa.g[Ba]) ? Dd += 4 : Ec += 1.8;
                            Dd > $b && ($b = Dd);
                            Ec > $b && ($b = Ec)
                        }
                        Aa.cb && (Kb = !0);
                        !U && Kl(Aa) && (uc = !0);
                        for (T = N; T--;)
                            if (eb = Aa.O[T], eb.Ka)
                                if (Vb = eb.track, Vb.va && (D.g[T] = Math.max(D.g[T], eb.J.N * ua), D.J[T] = Math.max(D.J[T], eb.J.L * ua)), 0 < eb.g && (zb.N || eb.Ka && 0 !== nl(eb.P))) Vb.va ? D.g[T] = Math.max(D.g[T], ua - th(Vb)) : Vb.Ja && (D.L[T] =
                                        Math.max(D.L[T], 3.25 * ua));
                                else {
                                    for (va = eb.V.length; va--;)
                                        for (lc = eb.V[va], Lc = lc.length; Lc--;) {
                                            X = lc[Lc];
                                            X.Eb && (D.W[T] = Math.max(D.W[T], .8 * ua + Ro(Ua, X, !0)));
                                            X.Db && (D.Y[T] = Math.max(D.Y[T], 1.6 * ua + Ro(Ua, X, !1)));
                                            if (X.$a || U) Vb.hb && nj(X).ob ? D.m[T] = Math.max(D.m[T], 2.5 * ua + (nj(X).ob ? Math.ceil(1.5 * ua) + Math.ceil(.3 * ua) + 7 * ua : 0)) : Vb.pb && (D.m[T] = Math.max(D.m[T], ua * (1 + (U ? 3 : 1.8))));
                                            Vb.va && (X.T && (D.I[T] = Math.max(D.I[T], (1 + (1 === X.T ? 2 : 1.25)) * ua)), X.ub && (D.N[T] = 2.75 * ua), X.I && (1 === X.I || 3 === X.I ? D.R[T] = 3 * ua : D.ia[T] = 3 * ua), X.da &&
                                            (Vb.Pa ? D.g[T] = Math.max(D.g[T], 3 * ua - Hk(eb, X.Ca, !0)) : D.J[T] = Math.max(D.J[T], Hk(eb, X.Ca, !1))));
                                            var fa = X,
                                                ga = Vb,
                                                ma = T,
                                                wa = D.g,
                                                gd = D.J,
                                                E = D.da,
                                                ad = D.ea,
                                                S = D.T,
                                                Ma = D.la,
                                                Lb = D.pa,
                                                da = D.na,
                                                Va = D.aa,
                                                fb = D.L,
                                                Fc = D.Ia,
                                                Wa = ga.va,
                                                la = fa.K.o.g,
                                                Ca = la / 2,
                                                Da = 0,
                                                Pa = (4.13 - .065) * la,
                                                vc = !1,
                                                mc = !1,
                                                nc = !1,
                                                Qa = !1,
                                                Mb = 0,
                                                gb = 0,
                                                qa = gk(fa),
                                                Qb = 1.404 * la,
                                                hb = void 0,
                                                ub = void 0,
                                                Ea = void 0,
                                                Ra = void 0,
                                                td = void 0;
                                            Wa && 0 === (fa.g & 256) && (Da = Math.min(Da, cg(fa, !0, !1, !1)), Pa = Math.max(Pa, dg(fa, !0, !1, !1)));
                                            if (!fa.ta) {
                                                td = fa.X.length;
                                                (Ea = Gg(fa, !1, !1, null)) && Lh(Ea) && Ea.y(!0) -
                                                Qb < Da && (Ra = Mh(Ea, 1, !0, !1, !1, !1, !1), Di(Ea, Ra) && (Da -= Qb));
                                                1 !== td && (Ea = Gg(fa, !0, !1, null));
                                                Ea && Lh(Ea) && Ea.y(!0) + Qb > Pa && (Ra = Mh(Ea, 1, !0, !1, !1, !1, !1), Di(Ea, Ra) || (Pa += Qb));
                                                for (Mb = sj(fa); td--;)
                                                    if (Ea = fa.X[td], Ea.aa && (vc = !0), Ea.vb && (Qa = !0), 0 === Ea.ra ? mc = !0 : Ea.ra === fa.track.gb - 1 && (nc = !0), (null !== Ea.R || qi(Ea)) && (10 <= Ea.ea || -10 >= Ea.ea)) {
                                                        var Bb = pi(Ea, !1, !1, 0, !1);
                                                        10 <= Ea.ea ? Bb.y - 1.088 * la < Da && (Da = Bb.y - 1.088 * la - Ca) : Bb.y > Pa && (Pa = Bb.y + Ca)
                                                    }
                                                Qa && (Da -= 2.5 * la);
                                                !qa && fa.pause && (Da -= 2.5 * la);
                                                vk(fa) && (Da -= 1.5 * la);
                                                if (Wa && fa.m)
                                                    for (hb =
                                                             fa.m.length; hb--;)
                                                        if (Zf(fa) || fa.m[hb].ka[0] === fa) ub = Qf(fa.m[hb], fa).qd, 1 === Tf(fa.m[hb]) ? ub < Da && (Da = ub) : ub > Pa && (Pa = ub)
                                            }
                                            if (Wa) {
                                                0 > Da && -Da > wa[ma] && (wa[ma] = -Da);
                                                Pa > 4.13 * la && Pa - 4.13 * la > gd[ma] && (gd[ma] = Pa - 4.13 * la);
                                                if (mk(fa) || fa.pa) E[ma] = 2 * la;
                                                null !== fa.track.I && lk(fa) && (ad[ma] = 2.5 * la)
                                            }
                                            fa.L && ga.Pa && (S[ma] = Math.max(S[ma], 2 * la * fa.L.length));
                                            if (ga.Ja) {
                                                Tj(fa, !0) && (gb += 2.5 * la);
                                                fa.Y && (gb += 2.5 * la);
                                                if (qj(fa) || rj(fa)) gb += 2.55 * la;
                                                gb && gb > Ma[ma] && (Ma[ma] = gb);
                                                if (vc || fa.Tc) Mb += 2 * la;
                                                if (fa.ea) {
                                                    var Cb = fa.ea,
                                                        wc = Cb.Z.K.o.g,
                                                        Ia = Math.max(0, Cb.I, Cb.g);
                                                    null !== Cb.m && Cb.m > Ia && (Ia = Cb.m);
                                                    Ia *= ia * wc;
                                                    9 === Cb.J && Cb.I > Cb.m && (Ia += 1.5 * wc);
                                                    Lb[ma] = Math.max(Lb[ma], Ia);
                                                    var Na = fa.ea,
                                                        ac = Na.Z.K.o.g,
                                                        ib = Math.min(Na.I, Na.g);
                                                    null !== Na.m && Na.m < ib && (ib = Na.m);
                                                    da[ma] = Math.max(da[ma], (0 <= ib ? 1.5 * ac : -ib * ia * ac) + .5 * la)
                                                }
                                                Mb > Va[ma] && (Va[ma] = Mb);
                                                mc && (fb[ma] = Math.max(fb[ma], 1.56 * la / 2));
                                                nc && (Fc[ma] = Math.max(Fc[ma], 1.56 * la / 2));
                                                ga.Cb && (ub = (3.9 + (null !== fa.kb ? 2.25 : 0)) * la, 1 !== fa.ja.V.length && 0 === fa.Hb ? fb[ma] = Math.max(fb[ma], ub) : Fc[ma] = Math.max(Fc[ma], ub))
                                            }
                                        }
                                    Vb.Ja &&
                                    Kk(eb) && (D.L[T] += 2.5 * ua)
                                }
                    }
                    if (!U && !uc && aa.Za.length)
                        for (Ba = aa.Za.length; Ba--;) {
                            var bd = aa.Za[Ba];
                            if (bd.qc || "" !== bd.kc)
                                if (va = aa.Za[Ba].Ta, va >= Ab[0].$ && va <= Ab[Ab.length - 1].$) {
                                    uc = !0;
                                    break
                                }
                        }
                    D.Aa = uc && C ? .77 * zb.Y + 1.7 * ua : 0;
                    D.ya = sd && C ? 2.6 * ua : 0;
                    D.sa = $b ? ($b + 1) * ua : 0;
                    D.oa = Kb ? 2.5 * ua : 0;
                    if (0 < D.$)
                        for (T = 0; T < N; T++)
                            if (aa.O[T].va) {
                                D.Aa + D.ya + D.sa + D.oa + D.W[T] + D.m[T] + D.N[T] + D.I[T] + D.R[T] + D.g[T] < 2.8 * ua && (D.g[T] = 2.8 * ua);
                                break
                            }
                    for (var Y = A, oa = Y.Aa + Y.ya + Y.sa + Y.oa, bc = Y.K.O, Wb = Y.U, Rb = Y.o.g, dc = !1,
                             jb = 2.5 * Rb, Db = void 0, ja = void 0, hd =
                            void 0, oc = void 0, pb = void 0, ja = Y.ac.length = 0,
                             hd = bc.length; ja < hd; ja++)
                        if (Db = bc[ja], Fo(Y, ja, Db)) {
                            dc && (oa += rh(Db));
                            pb = oa;
                            oa += Y.W[ja] + Y.m[ja];
                            Db.va && (oa += Y.N[ja] + Y.I[ja] + Y.R[ja] + Y.g[ja] + 4.13 * Rb + Y.J[ja] + Y.ia[ja] + Y.Y[ja] + Y.da[ja] + Y.ea[ja]);
                            Db.Pa && (oa += Y.T[ja]);
                            if (Db.Ja) {
                                if (Db.va || Db.Pa) oa += 1.2 * Rb;
                                oa += Y.la[ja] + Y.pa[ja] + Y.na[ja] + Y.aa[ja] + Y.L[ja] + sh(Db) + Y.Ia[ja]
                            }
                            Y.ac[ja] = oa - pb;
                            dc = !0
                        } else Y.ac[ja] = 0;
                    Y.height = oa + jb;
                    oc = Y.height - jb;
                    for (ja = Wb.length; ja--;) Wb[ja].height = oc;
                    n++;
                    m += t.height;
                    g && (a.pa = l + 20);
                    if (v) break;
                    if (!g && !il(r, !0, !0)) return Bh(a, b);
                    l = 0;
                    k = []
                } else if (k.length) {
                    w = k[k.length - 1];
                    l -= w.naturalWidth;
                    if (!g && !il(w, w.Mc, !1)) return Bh(a, b);
                    l += w.naturalWidth
                }
                r.x = l;
                l += r.naturalWidth;
                k.push(r)
            }
            a.ia = m - 2.5 * a.g + (a.oa ? 40 : 0);
            if (g && a.jd && a.ia > a.W && (a.Ia || (a.Ia = a.Y), yl(a, a.Y - 2, !0))) return;
            if (c.T)
                for (var Xb = c.U, Mc = c.O, Sb = Mc.length, Eb = Xb.length, nb, Tb, id,
                         Gc; Eb--;)
                    for (id = Sb; id--;)
                        if (Mc[id].Xa)
                            for (Tb = Xb[Eb].O[id], nb = Tb.R, Gc = nb.length; Gc--;) {
                                var ec = nb[Gc];
                                if (ec.J)
                                    for (var fc = Pg(ec.m), ud = ec.ka, Fb = ec.g, vd = ud[0].K.o.g, Za =
                                            Xg(ec).wa, Oa = void 0, Ed = void 0,
                                             Fe = void 0; Fb--;)
                                        if (Oa = ud[Fb], !Oa.ta && (Fe = Gg(Oa, Za, !0, fc))) {
                                            var xc = ec,
                                                Gb = Oa,
                                                Nb = Qg(Gb),
                                                Ub = Xg(xc),
                                                ob = Vg(xc),
                                                Hb = xc.ka[0].K.o.g,
                                                gc = Qg(Ub),
                                                qb = Pj(Ub, !1, !0, xc.m),
                                                Ge = Qg(ob),
                                                fe = Pj(ob, !1, !0, xc.m),
                                                Pd = gc === Ge ? 0 : (fe - qb) / (Ge - gc),
                                                jd = Pd * Nb + (qb - Pd * gc) + (xc.I ? .5 : -.5) * Hb / 2,
                                                Ib = 0 === Gb.fa ? 0 : Math.min(ri(Qh(Gb, !0)), ri(Gb));
                                            1 < Ib && Gb.wa !== xc.I && (jd += (Gb.wa ? -.5 : .5) * Hb * 1.5 * (Ib - 1));
                                            Ed = jd;
                                            Oa.na = .5 * vd / 2 + Math.abs(ci(Ng(Oa.ja)) - ci(Oa.ja)) + (Oa.wa ? 1 : -1) * (Fg(Fe, !1, fc) - Ed)
                                        }
                            }
        } else a.ia = 0;
        e.length > n && (e.length =
            n);
        a.dispatch(35, b)
    }
}

function sn(a) {
    null === a.Wa && (a.Wa = new mq(a, "waveform", !0, !0, "#9c9c9c"))
}

function qn(a, b) {
    var c = B("keyboard-nut");
    null === a.mb && (a.mb = new bq(b, c, a))
}

function on(a) {
    var b = a.zb;
    if (0 !== b) {
        switch (b) {
            case 1:
                var c = a.mb;
                c.m && (c.m = !1, Xm(c.o, !1), c.o.unassign([67, 51, 25], c.da), c.o.unassign([49], c.Y));
                break;
            case 2:
                $p(a.eb);
                break;
            case 3:
                $p(a.nb);
                break;
            case 4:
                Eq(a.Wa);
                break;
            case 5:
                c = a.Pb, c.g && (G(c.ma, "active"), c.g = !1)
        }
        a.zb = 0;
        a.dispatch(75, b)
    }
}

function nn(a, b) {
    if (b !== a.zb) {
        on(a);
        switch (b) {
            case 1:
                if (!a.mb) return;
                gq(a.mb);
                break;
            case 2:
                if (!a.eb) return;
                aq(a.eb);
                break;
            case 3:
                if (!a.nb) return;
                aq(a.nb);
                break;
            case 4:
                if (!a.Wa || !a.wc) return;
                Fq(a.Wa);
                break;
            case 5:
                if (!a.Pb) return;
                var c = a.Pb;
                c.g || (iq(c), F(c.ma, "active"), c.g = !0);
                break;
            default:
                return
        }
        a.zb = b;
        a.dispatch(76, b)
    }
}

function Ld(a) {
    return a.aa[a.T]
}

function Sm(a, b) {
    if (!(a.T === b || 0 > b || b >= a.aa.length)) {
        var c = a.m,
            d = rk(c),
            e = a.T,
            f = -1 === e,
            g = {},
            h = c.I,
            k = c.volume,
            l, m;
        d && c.pause();
        f || Kd(Ld(a), c.Fa, g);
        f || a.aa[e].g.Aa();
        a.T = b;
        m = a.aa[b];
        e = m.g;
        a.jc = e.N;
        c.m = m;
        c.g = e;
        l = Io(m, g.Ha, g.Va);
        e.la(function(a) {
            a.sb(h);
            a.setVolume(k);
            f || 0 === l || en(c, l);
            d && c.play()
        });
        zp(a.J);
        a.dispatch(68, [b, a.jc])
    }
}

function Jq(a, b, c, d, e, f, g, h, k) {
    var l = a.aa.length;
    b = new Jp(a, b, c, l, d, e, f, g, h, k);
    k.I = l;
    a.aa.push(b);
    a.dispatch(2);
    k.R && a.dispatch(28);
    Sm(a, l);
    return b
}

function Hp(a) {
    -1 !== a.T && (Kd(a.aa[a.T], a.m.Fa, a), a.ec = null, Fp(a, !0))
}

function Pq(a, b) {
    Tc("GET", b, null, function(c) {
        c.embed || c.offline || c.u === soundslice.user_id || document.location.reload();
        var d = a.K,
            e = a.ic;
        d.vc = c.id || 0;
        d.aa = c.slug || "";
        d.uc = c.sh || "";
        d.Wb = c.name || "";
        d.Sb = c.a || "";
        d.Bc = c.v || 0;
        d.N = c.sn;
        d.J = c.s;
        d.R = c.es;
        d.fc = !!c.cv;
        d.tc = c.pd || "";
        d.I = !!c.pp;
        d.lc = !!c.pc;
        d.mc = !!c.pv;
        d.Nb = !!c.owns;
        d.Nc = c.pe || "";
        d.Fc = "undefined" === typeof c.c ? null : c.c;
        c.d && am(d, c.d);
        a.gc = !!c.embed;
        a.Ub = !!c.cp;
        a.hc = c.n && "0" !== e.show_notation;
        a.hc && Qq();
        var f = !a.hc || "1" === e.notationless,
            g = c.r,
            h = g.length,
            k = h - 1,
            l = "1" === e.defer || c.defer || !1,
            m = 0,
            n;
        a.oa && (!a.gc && c.ch && an(a, c.ch), gn(a, e));
        if (c.synthurl && "0" !== e.enable_synth && !f) {
            n = e.synth_display_name;
            if (!n || 30 < n.length) n = "Synthetic";
            a.na = Jq(a, 0, n, null, "", null, null, null, new od(a, c.synthurl));
            k++;
            m++
        }
        "undefined" !== typeof e.recording_idx && /^\d+$/.test(e.recording_idx) && (k = parseInt(e.recording_idx, 10));
        for (e = 0; e !== h; e++) n = g[e], a.Uc(n.s, n.id, n.name, null, n.sync, n.sr, n.cs, n.ce, e + m === k ? l : !0, n);
        Sm(a, k);
        f && zn(a, !0, "0" !== a.ic.waveform);
        !a.gc && a.oa && (0 !== c.set_title &&
        (document.title = (d.Wb || "Untitled") + (d.Sb ? " - " + d.Sb : "") + " | Soundslice"), d.Nb && !d.Fc && (d = document.createElement("script"), d.src = "/assets/js/editbar.js", document.head.appendChild(d)), c.ser && (window.initSync = c.ser), "serviceWorker" in navigator && Rq(a, b, !!c.offline))
    }, function() {
        a.dispatch(24, ["We couldn't load the notation. Try reloading the page?", !0]);
        document.title = "Page not found | Soundslice";
        document.getElementsByClassName("artist-info")[0].innerHTML = "Page not found"
    })
}

function bf(a, b) {
    return a.Jc.getElementsByClassName(b)[0]
}
soundslice.Reader = Gq;
Gq.prototype.addAudioSourceWithAdapter = Gq.prototype.Uc;

function Iq(a) {
    function b() {
        k || ((t = wp(g)) ? (n = g.m, p = g.I, q = g.g, r = g.J, m = 0) : (n = a.K.Qa[a.Ha], p = a.Va, r = q = null, m = 1), l = a.aa[a.T].N, k = new Date)
    }

    function c() {
        500 <= new Date - k && (t && 0 !== m || (q = a.K.Qa[a.Ha], r = a.Va, t = !1, m = 1), h.push([n, p, q, r, l, m, t ? 1 : 0]));
        k = null
    }

    function d() {
        if (!a.la) {
            var b = {
                s: a.K.vc,
                plays: JSON.stringify(h),
                t: A
            };
            w && (b.sid = w);
            z || (z = !0, Tc("POST", "/practicesession/index.json", b, function(a) {
                w || (w = a.sid);
                z = !1
            }, function() {
                z = !1
            }), h = [], x = new Date)
        }
    }

    function e() {
        var a = new Date;
        A += Math.min(a - v, 3E5);
        v = a;
        12E4 <= a - x && d()
    }

    var f = a.m,
        g = a.J,
        h = [],
        k = null,
        l = null,
        m = 0,
        n = 0,
        p = 0,
        q = null,
        r = null,
        t = !1,
        w = null,
        v = new Date,
        x = v,
        A = 0,
        z = !1;
    u(window, "unload", function() {
        e();
        d()
    });
    a.assign([51, 68, 60, 59, 25, 71, 13, 57, 61, 62, 54, 76, 75, 49, 73, 30], function() {
        e()
    }, [34], function() {
        m++
    }, [53, 14], function() {
        e();
        rk(f) && (c(), b())
    }, [43], function() {
        e();
        b()
    }, [40], function() {
        c();
        e();
        d()
    })
}

function Qq() {
    function a() {
        return b && b.offsetHeight > 2 * c ? (Re("GLYPHS_LOADED"), b.parentNode.removeChild(b), b = null, d && (clearInterval(d), d = null), !0) : !1
    }

    var b = document.createElement("span"),
        c, d;
    b.innerHTML = 57424;
    b.style.position = "absolute";
    Wm(b, -1E4);
    Xn(b, -1E4);
    b.style.fontFamily = "sans-serif";
    b.style.fontVariant = "normal";
    b.style.fontStyle = "normal";
    b.style.fontWeight = "normal";
    document.body.appendChild(b);
    c = b.offsetHeight;
    b.style.fontFamily = "soundslice,sans-serif";
    a() || (d = setInterval(a, 50))
}

function Rq(a, b, c) {
    var d = B("makeoffline"),
        e = B("offlineui"),
        f = navigator.serviceWorker;
    f.controller && e && (u(d, "click", function() {
        var c = new MessageChannel,
            d = [],
            k = a.K.O,
            l = k.length;
        if (a.na)
            for (var m = a.na.g.g; l--;) {
             d.push(m.ed(k[l].qb, !1, !1));
            }
        c.port1.onmessage = function(a) {
            a = a.data;
            1 === a.type ? e.innerHTML = '<span class="status">' + a.msg + "</span>" : 2 === a.type && (e.innerHTML = '<span class="nonstatus">\u2714 Offline mode enabled</span>')
        };
        f.controller.postMessage({
            type: 1,
            url: b + "?sw",
            extra: d
        }, [c.port2])
    }), F(e, "active"),
    c && (e.innerHTML = '<span class="nonstatus">\u2714 Offline mode enabled</span>'))
};

gm(function() {
    var a = ao(),
        b = window.location.pathname + "scoredata/index.json",
        c = new Gq(B("appandedit"), !0, a);
    a.h && (b += "?h=" + a.h);
    "1" === a.horiz && xn(c, !0);
    "2" === a.hscroll_type && (c.Xc = 2);
    "2" === a.scroll_type && (c.Kc = 2);
    "0" === a.collapse_empty && (c.xc = !1);
    "1" === a.hshrink && (c.jd = !0);
    "0" === a.enable_waveform && (c.wc = !1);
    if (a.speed) {
        var d = a.speed;
        /^\d+$/.test(d) && (c.m.I = parseInt(d, 10) / 100)
    }
    a.zoom && (a = a.zoom, /^-?\d+$/.test(a) && yl(c, 36 + parseInt(a, 10), !0));
    Pq(c, b);
    soundslice.reader = c
});
